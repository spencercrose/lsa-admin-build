(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},i={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/admin/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"2ef6":function(e,t,r){},"53ca":function(e,t,r){"use strict";r("2ef6")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),i=r("2f62"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("header",[r("NavBar"),r("Message")],1),r("main",[e.isLoading?r("b-alert",{staticClass:"m-5",attrs:{show:"",variant:"info"}},[r("b-spinner",{staticClass:"mr-3",attrs:{small:""}}),e._v("Loading... ")],1):e._e(),e.isAuthenticated?r("b-container",{staticClass:"mt-3",attrs:{fluid:""}},[r("router-view",{key:e.$route.fullPath})],1):r("Login")],1),r("footer",[r("Footer")],1)])},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"z-index":"9990"}},[e.isAuthenticated?r("b-sidebar",{staticStyle:{"z-index":"9999"},attrs:{id:"sidebar-profile",title:"User Profile","backdrop-variant":"dark",backdrop:"",shadow:""}},[r("Profile")],1):e._e(),r("b-navbar",{attrs:{fixed:"top",toggleable:"lg",type:"dark",variant:"dark"}},[r("b-navbar-brand",{attrs:{href:"/admin"}},[r("span",[e._v("Long Service Awards "),r("b-badge",{attrs:{variant:"info"}},[e._v("Admin")])],1)]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":"",type:"dark",variant:"info"}},[r("b-navbar-nav",[r("li",[r("router-link",{staticClass:"nav-link",attrs:{to:"/",exact:""}},[e._v("Home")])],1),r("b-nav-item",{attrs:{href:"https://longserviceawards.gww.gov.bc.ca/"}},[e._v("About")])],1),e.isAuthenticated?r("b-navbar-nav",{staticClass:"ml-auto"},[e.user?r("b-nav-item-dropdown",{staticClass:"btn btn-info text-light p-0",attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[r("BIconPerson"),e._v(" "+e._s(e.user.idir||e.user.email.split("@")[0])+" ")]},proxy:!0}],null,!1,2924744286)},[r("b-dropdown-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-profile",modifiers:{"sidebar-profile":!0}}]},[e._v(" Profile ")]),e.can("add recipients")?r("b-dropdown-item",{attrs:{href:"/admin/recipients/create"}},[e._v("Register Recipient")]):e._e(),e.isOrgContact?r("b-dropdown-item",{attrs:{href:"/admin/recipients"}},[e._v("Manage Recipients")]):e._e(),e.isAdmin?r("b-dropdown-item",{attrs:{href:"/admin/awards"}},[e._v("Manage Awards")]):e._e(),e.isAdmin?r("b-dropdown-item",{attrs:{href:"/admin/ceremonies"}},[e._v("Manage Ceremonies")]):e._e(),e.isAdmin?r("b-dropdown-item",{attrs:{href:"/admin/reports"}},[e._v("Reports")]):e._e(),e.isAdmin?r("b-dropdown-item",{attrs:{href:"/admin/users/register"}},[e._v("Add User")]):e._e(),e.isAdmin?r("b-dropdown-item",{attrs:{href:"/admin/users"}},[e._v("Manage Users")]):e._e(),e.isSuperAdmin?r("b-dropdown-item",{attrs:{href:"/admin/permissions"}},[e._v("Manage Permissions")]):e._e(),r("b-dropdown-item",[r("b-button",{attrs:{block:"",type:"button"},on:{click:function(t){return e.logout()}}},[e._v("Sign Out")])],1)],1):e._e()],1):e._e(),e.atLoginPage||e.isAuthenticated||e.isLoading?e._e():r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-button",{attrs:{variant:"info",type:"button"},on:{click:function(t){return e.reroute("/login")}}},[e._v("Sign In")])],1)],1)],1)],1)},l=[],c=r("3835"),u=r("1da1"),d=(r("96cf"),r("b0c0"),r("caad"),r("2532"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-table",{attrs:{stacked:"",items:[e.user],fields:["name",{key:"idir",label:"IDIR"},"role","email","organizations"]},scopedSlots:e._u([{key:"cell(role)",fn:function(t){return[e._v(" "+e._s(e.lookup("roles",t.item.role))+" ")]}},{key:"cell(organizations)",fn:function(t){return["orgContact"!==e.user.role?r("span",[e._v("n/a")]):e._e(),e._l(t.item.organizations,(function(t){return r("div",{key:t},[e._v(" "+e._s(e.lookupOrganization(t))+" ")])}))]}}])})],1)}),p=[],m=(r("4de4"),r("d3b7"),r("d81d"),r("b64b"),r("4e82"),r("99af"),r("ac1f"),r("5319"),r("466d"),{status:[{value:"",text:"Select a registration status"},{value:0,text:"Draft"},{value:1,text:"Registered"}],assignments:[{value:"",text:"Select a ceremony status"},{value:"assigned",text:"Assigned"},{value:"waitlisted",text:"Waitlisted"},{value:"invited",text:"Invited"},{value:"attending",text:"Attending"},{value:"declined",text:"Declined"}],roles:[{value:"",text:"Select a user role"},{value:"super-admin",text:"Super-Administrator"},{value:"admin",text:"Administrator"},{value:"orgContact",text:"Organization Contact"},{value:"registered",text:"Registered"}],permissions:[{value:"view recipients",text:"View recipients"},{value:"edit recipients",text:"Edit recipients"},{value:"add recipients",text:"Add recipients"},{value:"destroy recipients",text:"Destroy recipients"},{value:"assign recipients",text:"Assign recipients"},{value:"invite recipients",text:"Invite recipients"},{value:"view users",text:"View users"},{value:"edit users",text:"Edit users"},{value:"add users",text:"Add users"},{value:"destroy users",text:"Destroy users"},{value:"assign users",text:"Assign users"},{value:"invite users",text:"Invite users"}],userActions:[{value:"",text:"Select an action"},{value:"role",text:"Bulk update role"},{value:"delete",text:"Delete users"}],recipientActions:[{value:"",text:"Select an action"},{value:"assigned",text:"Assign to Ceremony"},{value:"waitlisted",text:"Waitlist for Ceremony"},{value:"reset",text:"Reset Ceremony Assignment(s)"},{value:"reminder",text:"Send Registration Reminder Email"},{value:"invited",text:"Send Invitation Email"}],isHistorical:[{value:"",text:"Select historical status"},{value:1,text:"Historical Recipient"},{value:0,text:"Non-Historical Recipient"}],isRetiring:[{value:"",text:"Select a retirement status"},{value:1,text:"Retiring This Year"},{value:0,text:"Not Retiring This Year"}],"ceremony-opt-out":[{value:"",text:"Select ceremony opt-out status"},{value:1,text:"Has opted out of attending ceremony"},{value:0,text:"Has not opted out of attending ceremony"}],milestones:[{value:"",text:"Select a milestone year"},{value:"25",text:"25 Years"},{value:"30",text:"30 Years"},{value:"35",text:"35 Years"},{value:"40",text:"40 Years"},{value:"45",text:"45 Years"},{value:"50",text:"50 Years"}],"qualifying-years":[{value:"2022",text:"2022"},{value:"2021",text:"2021"},{value:"2020",text:"2020"},{value:"2019",text:"2019"}],"award-types":[{value:"pecsf",text:"PECSF"},{value:"watch",text:"Watch"},{value:"bracelet",text:"Bracelet"}],"award-option-types":[{value:"sizes",text:"Size",type:"select"},{value:"faces",text:"Watch Face",type:"select"},{value:"straps",text:"Watch Strap",type:"select"},{value:"engraving",text:"Engraving",type:"input"},{value:"certificate",text:"Name for the 25 Year Certificate",type:"input"},{value:"pecsfPool",text:"Donate to PECSF Regional Pool Fund",type:"boolean"},{value:"pecsfRegion1",text:"PECSF Region 1",type:"data"},{value:"pecsfCharity1",text:"PECSF Charity (Region 1)",type:"data"},{value:"pecsfRegion2",text:"PECSF Region 2",type:"data"},{value:"pecsfCharity2",text:"PECSF Charity (Region 2)",type:"data"},{value:"honour",text:"In Honour of",type:"input"}],"sort-by":[{value:"",text:"Select the sorting column"},{value:"first_name",text:"First Name"},{value:"last_name",text:"Last Name"},{value:"employee_number",text:"Employee Number"},{value:"branch_name",text:"Branch Name"},{value:"milestones",text:"Milestone"},{value:"updated_at",text:"Updated Date"},{value:"created_at",text:"Created Date"}],"sort-order":[{value:"",text:"Select the sorting order"},{value:"asc",text:"Ascending"},{value:"desc",text:"Descending"}],"results-per-page":[{value:"",text:"Select the number of results per page"},{value:25,text:"25 records per page"},{value:50,text:"50 records per page"},{value:100,text:"100 records per page"},{value:200,text:"200 records per page"}],awards:[{key:"short_name",label:"Code",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"milestone",label:"Milestone",sortable:!0},{key:"updated_at",sortable:!0},{key:"created_at",sortable:!0},{key:"details",label:"",sortable:!1}],ceremonies:[{key:"id",label:"Ceremony",sortable:!1},{key:"scheduled_datetime",label:"Scheduled Date",sortable:!0},{key:"updated_at",sortable:!0},{key:"created_at",sortable:!0},{key:"details",label:"",sortable:!1}]}),f={get:function(e){return"undefined"!==m[e]?m[e]:null},lookup:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;if(!r[e])return null;var n=r[e].filter((function(e){return e.value===t}));return n.length>0?n[0].text:null},getAwardOptions:function(e,t){var r=this,n=(t||[]).filter((function(t){var r=t||{},n=r.id,i=void 0===n?null:n;return String(i)===String(e)}));if(n.length>0){var i=n[0]||{},a=i.options,s=void 0===a?null:a;return s?Object.keys(s||{}).map((function(e){return{key:e,label:r.lookup("award-option-types",e),options:Array.isArray(s[e])?s[e]:null,selected:null,disabled:!1}})):null}return null},getAwardDetails:function(e,t){var r=t.filter((function(t){return t.id===e}));return r.length>0?r[0]:null},getOrganizations:function(e){function t(e,t){return e.shortName<t.shortName?-1:e.shortName>t.shortName?1:0}var r=(e||[]).sort(t).map((function(e){return{text:"".concat(e.shortName," - ").concat(e.name),value:e.id}}))||[];return r.unshift({value:"",text:"Select a Ministry"}),r},getCommunities:function(e){function t(e,t){return e.name<t.name?-1:e.name>t.name?1:0}var r=(e||[]).sort(t).map((function(e){return{text:"".concat(e.name),value:e.id}}))||[];return r.unshift({value:"",text:"Select a Community"}),r},getPecsfOptions:function(e){var t=e||{},r=t.regions,n=void 0===r?[]:r,i=t.charities,a=void 0===i?[]:i;function s(e,t){return e.name<t.name?-1:e.name>t.name?1:0}var o=n.sort(s).map((function(e){return{text:e.name,value:e.id}}))||[];o.unshift({value:"",text:"Select a PECSF region"});var l=a.sort(s).map((function(e){return{region:e.pecsf_region_id,text:e.name,value:e.id}}))||[];return l.unshift({value:"",text:"Select a PECSF charity"}),{regions:o,charities:l}},getCeremonies:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(e||[]).map((function(e){var t=new Date(e.scheduled_datetime);return{text:"Ceremony: ".concat(t.toLocaleString()),value:e.id}}))||[];return t&&(r.unshift({value:"declined",text:"Show declined recipients"}),r.unshift({value:"attending",text:"Show attending recipients"}),r.unshift({value:"invited",text:"Show invited recipients"}),r.unshift({value:"waitlisted",text:"Show waitlisted recipients"}),r.unshift({value:"assigned",text:"Show assigned recipients"}),r.unshift({value:!0,text:"Has opted out of ceremony"}),r.unshift({value:!1,text:"Has not opted out of ceremony"})),r.unshift({value:"",text:"Select a Ceremony"}),r},formatPhoneNumber:function(e){var t=(""+e).replace(/\D/g,""),r=t.match(/^(\d{3})(\d{3})(\d{4})$/);return r?"("+r[1]+") "+r[2]+"-"+r[3]:null},getEngravingCharLimit:function(e){return"38mm"===e?18:15}},b={name:"user-profile",components:{},methods:{lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){var t=f.lookup("organizations",parseInt(e),{organizations:this.$store.getters.getOrganizations||[]});return t?t.substring(0,t.lastIndexOf("-")):""}},computed:{user:function(){return this.$store.getters.getUser}}},g=b,h=r("2877"),v=Object(h["a"])(g,d,p,!1,null,null,null),_=v.exports,w=r("7386"),y=(r("d9e2"),r("bc3a")),k=r.n(y),x=r("b85c"),O=(r("159b"),r("e9c4"),r("a4d3"),r("e01a"),{invalidToken:{text:"User token could not be verified.",type:"danger"},invalidData:{text:"Your form data is invalid or incomplete.",type:"danger"},serverError:{text:"Server Error: Your request could not be completed.",type:"danger"},notAuthorized:{text:"You are not authorized to access this screen.",type:"danger"},notAuthenticated:{text:"User is not authenticated.",type:"danger"},loginError:{text:"Login Error: Your user credentials are not valid.",type:"danger"}}),R={get:function(e){return"undefined"!==O[e]?O[e]:null}},C=r("21a6");
/*!
 * API services (Vue)
 * File: api.services.js
 * Copyright(c) 2022 BC Gov
 * MIT Licensed
 */
k.a.defaults.xsrfCookieName="csrftoken",k.a.defaults.xsrfHeaderName="X-CSRFToken";var $="https://lsaapp.gww.gov.bc.ca/api",A=k.a.create({baseURL:$,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":"XSRF-TOKEN"},withCredentials:!0}),S=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError].filter((function(e){return"function"===typeof e}));function j(e){var t,r=Object(x["a"])(S);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e instanceof n)throw e}}catch(i){r.e(i)}finally{r.f()}}function z(e,t){return e.then((function(e){return e instanceof Error?(j(e),[e]):[void 0,e]})).catch((function(e){return j(e),[e]})).finally((function(){t&&"function"===typeof t&&t()}))}var E=function(e,t){var r=t||{},n=r.data,i=void 0===n?null:n;return e&&e.response?403===e.response.status||401===e.response.status?[R.get("notAuthorized"),null]:422===e.response.status?[R.get("invalidData"),null]:[R.get("serverError"),null]:[e,i]},P=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(A.get("/recipients/archived/".concat(t)));case 9:return a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],e.abrupt("return",E(o,l));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(A.get("/recipients/employee_number/".concat(t)));case 9:return a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],e.abrupt("return",E(o,l));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,o,l,u,d,p,m=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:"",r=m.length>1&&void 0!==m[1]?m[1]:[],n=t?"recipients/list?page=".concat(t):"recipients/list",i="",r.forEach((function(e){i=i||t?"".concat(i,"&").concat(e.key,"=").concat(e.value):"?".concat(e.key,"=").concat(e.value)})),n="".concat(n).concat(i),e.next=8,X();case 8:if(a=e.sent,s=Object(c["a"])(a,1),o=s[0],!o){e.next=13;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 13:return e.next=15,z(A.get(n));case 15:return l=e.sent,u=Object(c["a"])(l,2),d=u[0],p=u[1],e.abrupt("return",E(d,p));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p,m,f,b,g,h,v,_,w,y,k,x,O,C,$,S,j,P,L,D,F,M,N,I,T,H,U;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(A.get("recipients/view/".concat(t)));case 9:return a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],u=l||{},d=u.data,p=void 0===d?null:d,m=p||{},f=m.awards,b=void 0===f?[]:f,g=m.milestones,h=void 0===g?"":g,v=m.supervisor_address,_=void 0===v?null:v,w=m.office_address,y=void 0===w?null:w,k=m.personal_address,x=void 0===k?null:k,O=b.filter((function(e){return String(e.milestone)===String(h)})),C={award_id:null,award_name:null,options:{}},O.length>0&&($=O[0]||{},S=$.pivot,j=void 0===S?{}:S,P=j||{},L=P.award_id,D=void 0===L?null:L,F=P.options,M=void 0===F?"{}":F,N=P.name,I=void 0===N?null:N,T=P.status,H=void 0===T?"":T,C={id:D,name:I,options:JSON.parse(M),status:H}),U=Object.assign({},p,{award:C}),y||(U=Object.assign({},U,{office_address:{id:null,prefix:"",street_address:"",postal_code:null,community:""}})),x||(U=Object.assign({},U,{personal_address:{id:null,prefix:"",street_address:"",postal_code:null,community:""}})),_||(U=Object.assign({},U,{supervisor_address:{id:null,pobox:"",prefix:"",street_address:"",postal_code:null,community:""}})),e.abrupt("return",E(o,{data:U||{}}));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return a={id:t.award.id||null,options:JSON.stringify(t.award.options)||JSON.stringify({}),status:"delegated"},s=Object.assign({},t,{award:a}),e.next=11,z(A.post("recipients/create",s));case 11:return o=e.sent,l=Object(c["a"])(o,2),u=l[0],d=l[1],e.abrupt("return",E(u,d));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,i,a,s,o,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(n=e.sent,i=Object(c["a"])(n,1),a=i[0],!a){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return s={id:r.award.id||null,options:JSON.stringify(r.award.options)||JSON.stringify({}),status:"delegated"},o=Object.assign({},r,{award:s}),e.next=11,z(A.put("recipients/update/".concat(t),o));case 11:return l=e.sent,u=Object(c["a"])(l,2),d=u[0],p=u[1],e.abrupt("return",E(d,p));case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(A.get("recipients/delete/".concat(t)));case 9:return a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],e.abrupt("return",E(o,l));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(A.get("milestones/".concat(t,"/awards")));case 9:return a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],u=E(o,l),d=Object(c["a"])(u,2),p=d[0],m=d[1],e.abrupt("return",[p,(m||[]).map((function(e){return{id:e.id||"",name:e.name||"",shortName:e.short_name||"",description:e.description||"",imageUrl:e.image_url||"",options:JSON.parse(e.options)||null}}))]);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A.get("organizations");case 2:return t=e.sent,e.next=5,A.get("communities");case 5:return r=e.sent,e.next=8,A.get("pecsf/charities");case 8:return n=e.sent,e.next=11,A.get("pecsf/regions");case 11:return i=e.sent,e.next=14,A.get("ceremonies/list");case 14:return a=e.sent,e.abrupt("return",{organizations:(t.data||[]).map((function(e){return{id:e.id||"",name:e.name||"",shortName:e.short_name||"",orgType:e.org_type||""}})),communities:(r.data||[]).map((function(e){return{id:e.id||"",name:e.name||"",region:e.region||""}})),pecsf:{charities:n?n.data:[],regions:i?i.data:[]},ceremonies:a?a.data:[]});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(A.get(t));case 9:return a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],e.abrupt("return",E(o,l));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,i,a,s,o,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(n=e.sent,i=Object(c["a"])(n,1),a=i[0],!a){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(A.put(t,r));case 9:return s=e.sent,o=Object(c["a"])(s,2),l=o[0],u=o[1],e.abrupt("return",E(l,u));case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,i,a,s,o,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(n=e.sent,i=Object(c["a"])(n,1),a=i[0],!a){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(A.post(t,r));case 9:return s=e.sent,o=Object(c["a"])(s,2),l=o[0],u=o[1],e.abrupt("return",E(l,u));case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r,n){var i,a,s,o,l,u,d,p,m,f,b,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(i=e.sent,a=Object(c["a"])(i,1),s=a[0],!s){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:if("pdf"!==n){e.next=13;break}return e.next=10,z(A.get(t,{responseType:"blob"}));case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,z(A.get(t,{responseType:"blob"}));case 15:e.t0=e.sent;case 16:if(o=e.t0,l=Object(c["a"])(o,2),u=l[0],d=l[1],p=E(u,d),m=Object(c["a"])(p,2),f=m[0],b=m[1],!u){e.next=23;break}return e.abrupt("return",[f,null]);case 23:return g=Object(C["saveAs"])(b,r),e.abrupt("return",[f,g]);case 25:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();
/*!
 * Authentication services (Vue)
 * File: auth.services.js
 * Copyright(c) 2022 BC Gov
 * MIT Licensed
 */
k.a.defaults.xsrfCookieName="csrftoken",k.a.defaults.xsrfHeaderName="X-CSRFToken";var Y=k.a.create({baseURL:"https://lsaapp.gww.gov.bc.ca/",xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":"XSRF-TOKEN"},withCredentials:!0}),X=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(Y.get("sanctum/csrf-cookie"));case 2:return t=e.sent,r=Object(c["a"])(t,2),n=r[0],i=r[1],n&&console.error(n),e.abrupt("return",[n,i]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(t=e.sent,r=Object(c["a"])(t,1),n=r[0],!n){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(Y.get("users"));case 9:return i=e.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],e.abrupt("return",E(s,o));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(Y.get("users/".concat(t)));case 9:return a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],e.abrupt("return",E(o,l));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(Y.post("register",t));case 9:return a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],e.abrupt("return",E(o,l));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,i,a,s,o,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(n=e.sent,i=Object(c["a"])(n,1),a=i[0],!a){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(Y.put("users/update/".concat(t),r));case 9:return s=e.sent,o=Object(c["a"])(s,2),l=o[0],u=o[1],e.abrupt("return",E(l,u));case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,i,a,s,o,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(n=e.sent,i=Object(c["a"])(n,1),a=i[0],!a){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(Y.put("users/role/".concat(t),r));case 9:return s=e.sent,o=Object(c["a"])(s,2),l=o[0],u=o[1],e.abrupt("return",E(l,u));case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:if(i){e.next=24;break}return e.next=10,z(Y.post("login",t));case 10:if(a=e.sent,s=Object(c["a"])(a,1),o=s[0],!o){e.next=15;break}return e.abrupt("return",[R.get("loginError"),null]);case 15:return e.next=17,te();case 17:return l=e.sent,u=Object(c["a"])(l,2),d=u[0],p=u[1],e.abrupt("return",[d?R.get("loginError"):null,p]);case 24:return e.abrupt("return",[i,null]);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(t=e.sent,r=Object(c["a"])(t,1),n=r[0],!n){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:if(n){e.next=18;break}return e.next=10,z(Y.post("logout"));case 10:if(i=e.sent,a=Object(c["a"])(i,1),s=a[0],!s){e.next=15;break}return e.abrupt("return",[R.get("serverError"),null]);case 15:return e.abrupt("return",[s,null]);case 18:return e.abrupt("return",[n,null]);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,o,l,u,d,p,m,f,b,g,h,v,_,w,y,k,x,O,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(Y.get("profile"));case 2:if(t=e.sent,r=Object(c["a"])(t,2),n=r[0],i=r[1],!n){e.next=8;break}return e.abrupt("return",[n,null]);case 8:if(a=i||{},s=a.data,o=void 0===s?null:s,l=o||{},u=l.organizations,d=void 0===u?[]:u,p=l.roles,m=void 0===p?[]:p,f=l.name,b=void 0===f?"":f,g=l.idir,h=void 0===g?"":g,v=l.guid,_=void 0===v?"":v,w=l.email,y=void 0===w?"":w,k=m.length>0?m[0]:{},x=k||{},O=x.permissions,C=void 0===O?[]:O,y){e.next=14;break}return e.abrupt("return",[R.get("notAuthenticated"),null]);case 14:return e.abrupt("return",[n,{name:b,idir:h,guid:_,email:y,role:k.name||"",organizations:d.map((function(e){return e.id})),permissions:C.map((function(e){return e.name}))}]);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,o,l,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:null,e.next=3,X();case 3:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],!i){e.next=8;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 8:if(!t){e.next=14;break}return e.next=11,z(Y.get("permissions/".concat(t)));case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,z(Y.get("permissions"));case 16:e.t0=e.sent;case 17:return a=e.t0,s=Object(c["a"])(a,2),o=s[0],l=s[1],e.abrupt("return",E(o,l));case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,i,a,s,o,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(n=e.sent,i=Object(c["a"])(n,1),a=i[0],!a){e.next=7;break}return e.abrupt("return",[R.get("invalidToken"),null]);case 7:return e.next=9,z(Y.put("permissions/update/".concat(t),{permissions:r}));case 9:return s=e.sent,o=Object(c["a"])(s,2),l=o[0],u=o[1],e.abrupt("return",E(l,u));case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ie={name:"navbar",components:{Profile:_,BIconPerson:w["q"]},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},isLoading:function(){return this.$store.getters.isLoading},atLoginPage:function(){return"users-login"===this.$route.name},user:function(){return this.$store.getters.getUser}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e===t.$route.path){r.next=3;break}return r.next=3,t.$router.push(e);case 3:case"end":return r.stop()}}),r)})))()},logout:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setMessage",{text:"Signing out...",type:"info"}),t.next=3,ee();case 3:if(r=t.sent,n=Object(c["a"])(r,1),i=n[0],console.log(i),e.$store.commit("setMessage",i||{text:"Signed Out Successfully",type:"success"}),i||e.$store.commit("setUser",null),"user-login"===e.$route.name){t.next=12;break}return t.next=12,e.reroute("/login");case 12:case"end":return t.stop()}}),t)})))()},can:function(e){return this.user.permissions.includes(e)}},beforeCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,te();case 3:if(r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i||!a){t.next=14;break}return e.$store.commit("setUser",a),t.next=11,e.$store.dispatch("loadOptions");case 11:e.$store.commit("setLoading",!1),t.next=16;break;case 14:e.$store.commit("setError",{text:"Server Error Occurred. Please contact the site administrator",type:"danger"}),e.$store.commit("setLoading",!1);case 16:case"end":return t.stop()}}),t)})))()}},ae=ie,se=Object(h["a"])(ae,o,l,!1,null,null,null),oe=se.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{staticClass:"p-1",attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#"}},[n("img",{attrs:{height:"60px",src:r("e3cd"),alt:"Where Ideas Work"}})]),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-navbar-nav")],1)],1)],1)},ce=[],ue={name:"Footer",computed:{isLoggedIn:function(){return this.$store.getters.isAuthenticated}}},de=ue,pe=Object(h["a"])(de,le,ce,!1,null,null,null),me=pe.exports,fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"z-index":"9990"}},[r("b-navbar",{staticClass:"p-0 m-5",attrs:{fixed:"top"}},[e.message.text?r("b-alert",{staticClass:"w-100",attrs:{show:"4",fade:"",variant:e.message.type,dismissible:e.message.dismissible},on:{dismissed:function(t){e.message={text:"",type:""}}}},[e.message.spinner?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e(),e._v(" "+e._s(e.message.text)+" ")],1):e._e()],1)],1)},be=[],ge={name:"global-message",computed:{message:{get:function(){return this.$store.getters.getMessage},set:function(e){this.$store.dispatch("setMessage",e)}}}},he=ge,ve=(r("f87e"),Object(h["a"])(he,fe,be,!1,null,null,null)),_e=ve.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isLoading?e._e():r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:"Sign In",lead:"Admin Authentication"}}),e.isAuthenticated?r("b-alert",{attrs:{variant:"info",show:""}},[e._v("You are currently logged in.")]):e._e(),e.isAuthenticated?r("b-alert",{attrs:{variant:"info",show:""}},[e._v("You are currently logged in.")]):r("b-form",{on:{submit:function(t){return e.submit()}}},[r("b-card",{staticClass:"mb-3",attrs:{header:"Login","header-tag":"header","bg-variant":"light"}},[r("b-form-group",{attrs:{id:"fieldset-user-login"}},[r("b-form-group",{attrs:{id:"input-group-user-login-email",label:"Email","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-email"}},[r("b-form-input",{attrs:{id:"input-user-login-email",type:"email",state:e.validate("email")},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("b-form-group",{attrs:{id:"input-group-user-login-password",label:"Password","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-password"}},[r("b-form-input",{attrs:{id:"input-user-login-password",type:"password",state:e.validate("password")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("b-button",{attrs:{variant:"info",disabled:e.processing||!e.validate("all")},on:{click:function(t){return e.submit()}}},[e._v(" Sign In "),this.processing?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e()],1)],1)],1)],1)],1)},ye=[],ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-jumbotron",{attrs:{id:"page-header","header-level":"5",header:this.$props.header,lead:this.$props.lead}}),e.isLoading?r("b-alert",{attrs:{variant:"light",show:""}},[r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}),e._v(" Please wait while the page loads ... ")],1):e._e()],1)},xe=[],Oe={name:"page-header",props:{lead:String,header:String},computed:{isLoading:function(){return this.$store.getters.isLoading}}},Re=Oe,Ce=(r("53ca"),Object(h["a"])(Re,ke,xe,!1,null,null,null)),$e=Ce.exports;var Ae=function(e){return!!String(e||"")},Se=function(e){return!!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},je=function(e){return!!String(e)},ze=function(e){return!!String(e).toLowerCase().match(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4}$/im)},Ee=function(e){return!!String(e).toLowerCase().match(/^[ABCEGHJ-NPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][ -]?\d[ABCEGHJ-NPRSTV-Z]\d$/i)},Pe=function(e,t,r){var n=r||{},i=n.id,a=void 0===i?null:i,s=n.options,o=void 0===s?null:s,l=o||{},c=l.selections,u=void 0===c?[]:c;if(!parseInt(a))return!1;if("pecsf"===e){var d={pecsfPool:!0,pecsfRegion1:null,pecsfCharity1:null,pecsfRegion2:null,pecsfCharity2:null,honour:null,certificate:null};u.forEach((function(e){d[e.key]=e.value}));var p={pecsfRegion1:function(){return!!d.pecsfRegion1},pecsfCharity1:function(){return!!d.pecsfPool||!!d.pecsfRegion1&&!!d.pecsfCharity1},pecsfRegion2:function(){return!0},pecsfCharity2:function(){return!!d.pecsfPool||!d.pecsfPool&&!d.pecsfRegion2||!!d.pecsfRegion2&&!!d.pecsfCharity2},honour:function(){return!!d.honour},certificate:function(){return 0===u.filter((function(e){return"certificate"===String(e.key)&&!e.value})).length}};return"undefined"!==p[t]&&("all"===t?0===Object.keys(p).filter((function(e){return!p[e]()})).length:!!p[t]())}return"watch"===e?u.length>0&&0===u.filter((function(e){return!e.value&&"engraving"!==e.key})).length:u.length>0&&0===u.filter((function(e){return!e.value})).length},Le={name:"user-login",components:{PageHeader:$e},data:function(){return{processing:!1,form:{email:"",password:"",remember:!1,errors:[]}}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.processing=!0,t.next=3,Z(e.form);case 3:return r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],t.next=9,e.$store.dispatch("setMessage",i||{text:"Signed In Successfully",type:"success"});case 9:if(!a){t.next=14;break}if(e.$store.commit("setUser",a),"dashboard"===e.$route.name){t.next=14;break}return t.next=14,e.reroute("/");case 14:e.processing=!1;case 15:case"end":return t.stop()}}),t)})))()}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},isLoading:function(){return this.$store.getters.isLoading},validate:function(){var e=this;return function(t){var r={email:function(){return Se(e.form.email)},password:function(){return je(e.form.password)}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}}},De=Le,Fe=Object(h["a"])(De,we,ye,!1,null,null,null),Me=Fe.exports,Ne={name:"app",components:{NavBar:oe,Message:_e,Footer:me,Login:Me},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},isLoading:function(){return this.$store.getters.isLoading}}},Ie=Ne,Te=(r("034f"),Object(h["a"])(Ie,a,s,!1,null,null,null)),He=Te.exports,Ue=r("8c4f"),Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:"Dashboard",lead:"Administration Dashboard"}}),e.isAuthenticated||e.isLoading?r("b-container",[r("div",[r("b-card-group",{attrs:{deck:""}},[r("b-card",{attrs:{title:"Register Award Recipients"},scopedSlots:e._u([{key:"footer",fn:function(){return[r("b-button",{attrs:{block:"",variant:"info"},on:{click:function(t){return e.reroute("/recipients/create")}}},[e._v("Register Recipient ")])]},proxy:!0}])},[r("b-card-text",[r("p",[e._v("Register Long Service Award recipients as well as view and edit their record data.")])])],1),r("b-card",{attrs:{title:"Manage Award Recipients"},scopedSlots:e._u([{key:"footer",fn:function(){return[r("b-button",{attrs:{block:"",variant:"info"},on:{click:function(t){return e.reroute("/recipients/")}}},[e._v("Recipients List ")])]},proxy:!0}])},[r("b-card-text",[r("p",[e._v("View and edit Long Service Award recipient records.")])])],1)],1)],1)]):r("b-alert",{attrs:{variant:"warning",show:""}},[e._v("You are not logged in.")])],1)},qe=[],Be={name:"dashboard",components:{PageHeader:$e},computed:{isLoading:function(){return this.$store.getters.isLoading},isAuthenticated:function(){return this.$store.getters.isAuthenticated}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()}}},Ye=Be,Xe=Object(h["a"])(Ye,Ve,qe,!1,null,null,null),Je=Xe.exports,We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-not-found"},[r("b-jumbotron",{attrs:{header:"404",lead:"Page could not be found."}})],1)},Ge=[],Ke={},Qe=Ke,Ze=Object(h["a"])(Qe,We,Ge,!1,null,null,null),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),r("ModalView",{attrs:{title:"View "+(e.single||"")+" Details",item:e.selected}}),r("ModalDelete",{attrs:{title:"Delete "+(e.single||""),item:e.selected,url:e.model+"/delete/"+(e.selected.id||""),rerouteURL:""+e.model,loader:e.loadData}}),r("b-table",{attrs:{items:e.items||[],fields:e.fields,striped:"","sort-by":e.sortBy,"sort-desc":e.sortDesc,responsive:"sm",busy:e.loading},on:{"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"head(details)",fn:function(){return[r("b-container",{attrs:{align:"right"}},[r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"success"},on:{click:function(t){return e.reroute("/"+e.model+"/create")}}},[e._v(" Create "+e._s(e.single)+" ")])],1)]},proxy:!0},{key:"cell(scheduled_datetime)",fn:function(t){return[e._v(" "+e._s(new Date(t.item.scheduled_datetime).toLocaleString())+" ")]}},{key:"cell(created_at)",fn:function(t){return[e._v(" "+e._s(new Date(t.item.created_at).toLocaleString())+" ")]}},{key:"cell(updated_at)",fn:function(t){return[e._v(" "+e._s(new Date(t.item.updated_at).toLocaleString())+" ")]}},{key:"cell(details)",fn:function(t){return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-view-item",modifiers:{"modal-view-item":!0}}],staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.selectItem(t.item)}}},[e._v(" View ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/"+e.model+"/edit/"+t.item.id)}}},[e._v(" Edit ")]),r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-delete-item",modifiers:{"modal-delete-item":!0}}],staticClass:"m-1",attrs:{size:"sm",variant:"secondary"},on:{click:function(r){return e.selectItem(t.item)}}},[e._v(" Delete ")]),"ceremonies"===e.model?r("b-button",{staticClass:"m-1",attrs:{disabled:!0,size:"sm",variant:"info"},on:{click:function(r){return e.reroute("/attendees/list/"+t.item.id)}}},[e._v(" Attendees ")]):e._e()]}}])}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},rt=[],nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{ref:"modal",attrs:{id:"modal-view-item",title:e.title.toString(),scrollable:""},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var n=t.close;return[r("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(e){return n()}}},[e._v(" Close ")])]}}])},[r("b-table",{attrs:{items:[e.item],striped:"",stacked:"",responsive:"sm"},scopedSlots:e._u([{key:"cell(created_at)",fn:function(t){return[e._v(" "+e._s(new Date(t.item.created_at).toLocaleString())+" ")]}},{key:"cell(updated_at)",fn:function(t){return[e._v(" "+e._s(new Date(t.item.updated_at).toLocaleString())+" ")]}}])})],1)},it=[],at={name:"modal-view",props:["title","item"]},st=at,ot=Object(h["a"])(st,nt,it,!1,null,null,null),lt=ot.exports,ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{ref:"modal",attrs:{id:"modal-delete-item",title:e.title.toString(),scrollable:""},on:{ok:e.submit},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var n=t.ok,i=t.cancel;return[r("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(e){return n()}}},[e._v(" Delete ")]),r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(e){return i()}}},[e._v(" Cancel ")])]}}])},[r("b-table",{attrs:{items:[e.item],striped:"",stacked:"",responsive:"sm"},scopedSlots:e._u([{key:"cell(created_at)",fn:function(t){return[e._v(" "+e._s(new Date(t.item.created_at).toLocaleString())+" ")]}},{key:"cell(updated_at)",fn:function(t){return[e._v(" "+e._s(new Date(t.item.updated_at).toLocaleString())+" ")]}}])})],1)},ut=[],dt={name:"modal-delete",props:["title","item","url","rerouteURL","loader"],data:function(){return{processing:!1}},methods:{submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.processing=!0,t.next=3,U(e.url);case 3:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],s=a||{},o=s.id,l=void 0===o?"":o,i||!l?e.$store.commit("setMessage",{text:"An error occurred. Your deletion could not be completed",type:"error"}):(e.$store.commit("setMessage",{text:"".concat(e.title," successfully deleted"),type:"success"}),e.loader(),e.$bvModal.hide("modal-delete-item")),e.processing=!1;case 10:case"end":return t.stop()}}),t)})))()}}},pt=dt,mt=Object(h["a"])(pt,ct,ut,!1,null,null,null),ft=mt.exports,bt={name:"item-list",props:["header","lead","mode","model","single"],components:{PageHeader:$e,ModalView:lt,ModalDelete:ft},data:function(){return{loading:!1,error:!1,message:"",sortBy:"updated_at",sortDesc:!0,selected:"",items:[],fields:f.get(this.$props.model)}},computed:{isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin}},methods:{selectItem:function(e){this.selected=e},loadData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.processing=!0,e.error=!1,t.next=4,U("".concat(e.$props.model,"/list"));case 4:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&(e.error=!0,e.$store.commit("setMessage",i)),e.items=a,e.processing=!1;case 11:case"end":return t.stop()}}),t)})))()},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.$store.dispatch("loadOptions");case 3:return t.next=5,e.loadData();case 5:e.$store.commit("setLoading",!1);case 6:case"end":return t.stop()}}),t)})))()}},gt=bt,ht=Object(h["a"])(gt,tt,rt,!1,null,null,null),vt=ht.exports,_t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-unauthorized"},[r("b-jumbotron",{attrs:{header:"401 - Unauthorized",lead:"You are restricted from accessing this page."}})],1)},wt=[],yt={mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("setLoading",!1);case 1:case"end":return t.stop()}}),t)})))()}},kt=yt,xt=Object(h["a"])(kt,_t,wt,!1,null,null,null),Ot=xt.exports,Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),r("ActionUsers",{attrs:{loader:e.loadUsers,selectAll:e.selectAllRows,clearSelected:e.clearSelected}}),e.isLoading?e._e():r("b-container",{staticClass:"mb-2 mt-2 p-2 rounded bg-secondary text-white",attrs:{fluid:""}},[e.isAdmin?e._e():r("b-alert",{attrs:{variant:"info",show:""}},[e._v("Sign in to view this page.")]),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Filter Associated Organizations","label-for":"table-select-filter-organization"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-organization",options:e.organizations},model:{value:e.selectOrganization,callback:function(t){e.selectOrganization=t},expression:"selectOrganization"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Filter User Role","label-for":"table-select-filter-retiring"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-retiring",options:e.roles},model:{value:e.selectRole,callback:function(t){e.selectRole=t},expression:"selectRole"}})],1)],1),r("b-col",{staticClass:"mb-2",attrs:{align:"right"}},[r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"dark"},on:{click:e.clearFilters}},[e._v("Clear Filters")]),r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"info"},on:{click:function(t){return e.reroute("/users/register")}}},[e._v("Add User")])],1)],1)],1),r("b-table",{ref:"selectableTable",attrs:{"primary-key":"id",items:e.items,fields:e.fields,striped:"",filter:e.criteria,"filter-function":e.applyFilter,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"select-mode":e.selectMode,responsive:"sm",selectable:"","selected-variant":"info",busy:e.loading},on:{"row-selected":e.onRowSelected,"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell(organizations)",fn:function(t){return[0===t.item.organizations.length?r("div",[e._v(" n/a ")]):e._l(t.item.organizations,(function(t){return r("div",{key:t},[e._v(" "+e._s(e.lookupOrganization(t))+" ")])}))]}},{key:"cell(role)",fn:function(t){return[e._v(" "+e._s(e.lookup("roles",t.item.role))+" ")]}},{key:"cell(created)",fn:function(t){return[e._v(" "+e._s(t.item.created.toLocaleString())+" ")]}},{key:"cell(updated)",fn:function(t){return[e._v(" "+e._s(t.item.updated.toLocaleString())+" ")]}},{key:"cell(details)",fn:function(t){return[r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/users/view/"+t.item.id)}}},[e._v(" View ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/users/edit/"+t.item.id)}}},[e._v(" Edit ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/users/delete/"+t.item.id)}}},[e._v(" Delete ")])]}}])}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},Ct=[],$t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return!e.isLoading&&e.isAdmin?r("b-container",{staticClass:"p-2 rounded bg-secondary text-white",attrs:{fluid:""}},[r("b-modal",{ref:"modal-edit-role",attrs:{id:"modal-edit-role",title:e.lookup(e.type,e.selectAction).toString(),scrollable:""},on:{ok:function(t){return e.updateRole()}},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var n=t.ok,i=t.cancel;return[r("b-button",{attrs:{disabled:!e.selectOption,size:"sm",variant:"info"},on:{click:function(e){return n()}}},[e._v(" "+e._s(e.lookup(e.type,e.selectAction).toString())+" ")]),r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(e){return i()}}},[e._v(" Cancel ")])]}}],null,!1,2734719119)},[r("div",[r("b-container",{staticClass:"p-2 rounded"},[r("b-row",[r("b-col",[r("b-form-select",{attrs:{id:"table-select-action",options:e.options,state:!!e.selectOption},model:{value:e.selectOption,callback:function(t){e.selectOption=t},expression:"selectOption"}})],1)],1)],1)],1)]),r("b-row",[r("b-col",{attrs:{cols:"4"}},[r("b-form-select",{attrs:{id:"table-select-action",options:e.actions},model:{value:e.selectAction,callback:function(t){e.selectAction=t},expression:"selectAction"}})],1),r("b-col",[r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"info",disabled:e.processing||!e.hasAction||!e.hasSelected},on:{click:e.applyAction}},[e._v(" Apply Action ")])],1),r("b-col",{attrs:{cols:"6",align:"right"}},[e.processing?r("b-spinner",{staticClass:"mr-3 ml-3",attrs:{small:""}}):e._e(),e.selectedItems.length>0?r("span",[e._v(" "+e._s(e.selectedItems.length)+" Item(s) Selected")]):e._e(),r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"dark",disabled:e.processing},on:{click:e.selectAll}},[e._v(" Select All ")]),r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"dark",disabled:e.processing||!e.hasSelected},on:{click:e.clearSelected}},[e._v(" Clear Selected ")])],1)],1)],1):e._e()},At=[],St=(r("3ca3"),r("ddb0"),{name:"modal-action",props:["loader","selectAll","clearSelected"],data:function(){return{type:"userActions",processing:!1,selectAction:"",actions:f.get("userActions"),selectedActionProcess:null,selectOption:"",options:f.get("roles")}},computed:{selectedItems:function(){return this.$store.getters.getSelected||[]},isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},hasAction:function(){return!!this.selectAction},hasSelected:function(){return this.selectedItems.length>0}},methods:{lookup:function(e,t){return f.lookup(e,t)},applyAction:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.selectedItems),e.validateAction()&&"role"===e.selectAction&&e.$bvModal.show("modal-edit-role");case 2:case"end":return t.stop()}}),t)})))()},updateRole:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.processing=!0,r=!0,t.next=4,Promise.all(e.selectedItems.map(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(n){var i,a,s,o,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=n||{},a=i.id,s=void 0===a?null:a,t.next=3,Q(s,{role:e.selectOption});case 3:o=t.sent,l=Object(c["a"])(o,1),u=l[0],u&&(r=!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return r?e.$store.commit("setMessage",{text:"User(s) action ".concat(e.selectAction.toUpperCase()," was successful!"),type:"success"}):e.$store.commit("setMessage",{text:"An error occurred. Your action could not be completed",type:"danger"}),e.selectOption="",e.selectAction="",e.$store.commit("setSelected",[]),e.clearSelected(),t.next=11,e.loader();case 11:e.processing=!1;case 12:case"end":return t.stop()}}),t)})))()},validateAction:function(){var e=this.$store.getters.getUser,t=e||{},r=t.email,n=void 0===r?null:r,i=this.selectedItems.filter((function(e){return e.email&&e.email===n})).length>0;return!i||(this.$store.commit("setMessage",{text:"Cannot apply action to your own user account.",type:"danger"}),!1)}}}),jt=St,zt=Object(h["a"])(jt,$t,At,!1,null,null,null),Et=zt.exports,Pt={name:"users-list",props:["header","lead","mode"],components:{PageHeader:$e,ActionUsers:Et},data:function(){return{loading:!1,error:!1,message:"",sortBy:"last_name",sortDesc:!0,selected:[],items:[],modes:["multi","single","range"],selectMode:"multi",selectOrganization:"",selectRole:"",fields:[{key:"name",sortable:!0},{key:"role",sortable:!0},{key:"organizations",sortable:!0},{key:"updated",sortable:!0},{key:"created",sortable:!0},{key:"details",label:"",sortable:!1}]}},computed:{isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},organizations:function(){return this.$store.getters.getOrganizations},criteria:function(){return{role:this.selectRole,organization:this.selectOrganization}},roles:function(){return f.get("roles")}},methods:{onRowSelected:function(e){this.$store.commit("setSelected",e)},selectAllRows:function(){this.$refs.selectableTable.selectAllRows()},clearSelected:function(){this.$refs.selectableTable.clearSelected()},clearFilters:function(){this.selectRole="",this.selectOrganization=""},applyFilter:function(e){var t=!this.criteria.role||e.role===this.criteria.role,r=!this.criteria.organization||e.organizations.includes(this.criteria.organization);return r&&t},loadUsers:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&(e.error=!0,e.$store.commit("setMessage",i)),e.items=(a||[]).map((function(e){var t=e||{},r=t.id,n=void 0===r?null:r,i=t.name,a=void 0===i?"":i,s=t.email,o=void 0===s?"":s,l=t.roles,c=void 0===l?[]:l,u=t.organizations,d=void 0===u?[]:u,p=t.updated_at,m=void 0===p?null:p,f=t.created_at,b=void 0===f?null:f,g=new Date(m),h=new Date(b),v=c.length>0?c[0].name:"unknown";return{id:n,name:a,email:o,role:v,organizations:d.map((function(e){return e.id})),created:h,updated:g}}));case 8:case"end":return t.stop()}}),t)})))()},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){var t=this.organizations.filter((function(t){return String(t.value)===String(e)}));if(t.length>0){var r=t[0]||{},n=r.text,i=void 0===n?"":n;return i?i.substring(0,i.lastIndexOf("-")):""}return e}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.loadUsers();case 3:e.$store.commit("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()}},Lt=Pt,Dt=Object(h["a"])(Lt,Rt,Ct,!1,null,null,null),Ft=Dt.exports,Mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-form",[r("b-card",{staticClass:"mb-3",attrs:{header:e.isRegistration?"Register User":"Update User Data","header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"}},[r("b-form-group",{attrs:{id:"fieldset-user-registration"}},[r("b-form-group",{attrs:{id:"input-group-user-name",label:"Full Name","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-email"}},[r("b-form-input",{attrs:{id:"input-user-name",state:e.validate("name")},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("name")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-user-email",label:"Email","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-email"}},[r("b-form-input",{attrs:{id:"input-user-email",autocomplete:"on",state:e.validate("email")},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("email")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-user-role",label:"Select User Role","label-class":"font-weight-bold","label-for":"input-user-role"}},[r("b-form-select",{attrs:{id:"input-user-role",options:e.roles},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("role")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-organization",label:"Associated Organizations","label-class":"font-weight-bold","label-for":"input-user-organization"}},[r("b-form-select",{attrs:{id:"input-user-organization",options:e.organizations,disabled:!e.isOrgContact,multiple:""},model:{value:e.user.organizations,callback:function(t){e.$set(e.user,"organizations",t)},expression:"user.organizations"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("organizations")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-user-idir",label:"IDIR","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-idir",description:"Optional"}},[r("b-form-input",{attrs:{id:"input-user-idir"},model:{value:e.user.idir,callback:function(t){e.$set(e.user,"idir",t)},expression:"user.idir"}})],1),r("b-form-group",{attrs:{id:"input-group-user-guid",label:"GUID","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-guid",description:"Optional"}},[r("b-form-input",{attrs:{id:"input-user-guid"},model:{value:e.user.guid,callback:function(t){e.$set(e.user,"guid",t)},expression:"user.guid"}})],1),e.isRegistration?r("b-form-group",{attrs:{id:"input-group-user-password",label:"Password","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-password"}},[r("b-form-input",{attrs:{type:"password",id:"input-user-password",autocomplete:"on",state:e.validate("password")},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("password")}},[e._v(" This field is required. ")])],1):e._e(),e.isRegistration?r("b-form-group",{attrs:{id:"input-group-user-password-confirmation",label:"Password Confirmation","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-password-confirmation"}},[r("b-form-input",{attrs:{type:"password",id:"input-user-password-confirmation",autocomplete:"off",state:e.validate("password_confirmation")},model:{value:e.user.password_confirmation,callback:function(t){e.$set(e.user,"password_confirmation",t)},expression:"user.password_confirmation"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("password_confirmation")}},[e._v(" This field is required. Passwords must match. ")])],1):e._e(),r("b-button",{attrs:{variant:"info",disabled:e.user.processing||!e.validate("all")},on:{click:function(t){return e.submit()}}},[this.user.processing?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e(),e._v(" "+e._s(e.isRegistration?"Register":"Update")+" ")],1)],1)],1)],1)],1)},Nt=[],It={name:"",idir:"",guid:"",role:"",email:"",organizations:[],password:"",password_confirmation:""},Tt={head:{title:"Register User"},props:["header","lead","mode"],components:{PageHeader:$e},data:function(){return{processing:!1}},computed:{user:function(){return this.$store.getters.getFormData},organizations:function(){return this.$store.getters.getOrganizations.filter((function(e){return!!e.value}))||[]},roles:function(){return f.get("roles")},isLoading:function(){return this.$store.getters.isLoading||0===this.$store.getters.getOrganizations.length},isOrgContact:function(){return"orgContact"===this.user.role},isRegistration:function(){return"create"===this.mode},validate:function(){var e=this;return function(t){var r={name:function(){return Ae(e.user.name)},email:function(){return Se(e.user.email)},role:function(){return!!e.user.role},password:function(){return!e.isRegistration||je(e.user.password)},password_confirmation:function(){return!e.isRegistration||je(e.user.password)&&e.user.password===e.user.password_confirmation},organizations:function(){return!e.isOrgContact||e.isOrgContact&&e.user.organizations.length>0}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r||{}).filter((function(e){return!r[e]()})).length:!!r[t]())}}},methods:{submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.processing=!0,!e.isRegistration){t.next=7;break}return t.next=4,G(e.user);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,K(e.$route.params.id,e.user);case 9:t.t0=t.sent;case 10:if(r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],!i){t.next=19;break}console.log(">>>",i,a),e.$store.commit("setMessage",{text:"User could not be saved. An error occurred.",type:"danger"}),t.next=26;break;case 19:if(e.$store.commit("setMessage",{text:e.isRegistration?"Admin user successfully registered":"Admin user successfully updated",type:"success"}),!e.isRegistration){t.next=25;break}return t.next=23,e.$router.push("/users/");case 23:t.next=26;break;case 25:case 26:e.processing=!1;case 27:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l,u,d,p,m,f,b,g,h,v,_,w,y,k;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("setLoading",!0),!e.isRegistration){t.next=5;break}t.t0=[null,It],t.next=8;break;case 5:return t.next=7,W(e.$route.params.id||"");case 7:t.t0=t.sent;case 8:r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&e.$store.commit("setMessage",i),s=a||{},o=s.id,l=void 0===o?"":o,u=s.name,d=void 0===u?"":u,p=s.idir,m=void 0===p?"":p,f=s.guid,b=void 0===f?"":f,g=s.roles,h=void 0===g?[]:g,v=s.email,_=void 0===v?"":v,w=s.organizations,y=void 0===w?[]:w,k=h.length>0?h[0].name:null,e.$store.commit("setFormData",{id:l||"",name:d||"",idir:m||"",guid:b||"",email:_||"",role:k,organizations:y.map((function(e){return e.id}))}),e.$store.commit("setLoading",!1);case 17:case"end":return t.stop()}}),t)})))()}},Ht=Tt,Ut=Object(h["a"])(Ht,Mt,Nt,!1,null,null,null),Vt=Ut.exports,qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-container",[r("b-row",{attrs:{align:"right"}},[r("b-col",[r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"info"},on:{click:function(t){return e.reroute("/users/edit/"+e.user.id)}}},[e._v(" Edit ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.reroute("/users/delete/"+e.user.id)}}},[e._v(" Delete ")])],1)],1),r("b-card",{staticClass:"mb-3",attrs:{header:"User Info","header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"}},[r("b-container",{staticClass:"p-3"},[r("b-row",[r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.user],fields:[{key:"name",label:"Full Name"},{key:"email",label:"Email"},{key:"role",label:"User Role"},{key:"idir",label:"IDIR"},{key:"guid",label:"GUID"},{key:"organizations",label:"Organizations"},{key:"updated_at",label:"Updated"},{key:"created_at",label:"Created"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(organizations)",fn:function(t){return[0===t.item.organizations.length?r("div",[e._v(" n/a ")]):e._l(t.item.organizations,(function(t){return r("div",{key:t},[e._v(" "+e._s(e.lookupOrganization(t))+" ")])}))]}},{key:"cell(role)",fn:function(t){return[e._v(" "+e._s(e.lookup("roles",t.item.role))+" ")]}},{key:"cell(created_at)",fn:function(t){return[e._v(" "+e._s(t.item.created_at.toLocaleString())+" ")]}},{key:"cell(updated_at)",fn:function(t){return[e._v(" "+e._s(t.item.updated_at.toLocaleString())+" ")]}}],null,!1,4202901981)})],1)],1)],1)],1)],1)],1)},Bt=[],Yt={name:"users-view",props:["header","lead","mode"],components:{PageHeader:$e},data:function(){return{user:null}},methods:{loadUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l,u,d,p,m,f,b,g,h,v,_,w,y,k,x,O;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W(e.$route.params.id||null);case 2:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&(e.error=!0,e.$store.commit("setMessage",i)),s=a||{},o=s.id,l=void 0===o?null:o,u=s.name,d=void 0===u?"":u,p=s.email,m=void 0===p?"":p,f=s.roles,b=void 0===f?[]:f,g=s.organizations,h=void 0===g?[]:g,v=s.updated_at,_=void 0===v?null:v,w=s.created_at,y=void 0===w?null:w,console.log(a),k=new Date(_),x=new Date(y),O=b.length>0?b[0].name:"unknown",e.user={id:l,name:d,email:m,role:O,organizations:h.map((function(e){return e.id})),created_at:x,updated_at:k};case 13:case"end":return t.stop()}}),t)})))()},lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){return f.lookup("organizations",parseInt(e),{organizations:this.organizations})},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()}},computed:{organizations:function(){return this.$store.getters.getOrganizations||[]},isLoading:function(){return this.$store.getters.isLoading||!this.user}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.loadUser();case 3:e.$store.commit("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()}},Xt=Yt,Jt=Object(h["a"])(Xt,qt,Bt,!1,null,null,null),Wt=Jt.exports,Gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),r("b-table",{ref:"selectableTable",attrs:{"primary-key":"id",items:e.items,fields:e.fields,striped:"","sort-by":e.sortBy,"sort-desc":e.sortDesc,responsive:"sm",busy:e.loading},on:{"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell(permissions)",fn:function(t){return[r("b-form-group",{attrs:{id:"input-group-permissions","label-class":"font-weight-bold","label-for":"input-user-permissions"}},[r("b-form-select",{attrs:{id:"input-user-permissions",options:e.permissions,disabled:e.processing,multiple:""},model:{value:t.item.permissions,callback:function(r){e.$set(t.item,"permissions",r)},expression:"row.item.permissions"}})],1)]}},{key:"cell(name)",fn:function(t){return[e._v(" "+e._s(e.lookup("roles",t.item.name))+" ")]}},{key:"cell(details)",fn:function(t){return[r("b-button",{staticClass:"m-1",attrs:{size:"sm",disabled:e.processing},on:{click:function(r){return e.update(t.item.id,t.item.permissions)}}},[e._v(" Update Permissions "),e.processing?r("b-spinner",{staticClass:"mr-3 ml-3",attrs:{small:""}}):e._e()],1),r("b-button",{staticClass:"m-1",attrs:{size:"sm",disabled:e.processing},on:{click:e.loadPermissions}},[e._v(" Reset ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",disabled:e.processing},on:{click:function(){t.item.permissions=[]}}},[e._v(" Clear ")])]}}])}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},Kt=[],Qt={name:"permissions-list",props:["header","lead","mode"],components:{PageHeader:$e},data:function(){return{processing:!1,loading:!1,error:!1,message:"",sortBy:"name",sortDesc:!0,items:[],fields:[{key:"name",label:"Role"},{key:"permissions"},{key:"details",label:""}]}},computed:{isLoading:function(){return this.$store.getters.isLoading},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},criteria:function(){return{role:this.selectRole,organization:this.selectOrganization}},roles:function(){return f.get("roles")},permissions:function(){return f.get("permissions")}},methods:{lookup:function(e,t){return f.lookup(e,t)},loadPermissions:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,re();case 2:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&(e.error=!0,e.$store.commit("setMessage",i)),e.items=(a||[]).map((function(e){var t=e||{},r=t.id,n=void 0===r?null:r,i=t.name,a=void 0===i?"":i,s=t.permissions,o=void 0===s?[]:s;return{id:n,name:a,permissions:o.map((function(e){return e.name}))}}));case 8:case"end":return t.stop()}}),t)})))()},update:function(e,t){var r=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var i,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.processing=!0,n.next=3,ne(e,t);case 3:return i=n.sent,a=Object(c["a"])(i,1),s=a[0],s?r.$store.commit("setMessage",{text:"Permissions could not be saved. An error occurred.",type:"danger"}):r.$store.commit("setMessage",{text:"Permissions updated successfully!",type:"success"}),n.next=9,r.loadPermissions();case 9:r.processing=!1;case 10:case"end":return n.stop()}}),n)})))()}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.loadPermissions();case 3:e.$store.commit("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()}},Zt=Qt,er=Object(h["a"])(Zt,Gt,Kt,!1,null,null,null),tr=er.exports,rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:e.header,lead:e.lead}}),r("ActionRecipients",{attrs:{loader:e.loadRecipients,options:e.ceremonies,selectAll:e.selectAllRows,clearSelected:e.clearSelected}}),r("FilterRecipientList",{attrs:{loader:e.loadRecipients,authorize:e.can("add recipients")}}),r("b-table",{ref:"selectableTable",attrs:{small:"",striped:"",id:"recipients-table",items:e.items,fields:e.fields,"select-mode":e.selectMode,responsive:"sm",selectable:e.isAdmin,"selected-variant":"info",busy:e.loading},on:{"row-selected":e.onRowSelected,"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell(is_declared)",fn:function(t){return[t.item.is_declared?r("b-badge",{staticClass:"m-1",attrs:{variant:"success"}},[e._v("Registered")]):r("b-badge",{staticClass:"m-1",attrs:{variant:"warning"}},[e._v("Draft")]),t.item.historical?r("b-badge",{staticClass:"m-1",attrs:{variant:"primary"}},[e._v("Historical")]):e._e(),t.item.retiring_this_year?r("b-badge",{staticClass:"m-1",attrs:{variant:"info"}},[e._v("Retiring")]):e._e()]}},{key:"cell(organization)",fn:function(t){return[e._v(" "+e._s(e.lookupOrganization(t.item.organization))+" ")]}},{key:"cell(ceremony_opt_out)",fn:function(t){return[e._l(t.item.attendee,(function(t,n){return r("b-badge",{key:n,staticClass:"m-1",attrs:{variant:e.getStatus(t.status)}},[e._v(" "+e._s(e.lookup("assignments",t.status))+": "+e._s(new Date(t.ceremonies.scheduled_datetime).toLocaleString())+" ")])})),t.item.ceremony_opt_out?r("b-badge",{staticClass:"m-1",attrs:{variant:"danger"}},[e._v("Opt-Out")]):e._e()]}},{key:"cell(created)",fn:function(t){return[e._v(" "+e._s(t.item.created.toLocaleString())+" ")]}},{key:"cell(updated)",fn:function(t){return[e._v(" "+e._s(t.item.updated.toLocaleString())+" ")]}},{key:"cell(details)",fn:function(t){return[r("b-button-group",[r("b-button",{staticClass:"m-1",attrs:{size:"sm",disabled:!e.can("view recipients")},on:{click:function(r){return e.reroute("/recipients/view/"+t.item.id)}}},[e._v(" View ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",disabled:!e.can("edit recipients")},on:{click:function(r){return e.reroute("/recipients/edit/"+t.item.id)}}},[e._v(" Edit ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",disabled:!e.can("destroy recipients")},on:{click:function(r){return e.reroute("/recipients/delete/"+t.item.id)}}},[e._v(" Delete ")])],1)]}}])}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},nr=[],ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isLoading?e._e():r("b-container",{staticClass:"mb-2 mt-2 p-2 rounded bg-secondary text-white",attrs:{fluid:""}},[r("b-row",[r("b-col",{staticClass:"pl-3"},[r("p",[r("span",{staticClass:"font-weight-bold"},[e._v("Listed Recipients:")]),e._v(" "+e._s(e.pagination.total))])]),r("b-col",{staticClass:"mb-2",attrs:{align:"right"}},[e.processing?r("b-spinner",{staticClass:"mr-3",attrs:{small:"",label:"Loading"}}):e._e(),r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"info",disabled:e.processing},on:{click:function(t){return e.applyFilter()}}},[e._v(" Apply Filters")]),r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"dark",disabled:e.processing},on:{click:e.clearFilters}},[e._v(" Clear Filters")]),r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"success",disabled:!e.authorize},on:{click:function(t){return e.reroute("/recipients/create")}}},[e._v("Add Recipient")])],1)],1),r("b-row",[e.isAdmin?r("b-col",[r("b-form-group",{attrs:{label:"Status","label-for":"table-select-filter-declared"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-declared",options:e.statuses},model:{value:e.selectStatus,callback:function(t){e.selectStatus=t},expression:"selectStatus"}})],1)],1):e._e(),r("b-col",[r("b-form-group",{attrs:{label:"Historical","label-for":"table-select-filter-historical"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-historical",options:e.historical},model:{value:e.selectHistorical,callback:function(t){e.selectHistorical=t},expression:"selectHistorical"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Sort By","label-for":"table-select-filter-sort-by"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-sort-by",options:e.sortBy},model:{value:e.selectSortBy,callback:function(t){e.selectSortBy=t},expression:"selectSortBy"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Sort Order","label-for":"table-select-filter-sort-order"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-sort-order",options:e.sortOrder},model:{value:e.selectSortOrder,callback:function(t){e.selectSortOrder=t},expression:"selectSortOrder"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Results Per Page","label-for":"table-select-filter-results-per-page"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-results-per-page",options:e.resultsPerPage},model:{value:e.selectResultsPerPage,callback:function(t){e.selectResultsPerPage=t},expression:"selectResultsPerPage"}})],1)],1)],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Recipient Name","label-for":"table-input-filter-name"}},[r("b-form-input",{attrs:{id:"table-input-filter-name",placeholder:"Search Recipient's First or Last Name"},model:{value:e.selectName,callback:function(t){e.selectName=t},expression:"selectName"}}),r("p",{staticClass:"small"},[e._v("Enter the first "),r("span",{staticClass:"font-weight-bold"},[e._v("OR")]),e._v(" last name.")])],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Employee Number","label-for":"table-input-filter-employee-number"}},[r("b-form-input",{attrs:{id:"table-input-filter-employee-number",placeholder:"Search recipient's employee number"},model:{value:e.selectEmployeeNumber,callback:function(t){e.selectEmployeeNumber=t},expression:"selectEmployeeNumber"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Milestone","label-for":"table-select-filter-milestone"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-milestone",options:e.milestones},model:{value:e.selectMilestone,callback:function(t){e.selectMilestone=t},expression:"selectMilestone"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Organization","label-for":"table-select-filter-organization"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-organization",options:e.organizations},model:{value:e.selectOrganization,callback:function(t){e.selectOrganization=t},expression:"selectOrganization"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Retirement","label-for":"table-select-filter-retiring"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-retiring",options:e.isRetiring},model:{value:e.selectIsRetiring,callback:function(t){e.selectIsRetiring=t},expression:"selectIsRetiring"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Ceremony","label-for":"table-select-filter-ceremony"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-ceremony",options:e.ceremonies},model:{value:e.selectCeremony,callback:function(t){e.selectCeremony=t},expression:"selectCeremony"}})],1)],1)],1)],1),e.isLoading?e._e():r("b-container",[r("b-row",[r("b-col",{staticClass:"overflow-auto text-center",attrs:{"align-self":"center"}},[r("div",[r("b-button",{staticClass:"m-2",attrs:{variant:"outline-secondary"},on:{click:function(t){return e.applyFilter(1)}}},[r("BIconChevronDoubleLeft")],1),e._l(e.pagination.links,(function(t,n){return r("b-button",{key:n,staticClass:"m-2",attrs:{variant:t.active?"info":"outline-info",disabled:!t.url},on:{click:function(r){e.applyFilter(e.getPageNum(t.url))}}},[0===n?r("BIconCaretLeft"):e._e(),0!==n&&n!==e.pagination.links.length-1?r("span",[e._v(" "+e._s(t.label)+" ")]):e._e(),n===e.pagination.links.length-1?r("BIconCaretRight"):e._e()],1)})),r("b-button",{staticClass:"m-2",attrs:{variant:"outline-secondary"},on:{click:function(t){return e.applyFilter(e.pagination.links.length-2)}}},[r("BIconChevronDoubleRight")],1)],2)])],1)],1)],1)},ar=[],sr=(r("1276"),{name:"filter-recipients-list",components:{BIconCaretRight:w["e"],BIconCaretLeft:w["d"],BIconChevronDoubleLeft:w["g"],BIconChevronDoubleRight:w["h"]},props:{loader:Function,authorize:Boolean},data:function(){return{processing:!1,error:!1,selectHistorical:"",selectStatus:"",selectMilestone:"",selectIsRetiring:"",selectCeremony:"",selectOrganization:"",selectResultsPerPage:"",selectName:"",selectEmployeeNumber:"",selectSortBy:"",selectSortOrder:"",historical:f.get("isHistorical"),statuses:f.get("status"),isRetiring:f.get("isRetiring"),milestones:f.get("milestones"),resultsPerPage:f.get("results-per-page"),sortBy:f.get("sort-by"),sortOrder:f.get("sort-order")}},methods:{getPageNum:function(e){var t=e.split("page=")||[];return t[t.length-1]},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},clearFilters:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectHistorical="",e.selectStatus="",e.selectName="",e.selectEmployeeNumber="",e.selectIsRetiring="",e.selectCeremony="",e.selectMilestone="",e.selectOrganization="",e.selectResultsPerPage="",e.selectSortBy="",e.selectSortOrder="",e.processing=!0,t.next=14,e.loader();case 14:e.processing=!1;case 15:case"end":return t.stop()}}),t)})))()},applyFilter:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:null,t.processing=!0,i=[],""!==t.selectHistorical&&i.push({key:"historical",value:!!t.selectHistorical}),""!==t.selectStatus&&i.push({key:"status",value:!!t.selectStatus}),""!==t.selectName&&i.push({key:"name",value:t.selectName}),""!==t.selectEmployeeNumber&&i.push({key:"employee_number",value:t.selectEmployeeNumber}),""!==t.selectIsRetiring&&i.push({key:"retirement",value:!!t.selectIsRetiring}),""!==t.selectCeremony&&i.push({key:"ceremony",value:t.selectCeremony}),""!==t.selectMilestone&&i.push({key:"milestone",value:t.selectMilestone}),""!==t.selectOrganization&&i.push({key:"organization",value:t.selectOrganization}),""!==t.selectResultsPerPage&&i.push({key:"results_per_page",value:t.selectResultsPerPage}),""!==t.selectSortBy&&i.push({key:"sort",value:"".concat(t.selectSortBy).concat(""!==t.selectSortOrder?"+"+t.selectSortOrder:"")}),r.next=15,t.loader(n,i);case 15:t.processing=!1;case 16:case"end":return r.stop()}}),r)})))()}},computed:{hasFilters:function(){return""!==this.selectName||""!==this.selectEmployeeNumber||""!==this.selectHistorical||""!==this.selectStatus||""!==this.selectIsRetiring||""!==this.selectMilestone||""!==this.selectCeremony||""!==this.selectOrganization||""!==this.selectResultsPerPage||""!==this.selectSortBy||""!==this.selectSortOrder},organizations:function(){var e=this,t=this.$store.getters.getOrganizations;return"orgContact"===this.user.role?t.filter((function(t){return(e.user.organizations||[]).includes(t.value)||!t.value})):t},pagination:function(){return this.$store.getters.getPagination},user:function(){return this.$store.getters.getUser},ceremonies:function(){return this.$store.getters.getCeremoniesOptOut},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},isAdmin:function(){return this.$store.getters.isAdmin},isLoading:function(){return this.$store.getters.isLoading}}}),or=sr,lr=Object(h["a"])(or,ir,ar,!1,null,null,null),cr=lr.exports,ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return!e.isLoading&&e.isAdmin?r("b-container",{staticClass:"p-2 rounded bg-secondary text-white",attrs:{fluid:""}},[r("b-modal",{ref:"modal-action",attrs:{id:"modal-action",title:e.lookup(e.type,e.selectAction).toString(),scrollable:""},on:{ok:function(t){return e.processAction()}},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var n=t.ok,i=t.cancel;return[r("b-button",{attrs:{disabled:!e.selectOption,size:"sm",variant:"info"},on:{click:function(e){return n()}}},[e._v(" "+e._s(e.lookup(e.type,e.selectAction).toString())+" ")]),r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(e){return i()}}},[e._v(" Cancel ")])]}}],null,!1,2734719119)},[r("div",[r("b-container",{staticClass:"p-2 rounded"},[r("b-row",[r("b-col",[r("b-form-select",{attrs:{id:"table-select-action",options:e.options,state:!!e.selectOption},model:{value:e.selectOption,callback:function(t){e.selectOption=t},expression:"selectOption"}})],1)],1)],1)],1)]),r("b-row",[r("b-col",{attrs:{cols:"4"}},[r("b-form-select",{attrs:{id:"table-select-action",options:e.actions},model:{value:e.selectAction,callback:function(t){e.selectAction=t},expression:"selectAction"}})],1),r("b-col",[r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"info",disabled:e.processing||!e.hasAction||!e.hasSelected},on:{click:e.applyAction}},[e._v(" Apply Action ")])],1),r("b-col",{attrs:{cols:"6",align:"right"}},[e.processing?r("b-spinner",{staticClass:"mr-3 ml-3",attrs:{small:""}}):e._e(),e.selectedItems.length>0?r("span",[e._v(" "+e._s(e.selectedItems.length)+" Item(s) Selected")]):e._e(),r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"dark",disabled:e.processing},on:{click:e.selectAll}},[e._v(" Select All ")]),r("b-button",{staticClass:"m-1 border-light font-weight-bold",attrs:{size:"sm",variant:"dark",disabled:e.processing||!e.hasSelected},on:{click:e.clearSelected}},[e._v(" Clear Selected ")])],1)],1)],1):e._e()},dr=[],pr={name:"modal-action",props:["loader","options","selectAll","clearSelected"],data:function(){return{type:"recipientActions",processing:!1,selectAction:"",actions:f.get("recipientActions"),selectedActionProcess:null,selectOption:""}},computed:{selectedItems:function(){return this.$store.getters.getSelected||[]},isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},hasAction:function(){return!!this.selectAction},hasSelected:function(){return this.selectedItems.length>0}},methods:{lookup:function(e,t){return f.lookup(e,t)},applyAction:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("reminder"!==e.selectAction){t.next=4;break}return t.next=3,e.processAction();case 3:return t.abrupt("return",t.sent);case 4:if(!e.validateAction()){t.next=10;break}if("reset"!==e.selectAction&&"invited"!==e.selectAction){t.next=9;break}return t.next=8,e.processAction();case 8:return t.abrupt("return",t.sent);case 9:e.$bvModal.show("modal-action");case 10:case"end":return t.stop()}}),t)})))()},processAction:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="reminder"===e.selectAction?"/recipients/remind":"/recipients/assign",n={status:e.selectAction,ceremony:e.selectOption,attendees:e.selectedItems},e.processing=!0,t.next=5,V(r,n);case 5:return i=t.sent,a=Object(c["a"])(i,1),s=a[0],s?e.$store.commit("setMessage",{text:"An error occurred. Your action could not be completed",type:"danger"}):e.$store.commit("setMessage",{text:"Recipient(s) action ".concat(n.status.toUpperCase()," was successful!"),type:"success"}),e.selectOption="",e.selectAction="",e.$store.commit("setSelected",[]),e.clearSelected(),t.next=15,e.loader();case 15:e.processing=!1;case 16:case"end":return t.stop()}}),t)})))()},validateAction:function(){var e=this,t=this.selectedItems.filter((function(e){return e.ceremony_opt_out})).length>0,r=this.selectedItems.filter((function(e){return!e.is_declared})).length>0,n=0===this.selectedItems.filter((function(t){return t.attendee.filter((function(t){return"waitlisted"!==t.status&&t.ceremonies_id===e.selectOption})).length>0})).length,i=0===this.selectedItems.filter((function(e){return e.attendee.filter((function(e){return"invited"===e.status||"attending"===e.status||"declined"===e.status})).length>0})).length,a=this.selectedItems.filter((function(e){return e.attendee.filter((function(e){return"assigned"===e.status})).length>0})).length===this.selectedItems.length;return r?(this.$store.commit("setMessage",{text:"Draft registrations cannot have assigned ceremonies.",type:"danger"}),!1):t?(this.$store.commit("setMessage",{text:"Selected recipients have opted out of attending ceremonies.",type:"danger"}),!1):"waitlisted"!==this.selectAction||n?"assigned"!==this.selectAction||i?!("invited"===this.selectAction&&!a)||(this.$store.commit("setMessage",{text:"One or more selected attendees cannot be invited (or re-invited). Ensure each invitee is assigned a ceremony",type:"danger"}),!1):(this.$store.commit("setMessage",{text:"Attendee cannot be assigned. Please check their ceremony status.",type:"danger"}),!1):(this.$store.commit("setMessage",{text:"Attendee cannot be waitlisted. Please check their ceremony status.",type:"danger"}),!1)}}},mr=pr,fr=Object(h["a"])(mr,ur,dr,!1,null,null,null),br=fr.exports,gr={name:"recipients-list",props:["header","lead","mode"],components:{PageHeader:$e,ActionRecipients:br,FilterRecipientList:cr},data:function(){return{loading:!1,processing:!1,processingAction:!1,error:!1,message:"",current_page:0,first_page_url:"",last_page_url:"",last_page:"",links:[],next_page_url:"",path:"",per_page:0,prev_page_url:"",from:0,to:0,total:0,modes:["multi","single","range"],selectMode:"multi",items:[],fields:[{key:"is_declared",label:"Status"},{key:"first_name"},{key:"last_name"},{key:"employee_number",label:"Employee No."},{key:"organization"},{key:"branch_name",label:"Branch"},{key:"milestone"},{key:"ceremony_opt_out",label:"Ceremony"},{key:"updated"},{key:"created"},{key:"details",label:""}]}},computed:{isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},user:function(){return this.$store.getters.getUser},ceremonies:function(){return this.$store.getters.getCeremonies},organizations:function(){var e=this,t=this.$store.getters.getOrganizations;return"orgContact"===this.user.role?t.filter((function(t){return(e.user.organizations||[]).includes(t.value)||!t.value})):t}},methods:{onRowSelected:function(e){this.$store.commit("setSelected",e)},selectAllRows:function(){this.$refs.selectableTable.selectAllRows()},clearSelected:function(){this.$refs.selectableTable.clearSelected()},loadRecipients:function(e){var t=arguments,r=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var i,a,s,o,l,u,d,p,m,f,b,g,h,v,_,w,y,k,x,O,R,C,$,A,S,j,z,E,P,L,F,M;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:[],r.processing=!0,r.error=!1,n.next=5,D(e,i);case 5:a=n.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],o&&(r.error=!0,r.$store.commit("setMessage",o)),u=l||{},d=u.data,p=void 0===d?[]:d,m=u.current_page,f=void 0===m?0:m,b=u.first_page_url,g=void 0===b?"":b,h=u.last_page_url,v=void 0===h?"":h,_=u.last_page,w=void 0===_?"":_,y=u.links,k=void 0===y?[]:y,x=u.next_page_url,O=void 0===x?"":x,R=u.path,C=void 0===R?"":R,$=u.per_page,A=void 0===$?0:$,S=u.prev_page_url,j=void 0===S?"":S,z=u.from,E=void 0===z?0:z,P=u.to,L=void 0===P?0:P,F=u.total,M=void 0===F?0:F,r.$store.commit("setPagination",{current_page:f,first_page_url:g,last_page_url:v,last_page:w,links:k,next_page_url:O,path:C,per_page:A,prev_page_url:j,from:E,to:L,total:M}),console.log("Recipients:",p),r.items=(p||[]).filter((function(e){return!!e.is_declared||r.isSuperAdmin||r.isAdmin})).map((function(e){var t=e||{},r=t.id,n=void 0===r?null:r,i=t.first_name,a=void 0!==i&&i,s=t.last_name,o=void 0===s?null:s,l=t.employee_number,c=void 0===l?null:l,u=t.milestones,d=void 0===u?null:u,p=t.historical,m=void 0!==p&&p,f=t.retiring_this_year,b=void 0===f?0:f,g=t.ceremony_opt_out,h=void 0===g?0:g,v=t.organization_id,_=void 0===v?"":v,w=t.branch_name,y=void 0===w?"":w,k=t.is_declared,x=void 0===k?0:k,O=t.attendee,R=void 0===O?null:O,C=t.scheduled_datetime,$=void 0===C?null:C,A=t.updated_at,S=void 0===A?null:A,j=t.created_at,z=void 0===j?null:j,E=new Date(S),P=new Date(z);return{id:n,is_declared:x,attendee:R,scheduled_datetime:$?new Date($).toLocaleString():null,first_name:a,last_name:o,employee_number:c,organization:_,historical:m,milestone:d,branch_name:y,retiring_this_year:b,ceremony_opt_out:h,created:P,updated:E}})),r.processing=!1;case 15:case"end":return n.stop()}}),n)})))()},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},can:function(e){return this.user.permissions.includes(e)},lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){var t=this.organizations.filter((function(t){return String(t.value)===String(e)}));if(t.length>0){var r=t[0]||{},n=r.text,i=void 0===n?"":n;return i?i.substring(0,i.lastIndexOf("-")):""}return e},getStatus:function(e){var t={assigned:"info",waitlisted:"warning",invited:"dark",attending:"success",declined:"danger"};return t[e]||"secondary"}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.$store.dispatch("loadOptions");case 3:return t.next=5,e.loadRecipients();case 5:e.$store.commit("setLoading",!1);case 6:case"end":return t.stop()}}),t)})))()}},hr=gr,vr=Object(h["a"])(hr,rr,nr,!1,null,null,null),_r=vr.exports,wr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.error?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(e._s(e.error))]):e._e(),e.isLoading?e._e():r("b-container",[r("b-row",{attrs:{align:"right"}},[r("b-col",[r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"info",disabled:!e.can("edit recipients")},on:{click:function(t){return e.reroute("/recipients/edit/"+e.recipient.id)}}},[e._v(" Edit ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"danger",disabled:!e.can("destroy recipients")},on:{click:function(t){return e.reroute("/recipients/delete/"+e.recipient.id)}}},[e._v(" Delete ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"dark"},on:{click:function(t){return e.reroute("/recipients")}}},[e._v(" Manage Recipients ")])],1)],1),r("b-card",{staticClass:"mb-3",attrs:{header:"Recipient Record","header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"}},[e.isHistoricalRecipient?r("b-alert",{attrs:{show:"",variant:"info"}},[e._v(" This recipient has previously selected an award. ")]):e._e(),r("b-container",{staticClass:"p-3"},[r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Administrative")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"attendee",label:"Ceremony Attendance"},{key:"historical",label:"Historical Recipient"},{key:"historical_milestone",label:"Historical Milestone"},{key:"historical_milestone_year",label:"Historical Qualifying Year"},{key:"admin_notes",label:"Admin Notes"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(historical)",fn:function(t){return[e._v(" "+e._s(t.item.historical?"Yes":"No")+" ")]}},{key:"cell(attendee)",fn:function(t){return e._l(t.item.attendee,(function(t,n){return r("div",{key:n},[e._v(" "+e._s(e.lookup("assignments",t.status))+" "),t.ceremonies?r("span",[t.ceremonies?r("a",{attrs:{href:"#"}},[e._v(" "+e._s(new Date(t.ceremonies.scheduled_datetime).toLocaleString())+" ")]):e._e()]):e._e()])}))}}],null,!1,2531152206)})],1)],1),r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Identification")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"first_name",label:"First Name"},{key:"last_name",label:"Last Name"},{key:"employee_number",label:"Employee Number"},{key:"government_email",label:"Government Email"},{key:"government_phone_number",label:"Government Phone"},{key:"organization_id",label:"Ministry/Organization"},{key:"branch_name",label:"Branch"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(organization_id)",fn:function(t){return[e._v(" "+e._s(e.lookupOrganization(t.item.organization_id))+" ")]}},{key:"cell(government_phone_number)",fn:function(t){return[e._v(" "+e._s(e.formatPhoneNumber(t.item.government_phone_number))+" ")]}}],null,!1,1080369644)})],1)],1),e.recipient.office_address?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Office Address")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient.office_address],fields:[{key:"prefix",label:"Address Prefix"},{key:"street_address",label:"Street Address"},{key:"community",label:"City or Community"},{key:"postal_code",label:"Postal Code"}],striped:"",responsive:"sm","primary-key":"id"}})],1)],1):e._e(),r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Personal Contact Info")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"personal_email",label:"Email"},{key:"personal_phone_number",label:"Phone"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(personal_phone_number)",fn:function(t){return[e._v(" "+e._s(e.formatPhoneNumber(t.item.personal_phone_number))+" ")]}}],null,!1,44951059)}),e.recipient.personal_address?r("b-table",{attrs:{stacked:"",items:[e.recipient.personal_address],fields:[{key:"prefix",label:"Address Prefix"},{key:"street_address",label:"Street Address"},{key:"community",label:"Community"},{key:"postal_code",label:"Postal Code"}],striped:"",responsive:"sm","primary-key":"id"}}):e._e()],1)],1),r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Milestone")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"milestones",label:"Milestone"},{key:"qualifying_year",label:"Qualifying Year"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){return[e._v(" "+e._s(e.lookup("milestones",t.item.milestones))+" ")]}}],null,!1,2932243400)})],1)],1),e.recipient.retiring_this_year?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Retirement")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"retirement_date",label:"Retirement Date"}],striped:"",responsive:"sm","primary-key":"id"}})],1)],1):e._e(),e.recipient.award.id&&e.awards?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Award")])]),r("b-col",[e.lookupAward(e.recipient.award.id)?r("b-table",{attrs:{stacked:"",items:[e.lookupAward(e.recipient.award.id)],fields:[{key:"name",label:"Award Name"},{key:"description",label:"Description"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(description)",fn:function(t){return e._l(e.parseDescription(t.item.description),(function(t,n){return r("p",{key:n},[e._v(" "+e._s(t)+" ")])}))}}],null,!1,3005756550)}):e._e()],1)],1):r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Award")])]),r("b-col",[r("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("No award selected during registration.")]),e.isHistoricalRecipient?r("b-alert",{attrs:{show:"",variant:"info"}},[e._v(" This recipient has selected an award during a previous year. ")]):e._e()],1)],1),e.recipient.award.options?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Award Options")])]),r("b-col",e._l(e.recipient.award.options.selections||[],(function(t,n){return r("b-table",{key:n,attrs:{stacked:"",fields:[{key:"value",label:e.lookup("award-option-types",t.key)}],items:[t],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(value)",fn:function(t){return[e._v(" "+e._s(e.lookupAwardOption(t.item.key,t.item.value))+" ")]}}],null,!0)})})),1)],1):e._e(),e.recipient.supervisor_address?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Service Pin (Supervisor Contact Info)")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"supervisor_first_name",label:"First Name"},{key:"supervisor_last_name",label:"Last Name"},{key:"supervisor_email",label:"Email"}],striped:"",responsive:"sm","primary-key":"id"}}),r("b-table",{attrs:{stacked:"",items:[e.recipient.supervisor_address],fields:[{key:"pobox",label:"P.O. Box"},{key:"prefix",label:"Address Prefix"},{key:"street_address",label:"Street Address"},{key:"community",label:"Community"},{key:"postal_code",label:"Postal Code"}],striped:"",responsive:"sm","primary-key":"id"}})],1)],1):e._e(),r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Confirmations")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"is_declared",label:"Has confirmed registration"},{key:"ceremony_opt_out",label:"To attend the Awards Ceremony"},{key:"survey_participation",label:"To participate in the LSA survey"},{key:"is_bcgeu_member",label:"BCGEU Member"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(ceremony_opt_out)",fn:function(t){return[e._v(" "+e._s(t.item.ceremony_opt_out?"No":"Yes")+" ")]}},{key:"cell(is_bcgeu_member)",fn:function(t){return[e._v(" "+e._s(t.item.is_bcgeu_member?"Yes":"No")+" ")]}},{key:"cell(survey_participation)",fn:function(t){return[e._v(" "+e._s(t.item.survey_participation?"Yes":"No")+" ")]}},{key:"cell(is_declared)",fn:function(t){return[e._v(" "+e._s(t.item.is_declared?"Yes":"No")+" ")]}}],null,!1,2818688521)})],1)],1)],1)],1)],1)],1)},yr=[],kr={name:"recipients-view",props:["header","lead","mode"],components:{PageHeader:$e},data:function(){return{recipient:null,error:""}},methods:{can:function(e){return this.$store.getters.getUser.permissions.includes(e)},lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){return f.lookup("organizations",parseInt(e),{organizations:this.organizations})},lookupAward:function(e){return f.getAwardDetails(parseInt(e),this.awards)},lookupAwardOption:function(e,t){var r=this.$store.getters.getAwards,n=this.$store.getters.getPecsfOptions,i=this.recipient.award||{},a=i.id,s=void 0===a?null:a,o=f.getAwardOptions(s,r),l=(o||[]).filter((function(t){return String(e)===String(t.key)}))||null;return l.length>0?"engraving"===e||"certificate"===e?t:f.lookup("options",t,l[0]||[]):"pecsfPool"===e?t?"Yes":"No":"honour"===e?t||"None":t?f.lookup("regions",parseInt(t),n)||f.lookup("charities",parseInt(t),n):"n/a"},formatPhoneNumber:function(e){return f.formatPhoneNumber(e)},parseDescription:function(e){return e.split(/(\\r)*\\n/g)},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()}},computed:{organizations:function(){return this.$store.getters.getOrganizations||[]},awards:function(){return this.$store.getters.getAwards||[]},isLoading:function(){return this.$store.getters.isLoading||!this.recipient},isHistoricalRecipient:function(){var e=this.recipient||{},t=e.historical,r=void 0!==t&&t;return r}},beforeCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),r=e.$route.params||{},n=r.id,i=void 0===n?null:n,t.next=4,e.$store.dispatch("loadOptions");case 4:return t.next=6,F(i);case 6:if(a=t.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],!o){t.next=15;break}e.$store.commit("setMessage",o),e.error=o.text,t.next=18;break;case 15:return e.recipient=l||{},t.next=18,e.$store.dispatch("loadAwards",e.recipient.milestones);case 18:e.$store.commit("setLoading",!1);case 19:case"end":return t.stop()}}),t)})))()}},xr=kr,Or=Object(h["a"])(xr,wr,yr,!1,null,null,null),Rr=Or.exports,Cr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-container",[e.isHistoricalRecipient?r("b-alert",{attrs:{show:"",variant:"info"}},[e._v(" This recipient has previously selected an award. ")]):e._e(),e.error?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(e._s(e.error))]):e._e(),r("InputIdentification"),r("InputPersonal"),r("InputMilestone"),r("InputAward"),r("InputSupervisor"),r("InputDeclarations"),r("InputAdminNotes"),r("b-button-group",{staticClass:"w-100"},[r("b-button",{attrs:{variant:"info",disabled:e.processing||!e.isValid},on:{click:function(t){return e.submit()}}},[e._v(" "+e._s("create"===this.mode?"Register":"Update")+" "),e.processing?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e()],1),r("b-button",{attrs:{variant:"secondary",disabled:e.processing},on:{click:function(t){return e.reroute("/recipients/")}}},[e._v(" Cancel ")])],1),r("b-form-invalid-feedback",{attrs:{state:e.isValid}},[e._v(" Form is invalid or incomplete. ")]),r("b-form-valid-feedback",{attrs:{state:e.isValid}},[e._v(" Form is complete and valid. ")]),e.recipient.id?r("b-row",{attrs:{align:"right"}},[r("b-col",[r("router-link",{attrs:{to:"/recipients/view/"+e.recipient.id}},[e._v("View")]),e._v(" | "),r("router-link",{attrs:{to:"/recipients/delete/"+e.recipient.id}},[e._v("Delete")]),e._v(" | "),r("router-link",{attrs:{to:"/recipients/"}},[e._v("Manage Recipients")])],1)],1):e._e()],1)],1)},$r=[],Ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Personal Contact Details "),e.hasData&&e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{attrs:{id:"fieldset-personal-email",label:"Personal Email","label-for":"input-personal-email"}},[r("b-form-input",{attrs:{id:"input-personal-email",placeholder:"Recipient's email address"},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.personal_email,callback:function(t){e.$set(e.recipient,"personal_email",t)},expression:"recipient.personal_email"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("email")}},[e._v(" Enter a valid email address. This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-personal-phone",label:"Personal Phone Number","label-for":"input-personal-phone"}},[r("b-form-input",{attrs:{id:"input-personal-phone",placeholder:"###-###-####"},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.personal_phone_number,callback:function(t){e.$set(e.recipient,"personal_phone_number",t)},expression:"recipient.personal_phone_number"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("personal_phone_number")}},[e._v(" Enter a valid phone number (###-###-####) ")])],1)],1),r("Address",{attrs:{id:"personal_address",header:"Personal Address",label:"Personal"}})],1)},Sr=[],jr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.header)+" "),e.isRequired?e._e():r("b-badge",{staticClass:"mr-2",attrs:{variant:"info",show:""}},[e._v("Optional")]),e.hasData&&e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",[e.pobox?r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-pobox",label:"P.O. Box","label-for":"input-"+e.id+"-address-pobox",description:"Required for Victoria addresses"}},[r("b-form-input",{attrs:{prepend:"P.O. Box",id:"input-"+e.id+"-address-pobox",placeholder:"P.O. Box number"},model:{value:e.address.pobox,callback:function(t){e.$set(e.address,"pobox",t)},expression:"address.pobox"}})],1):e._e(),r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-prefix",label:"Address Prefix","label-for":"input-"+e.id+"-address-prefix",description:"Optional"}},[r("b-form-input",{attrs:{id:"input-"+e.id+"-address-prefix",placeholder:"Address prefix"},model:{value:e.address.prefix,callback:function(t){e.$set(e.address,"prefix",t)},expression:"address.prefix"}})],1),r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-street-address",label:"Street Address","label-for":"input-"+e.id+"-address-street-address"}},[r("b-form-input",{attrs:{id:"input-"+e.id+"-address-street-address",placeholder:e.label+" street address",state:e.isRequired?e.validate("street_address"):null},on:{change:function(t){return e.updateValidation()}},model:{value:e.address.street_address,callback:function(t){e.$set(e.address,"street_address",t)},expression:"address.street_address"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("street_address")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-postalcode",label:"Postal Code","label-for":"input-"+e.id+"-address-postalcode"}},[r("b-form-input",{attrs:{id:"input-"+e.id+"-address-postalcode",placeholder:"A0A 0A0",state:e.isRequired?e.validate("postal_code"):null},on:{update:function(t){return e.updateValidation()}},model:{value:e.address.postal_code,callback:function(t){e.$set(e.address,"postal_code",t)},expression:"address.postal_code"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("postal_code")}},[e._v(" Enter a valid Canadian postal code. "),e.isRequired?r("span",[e._v(" This field is required.")]):e._e()])],1),r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-community",label:"City or Community","label-for":"input-"+e.id+"-address-community"}},[r("b-form-input",{attrs:{id:"input-"+e.id+"-address-community",placeholder:"Address's city or community",list:"community-list",state:e.isRequired?e.validate("community"):null},on:{change:function(t){return e.updateValidation()}},model:{value:e.address.community,callback:function(t){e.$set(e.address,"community",t)},expression:"address.community"}}),r("datalist",{attrs:{id:"community-list"}},e._l(e.communities,(function(t,n){return r("option",{key:n},[e._v(" "+e._s(t.text)+" ")])})),0),r("b-form-invalid-feedback",{attrs:{state:e.validate("community")}},[e._v(" This field is required. ")])],1)],1)],1)},zr=[],Er=r("ade3"),Pr={name:"fieldset-address",props:{id:String,header:String,label:String,pobox:Boolean},methods:{updateValidation:function(){this.isRequired?this.$store.commit("setFormValidation",Object(Er["a"])({},this.id,this.validate("all"))):this.$store.commit("setFormValidation",Object(Er["a"])({},this.id,!0))}},computed:{recipient:function(){return this.$store.getters.getFormData},address:function(){return this.recipient[this.id]?this.recipient[this.id]:{}},organizations:function(){return this.$store.getters.getOrganizations},communities:function(){return this.$store.getters.getCommunities},isLoading:function(){return this.$store.getters.isLoading},isRequired:function(){return"personal_address"!==this.id||"personal_address"===this.id&&(!!this.recipient.retiring_this_year||!!this.recipient.ceremony_opt_out)},hasData:function(){return!!this.address.pobox||!!this.address.prefix||!!this.address.postal_code||!!this.address.street_address||!!this.address.community},validate:function(){var e=this;return function(t){var r={street_address:function(){return e.isRequired?Ae(e.address.street_address):!e.hasData||Ae(e.address.street_address)},postal_code:function(){return e.isRequired?Ee(e.address.postal_code):!e.hasData||Ee(e.address.postal_code)},community:function(){return e.isRequired?Ae(e.address.community):!e.hasData||Ae(e.address.community)}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}},mounted:function(){this.updateValidation()}},Lr=Pr,Dr=Object(h["a"])(Lr,jr,zr,!1,null,null,null),Fr=Dr.exports,Mr={name:"input-personal-contact",components:{Address:Fr},methods:{updateValidation:function(){this.isRequired&&this.$store.commit("setFormValidation",{personal_contact:this.validate("all")})}},computed:{recipient:function(){return this.$store.getters.getFormData},hasData:function(){return!!this.recipient.personal_email||!!this.recipient.personal_phone_number},validate:function(){var e=this;return function(t){var r={email:function(){return!e.recipient.personal_email||Se(e.recipient.personal_email)},personal_phone_number:function(){return!e.recipient.personal_phone_number||ze(e.recipient.personal_phone_number)}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}},mounted:function(){this.updateValidation()}},Nr=Mr,Ir=Object(h["a"])(Nr,Ar,Sr,!1,null,null,null),Tr=Ir.exports,Hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Profile Details "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",[r("b-form-group",{attrs:{id:"fieldset-recipient-firstName",label:"First Name","label-for":"input-recipient-firstName"}},[r("b-form-input",{attrs:{id:"input-recipient-firstName",placeholder:"Recipient's first name",state:e.validate("first_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.first_name,callback:function(t){e.$set(e.recipient,"first_name",t)},expression:"recipient.first_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("first_name")}},[e._v(" This field is required. ")])],1),r("b-form-group",[r("b-form-group",{attrs:{id:"fieldset-recipient-lastName",label:"Last Name","label-for":"input-recipient-lastName"}},[r("b-form-input",{attrs:{id:"input-recipient-lastName",placeholder:"Recipient's last name",state:e.validate("last_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.last_name,callback:function(t){e.$set(e.recipient,"last_name",t)},expression:"recipient.last_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("last_name")}},[e._v(" This field is required. ")])],1)],1),r("b-form-group",{attrs:{id:"fieldset-recipient-employee-number",label:"Employee Number","label-for":"input-recipient-employee-number"}},[r("b-form-input",{attrs:{id:"input-recipient-employee-number",placeholder:"Recipient's employee number",state:e.validate("employee_number")},on:{change:function(t){return e.checkEmployeeNumber()},update:function(t){return e.updateValidation()}},model:{value:e.recipient.employee_number,callback:function(t){e.$set(e.recipient,"employee_number",t)},expression:"recipient.employee_number"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("employee_number")}},[e._v(" This field is required. ")]),e.isHistoricalRecipient?r("b-alert",{attrs:{show:"",variant:"info"}},[e._v(" This recipient has previously selected an award. ")]):e._e()],1),r("b-form-group",{attrs:{id:"fieldset-recipient-email",label:"Government Email","label-for":"input-recipient-email"}},[r("b-form-input",{attrs:{id:"input-recipient-email",placeholder:"Recipient's employee email address",state:e.validate("government_email")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.government_email,callback:function(t){e.$set(e.recipient,"government_email",t)},expression:"recipient.government_email"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("government_email")}},[e._v(" Enter a valid email address. ")])],1),r("b-form-group",{attrs:{id:"fieldset-recipient-government-phone",label:"Government Phone Number","label-for":"input-recipient-government-phone",description:"Optional"}},[r("b-form-input",{attrs:{id:"input-recipient-government-phone",placeholder:"###-###-####"},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.government_phone_number,callback:function(t){e.$set(e.recipient,"government_phone_number",t)},expression:"recipient.government_phone_number"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("government_phone_number")}},[e._v(" Enter a valid phone number (###-###-####) ")])],1),r("b-form-group",{attrs:{id:"input-group-organization",label:"Government Ministry","label-for":"input-organization"}},[r("b-form-select",{attrs:{id:"input-organization",options:e.organizations,state:e.validate("organization_id")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.organization_id,callback:function(t){e.$set(e.recipient,"organization_id",t)},expression:"recipient.organization_id"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("organization_id")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-recipient-branch",label:"Branch (Please fill out in full)","label-for":"input-recipient-branch"}},[r("b-form-input",{attrs:{id:"input-recipient-branch",placeholder:"Recipient's ministry branch",state:e.validate("branch_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.branch_name,callback:function(t){e.$set(e.recipient,"branch_name",t)},expression:"recipient.branch_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("branch_name")}},[e._v(" This field is required. ")])],1)],1)],1),r("Address",{attrs:{id:"office_address",header:"Office Address",label:"Office",required:!0}})],1)},Ur=[],Vr={name:"input-identification",components:{Address:Fr},methods:{checkEmployeeNumber:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=+e.recipient.employee_number,r=isNaN(r)?e.recipient.employee_number:String(r),e.recipient.employee_number=0!==r&&"0"!==r?r:"",e.recipient.employee_number){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,L(r);case 7:if(n=t.sent,i=Object(c["a"])(n,2),a=i[0],s=i[1],o=s||{},l=o.id,u=void 0===l?"":l,a||u===e.recipient.id){t.next=17;break}e.$store.commit("setMessage",{text:"Registration already exists for this employee number.",type:"warning"}),e.recipient.employee_number="",t.next=20;break;case 17:return t.next=19,e.$store.dispatch("isHistoricalRecipient",e.recipient.employee_number);case 19:e.isHistoricalRecipient&&(e.$store.commit("setFormData",{milestones:null,award:{}}),e.$store.commit("setFormValidation",{award:!0,award_options:!0,milestone:!0}));case 20:case"end":return t.stop()}}),t)})))()},updateValidation:function(){this.$store.commit("setFormValidation",{identification:this.validate("all")})}},computed:{recipient:function(){return this.$store.getters.getFormData},organizations:function(){var e=this.$store.getters.getOrganizations||[],t=this.$store.getters.getUser||{};return t&&"orgContact"===t.role?e.filter((function(e){return t.organizations.includes(e.value)})):e},communities:function(){return this.$store.getters.getCommunities},validate:function(){var e=this;return function(t){var r={first_name:function(){return Ae(e.recipient.first_name)},last_name:function(){return Ae(e.recipient.first_name)},employee_number:function(){return Ae(e.recipient.employee_number)},government_email:function(){return Se(e.recipient.government_email)},government_phone_number:function(){return!e.recipient.government_phone_number||ze(e.recipient.government_phone_number)},organization_id:function(){return!!e.recipient.organization_id},branch_name:function(){return!!e.recipient.branch_name}};return"all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:"undefined"!==r[t]&&!!r[t]()}},isSubmitted:function(){return this.$store.getters.isSubmitted},isHistoricalRecipient:function(){return this.$store.getters.getFormData.historical}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.getters.getFormData.employee_number,n=void 0===r?null:r,t.next=3,e.$store.dispatch("isHistoricalRecipient",n);case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){this.updateValidation()}},qr=Vr,Br=Object(h["a"])(qr,Hr,Ur,!1,null,null,null),Yr=Br.exports,Xr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Milestone Details "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",[e.isHistoricalRecipient?r("b-alert",{attrs:{variant:"info",show:""}},[e._v(" This recipient has previously registered for an award. "),r("ul",[r("li",[e._v("Milestone: "+e._s(e.recipient.historical_milestone||"n/a"))]),r("li",[e._v("Qualifying Year: "+e._s(e.recipient.historical_milestone_year||"n/a"))])])]):e._e(),!e.isHistoricalRecipient||e.isAdmin?r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-milestone",label:"Select Recipient's Milestone","label-for":"input-milestone","label-class":"font-weight-bold"}},[r("b-form-select",{attrs:{id:"input-milestone",options:e.options.milestones,state:e.validate("milestone")},on:{change:function(t){return e.selectMilestone(e.recipient.milestones)}},model:{value:e.recipient.milestones,callback:function(t){e.$set(e.recipient,"milestones",t)},expression:"recipient.milestones"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("milestone")}},[e._v(" This field is required. ")])],1):e._e(),!e.isHistoricalRecipient||e.isAdmin?r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-milestone-qualifying-year",label:"Qualifying Year","label-size":"md","label-class":"font-weight-bold","label-for":"input-milestone-qualifying-year"}},[e._l(e.options.qualifyingYears,(function(t,n){return r("b-form-radio",{key:n,attrs:{name:"input-milestone-qualifying-year",value:t.value,state:e.validate("qualifyingYear")},on:{change:function(t){return e.updateValidation()}},model:{value:e.recipient.qualifying_year,callback:function(t){e.$set(e.recipient,"qualifying_year",t)},expression:"recipient.qualifying_year"}},[e._v(" "+e._s(t.text)+" ")])})),r("b-form-invalid-feedback",{attrs:{state:e.validate("qualifyingYear")}},[e._v(" This field is required. ")])],2):e._e()],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-milestone-retirement",label:"Retirement","label-size":"md","label-class":"font-weight-bold","label-for":"input-milestone-retirement"}},[r("b-form-checkbox",{attrs:{id:"input-milestone-retirement",value:1,"unchecked-value":0},on:{change:function(t){return e.resetRetirementDate()}},model:{value:e.recipient.retiring_this_year,callback:function(t){e.$set(e.recipient,"retiring_this_year",t)},expression:"recipient.retiring_this_year"}},[e._v("Confirm retirement in "+e._s((new Date).getFullYear()))])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-milestone-retirement-date",label:"Retirement Date","label-size":"md","label-class":"font-weight-bold","label-for":"input-milestone-retirement-date"}},[r("b-form-datepicker",{attrs:{id:"input-milestone-retirement-date",min:e.currentDate,max:e.maxDate,locale:"en",disabled:!e.recipient.retiring_this_year},on:{input:function(t){return e.updateValidation()}},model:{value:e.recipient.retirement_date,callback:function(t){e.$set(e.recipient,"retirement_date",t)},expression:"recipient.retirement_date"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("retirementDate")}},[e._v(" This field is required. ")])],1)],1)],1)},Jr=[],Wr={award:{id:null,options:null,name:"",status:"delegated"}},Gr={name:"input-milestone",data:function(){return{options:{qualifyingYears:f.get("qualifying-years"),milestones:f.get("milestones")}}},methods:{selectMilestone:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.updateValidation(),t.$store.commit("setFormData",Wr),r.next=4,t.$store.dispatch("loadAwards",e);case 4:t.$store.commit("setFormValidation",{award:t.isAdmin});case 5:case"end":return r.stop()}}),r)})))()},resetRetirementDate:function(){this.$store.commit("setFormData",{retirement_date:null}),this.updateValidation()},updateValidation:function(){this.$store.commit("setFormValidation",{milestone:this.validate("all")})}},computed:{recipient:function(){return this.$store.getters.getFormData},validate:function(){var e=this;return function(t){var r={milestone:function(){return!!parseInt(e.recipient.milestones)||e.isHistoricalRecipient},qualifyingYear:function(){return!!parseInt(e.recipient.qualifying_year)||e.isHistoricalRecipient},retirementDate:function(){return!parseInt(e.recipient.retiring_this_year)||!!Date.parse(e.recipient.retirement_date)}};return"all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]&&!!r[t]()}},currentDate:function(){return new Date},maxDate:function(){var e=1,t=new Date;return new Date(t.setFullYear(t.getFullYear()+e))},isHistoricalRecipient:function(){return this.$store.getters.getFormData.historical},isAdmin:function(){return this.$store.getters.isAdmin}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.updateValidation(),r=e.recipient,n=r.milestones,i=void 0===n?"":n,a=r.retiring_this_year,s=void 0===a?null:a,s||e.resetRetirementDate(),!i){t.next=6;break}return t.next=6,e.$store.dispatch("loadAwards",i);case 6:case"end":return t.stop()}}),t)})))()}},Kr=Gr,Qr=Object(h["a"])(Kr,Xr,Jr,!1,null,null,null),Zr=Qr.exports,en=function(){var e=this,t=e.$createElement,r=e._self._c||t;return!e.isHistoricalRecipient||e.isAdmin&&e.isHistoricalRecipient?r("b-container",[e.recipient.milestones?r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Awards for Milestone Year "+e._s(e.recipient.milestones)+" "),e.recipient.award.id?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}],null,!1,1376826590)},[r("b-form-group",{attrs:{id:"fieldset-award",label:"Select Recipient's Award","label-for":"input-award"}},[r("b-form-select",{attrs:{id:"input-award",options:e.awards,state:""!==e.recipient.award.id},on:{change:function(t){return e.resetOptions()}},model:{value:e.recipient.award.id,callback:function(t){e.$set(e.recipient.award,"id",t)},expression:"recipient.award.id"}}),r("b-form-invalid-feedback",{attrs:{state:""!==e.recipient.award.id}},[e._v(" This field is required. ")]),r("b-button",{staticClass:"m-2",attrs:{size:"sm",variant:"info",disabled:!e.recipient.award.id},on:{click:e.resetAwards}},[e._v(" Clear Award Selection ")])],1),r("p",[e._v(e._s(e.description.replaceAll("\\n\\n","")))])],1):e._e(),e.hasOptions&&e.recipient.award.id?r("div",[e.isPECSF?r("InputAwardPECSF"):e.isWatch?r("InputAwardWatch"):r("InputAwardOptions")],1):e._e()],1):e._e()},tn=[],rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Award Options "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",e._l(e.awardOptions,(function(t,n){return r("b-form-group",{key:n,staticClass:"mb-4",attrs:{id:"input-group-award-options-"+n,label:""+t.label,"label-for":"input-award-options-"+n,"label-class":"font-weight-bold",description:t.description||""}},[t.options?r("b-form-group",[r("b-form-select",{attrs:{id:"input-award-options-"+n,options:t.options,state:!!t.selected,disabled:t.disabled},on:{change:function(r){return e.updateOptions(t)}},model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"awardOption.selected"}}),r("b-form-invalid-feedback",{attrs:{state:!!t.selected}},[e._v(" This field is required. ")])],1):e._e(),"certificate"===t.key?r("b-form-group",{attrs:{id:"input-group-award-option-certificate"}},[r("b-form-input",{attrs:{id:"input-award-options-certificate",placeholder:"Enter a name here",state:!!t.selected},on:{update:function(r){return e.updateOptions(t)}},model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"awardOption.selected"}}),r("b-form-invalid-feedback",{attrs:{state:!!t.selected}},[e._v(" This field is required. ")]),r("b-form-valid-feedback",{attrs:{state:!!t.selected}},[e._v(" To appear on your certificate: "),r("b",[e._v('"')]),e._v(e._s(t.selected)),r("b",[e._v('"')])])],1):e._e()],1)})),1)],1)},nn=[],an={name:"input-award-options-other",components:{},computed:{recipient:function(){return this.$store.getters.getFormData},awardOptions:function(){var e=this.recipient.award||{},t=e.id,r=void 0===t?null:t,n=e.options,i=void 0===n?{}:n,a=f.getAwardOptions(r,this.$store.getters.getAwards);if(!a)return[];var s=i||{},o=s.selections,l=void 0===o?[]:o;return a.map((function(e){return l.forEach((function(t){t.key===e.key&&(e.selected=t.value)})),e}))},validate:function(){var e=this;return function(t){return Pe("other",t,e.recipient.award)}}},methods:{updateOptions:function(){var e={selections:(this.awardOptions||[]).map((function(e){return{key:e.key,value:e.selected}}))};this.$store.commit("setFormData",{award:{id:this.recipient.award.id||null,options:e,status:this.recipient.award.status}})}}},sn=an,on=Object(h["a"])(sn,rn,nn,!1,null,null,null),ln=on.exports,cn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Award Options: PECSF Donation "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{attrs:{id:"input-group-award-options-pecsf",label:"Choose Donation Option","label-class":"font-weight-bold"}},[r("b-form-radio",{attrs:{name:"donatationOptions",value:!0},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfPool,callback:function(t){e.$set(e.selected,"pecsfPool",t)},expression:"selected.pecsfPool"}},[e._v("Donate to the PECSF Regional Pool Fund")]),r("b-form-radio",{attrs:{name:"donatationOptions",value:!1},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfPool,callback:function(t){e.$set(e.selected,"pecsfPool",t)},expression:"selected.pecsfPool"}},[e._v("Donate to a registered charitable organization (maximum of two)")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-region-1",label:"Choose a region for your first donation","label-class":"font-weight-bold","label-for":"input-award-options-pecsf-region-1"}},[r("b-form-select",{attrs:{id:"input-award-options-pecsf-region-1",options:e.pecsfOptions.regions,state:e.validate("pecsfRegion1")},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfRegion1,callback:function(t){e.$set(e.selected,"pecsfRegion1",t)},expression:"selected.pecsfRegion1"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("pecsfRegion1")}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-charity-1",label:"Choose a charity for your first donation","label-class":"font-weight-bold","label-for":"input-award-options-pecsf-charity-1"}},[r("b-form-select",{attrs:{id:"input-award-options-pecsf-charity-1",options:e.selected.pecsfRegion1?e.pecsfOptions.charities.filter((function(t){return t.region===e.selected.pecsfRegion1})):[{key:null,text:"Select a region to view charities."}],disabled:e.disabled.pecsfCharity1},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfCharity1,callback:function(t){e.$set(e.selected,"pecsfCharity1",t)},expression:"selected.pecsfCharity1"}},[e._v(" "+e._s(e.selected.pecsfRegion1)+" ")]),r("b-form-invalid-feedback",{attrs:{state:e.validate("pecsfCharity1")}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-region-2",label:"Choose a region for your second donation","label-class":"font-weight-bold","label-for":"input-award-options-pecsf-region-2",description:"Optional"}},[r("b-form-select",{attrs:{id:"input-award-options-pecsf-region-2",options:e.pecsfOptions.regions,disabled:e.disabled.pecsfRegion2},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfRegion2,callback:function(t){e.$set(e.selected,"pecsfRegion2",t)},expression:"selected.pecsfRegion2"}})],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-charity-2",label:"Choose a charity for your second donation","label-class":"font-weight-bold","label-for":"input-award-options-pecsf-charity-2",description:"Optional"}},[r("b-form-select",{attrs:{id:"input-award-options-pecsf-charity-2",options:e.selected.pecsfRegion2?e.pecsfOptions.charities.filter((function(t){return t.region===e.selected.pecsfRegion2})):[{key:null,text:"Select a region to view charities."}],disabled:e.disabled.pecsfCharity2},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfCharity2,callback:function(t){e.$set(e.selected,"pecsfCharity2",t)},expression:"selected.pecsfCharity2"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("pecsfCharity2")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-award-options-pecsf-behalf",label:"Name for PECSF Donation certificate","label-for":"input-award-options-pecsf-behalf","label-class":"font-weight-bold"}},[r("b-form-input",{attrs:{id:"input-award-options-pecsf-behalf",placeholder:"Enter name here",disabled:e.disabled.honour,state:e.validate("honour")},on:{update:function(t){return e.updateSelection()}},model:{value:e.selected.honour,callback:function(t){e.$set(e.selected,"honour",t)},expression:"selected.honour"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("honour")}},[e._v(" This field is required. ")])],1),e.hasCertificate?r("b-form-group",{attrs:{id:"input-group-award-option-certificate",label:"Name for 25 Year Certificate","label-for":"input-award-options-certificate","label-class":"font-weight-bold"}},[r("b-form-input",{attrs:{id:"input-award-options-certificate",placeholder:"Enter a name here",state:e.validate("certificate")},on:{update:function(t){return e.updateSelection()}},model:{value:e.selected.certificate,callback:function(t){e.$set(e.selected,"certificate",t)},expression:"selected.certificate"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("certificate")}},[e._v(" This field is required. ")])],1):e._e()],1)},un=[],dn={name:"input-award-options-pecsf",data:function(){return{disabled:{pecsfRegion1:!0,pecsfCharity1:!0,pecsfRegion2:!0,pecsfCharity2:!0,honour:!1}}},computed:{recipient:function(){return this.$store.getters.getFormData},selected:function(){var e=this.recipient.award.options,t=void 0===e?{}:e,r=t||{},n=r.selections,i=void 0===n?[]:n,a=this.hasCertificate?{pecsfPool:!0,pecsfRegion1:null,pecsfCharity1:null,pecsfRegion2:null,pecsfCharity2:null,honour:null,certificate:null}:{pecsfPool:!0,pecsfRegion1:null,pecsfCharity1:null,pecsfRegion2:null,pecsfCharity2:null,honour:null};return i.forEach((function(e){a[e.key]=e.value})),a},hasCertificate:function(){var e=this.recipient.award.id,t=void 0===e?null:e,r=f.getAwardOptions(t,this.$store.getters.getAwards||[])||[];return r.filter((function(e){return"certificate"===String(e.key)})).length>0},pecsfOptions:function(){return this.$store.getters.getPecsfOptions},validate:function(){var e=this;return function(t){return Pe("pecsf",t,e.recipient.award)}}},methods:{updateSelection:function(){var e=this;this.selected.pecsfPool?(this.selected.pecsfCharity1=null,this.selected.pecsfRegion2=null,this.selected.pecsfCharity2=null,this.disabled.pecsfCharity1=!0,this.disabled.pecsfRegion2=!0,this.disabled.pecsfCharity2=!0):(this.disabled.pecsfRegion2=!1,this.disabled.pecsfCharity1=!this.selected.pecsfRegion1,this.disabled.pecsfCharity2=!this.selected.pecsfRegion2,this.disabled.pecsfCharity1&&(this.selected.pecsfCharity1=null),this.disabled.pecsfCharity2&&(this.selected.pecsfCharity2=null));var t=Object.keys(this.selected||{}).map((function(t){return{key:t,value:e.selected[t]}}));this.$store.commit("setFormData",{award:{id:this.recipient.award.id||null,options:{selections:t},status:this.recipient.award.status}})}},mounted:function(){this.updateSelection()}},pn=dn,mn=Object(h["a"])(pn,cn,un,!1,null,null,null),fn=mn.exports,bn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Award Options: Watch "),e.validate()?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-watch-faces",label:"Choose the watch face type","label-class":"font-weight-bold","label-for":"input-award-options-watch-faces"}},[r("b-form-select",{attrs:{id:"input-award-options-watch-faces",options:e.awardOptions("faces"),state:!!e.selected.faces,disabled:e.disabled.faces},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.faces,callback:function(t){e.$set(e.selected,"faces",t)},expression:"selected.faces"}}),r("b-form-invalid-feedback",{attrs:{state:!!e.selected.faces}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-watch-sizes",label:"Choose the watch size","label-class":"font-weight-bold","label-for":"input-award-options-watch-sizes"}},[r("b-form-select",{attrs:{id:"input-award-options-watch-sizes",options:e.awardOptions("sizes"),state:!!e.selected.sizes,disabled:e.disabled.sizes},on:{change:function(t){return e.updateSelection("sizes")}},model:{value:e.selected.sizes,callback:function(t){e.$set(e.selected,"sizes",t)},expression:"selected.sizes"}}),r("b-form-invalid-feedback",{attrs:{state:!!e.selected.sizes}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-watch-straps",label:"Choose the watch strap type","label-class":"font-weight-bold","label-for":"input-award-options-watch-strap"}},[r("b-form-select",{attrs:{id:"input-award-options-watch-strap",options:e.awardOptions("straps"),state:!!e.selected.straps,disabled:e.disabled.straps},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.straps,callback:function(t){e.$set(e.selected,"straps",t)},expression:"selected.straps"}}),r("b-form-invalid-feedback",{attrs:{state:!!e.selected.straps}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-award-option-engraving",label:"Enter Engraved Message","label-for":"input-award-options-engraving",description:"Character Limit: "+e.engravingCharLimit}},[r("b-form-input",{attrs:{id:"input-award-options-engraving",placeholder:"Enter the engraving",disabled:e.disabled.engraving,formatter:e.limitCharLength},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.engraving,callback:function(t){e.$set(e.selected,"engraving",t)},expression:"selected.engraving"}}),r("b-form-valid-feedback",{attrs:{state:!!e.selected.engraving}},[e._v(" Inscription: "),r("b",[e._v('"')]),e._v(e._s(e.selected.engraving)),r("b",[e._v('"')])])],1)],1)},gn=[],hn={name:"input-award-options-watch",data:function(){return{disabled:{faces:!1,sizes:!1,straps:!0,engraving:!1}}},computed:{recipient:function(){return this.$store.getters.getFormData},selected:function(){var e=this.recipient.award.options,t=void 0===e?{}:e,r=t||{},n=r.selections,i=void 0===n?[]:n,a={faces:null,sizes:null,straps:null,engraving:null};return i.forEach((function(e){a[e.key]=e.value})),a},engravingCharLimit:function(){var e="",t=this.recipient.award.options||{},r=t.selections,n=void 0===r?[]:r;return n.forEach((function(t){"sizes"===String(t.key)&&(e=t.value)})),f.getEngravingCharLimit(e)},validate:function(){var e=this;return function(){return Pe("watch",null,e.recipient.award)}},awardOptions:function(){var e=this;return function(t){var r=e.recipient.award||{},n=r.id,i=void 0===n?null:n,a=f.getAwardOptions(i,e.$store.getters.getAwards);if(!a)return[];var s=a.filter((function(e){return e.key===t}));return s.length>0?s[0].options:[]}}},methods:{updateSelection:function(e){var t=this;"two-toned"===this.selected.faces?(this.selected.straps="plated",this.disabled.straps=!0):this.disabled.straps=!1;var r=Object.keys(this.selected||{}).map((function(r){return"sizes"===e&&(t.selected.engraving=""),{key:r,value:t.selected[r]}}));this.$store.commit("setFormData",{award:{id:this.recipient.award.id||null,options:{selections:r},status:this.recipient.award.status}})},limitCharLength:function(e){return String(e).substring(0,this.engravingCharLimit)}},mounted:function(){this.updateSelection()}},vn=hn,_n=Object(h["a"])(vn,bn,gn,!1,null,null,null),wn=_n.exports,yn={name:"input-award",components:{InputAwardOptions:ln,InputAwardPECSF:fn,InputAwardWatch:wn},methods:{resetOptions:function(){this.$store.commit("setFormData",{award:{id:this.recipient.award.id,options:null,status:"delegated"}}),this.updateValidation()},resetAwards:function(){this.$store.commit("setFormData",{award:{id:null,options:null,status:"delegated"}}),this.updateValidation()},updateValidation:function(){var e=f.getAwardDetails(this.recipient.award.id,this.$store.getters.getAwards||[]);this.$store.commit("setFormValidation",{award:!!this.recipient.award.id||this.isHistoricalRecipient||this.isAdmin,award_options:!!e&&!!e.options||this.isHistoricalRecipient||this.isAdmin||!0})}},computed:{recipient:function(){return this.$store.getters.getFormData},description:function(){var e=f.getAwardDetails(this.recipient.award.id,this.$store.getters.getAwards||[]);return e&&e.description||""},awards:function(){return(this.$store.getters.getAwards||[]).map((function(e){return{value:e.id||"",text:e.name||""}}))},hasOptions:function(){var e=f.getAwardDetails(this.recipient.award.id,this.$store.getters.getAwards||[]),t=e||{},r=t.options,n=void 0===r?null:r;return!!n},isAdmin:function(){return this.$store.getters.isAdmin},isHistoricalRecipient:function(){return this.recipient.historical},isPECSF:function(){var e=this.recipient.award.id,t=void 0===e?null:e,r=f.getAwardOptions(t,this.$store.getters.getAwards||[])||[];return r.filter((function(e){return"pecsf"===String(e.key)})).length>0},isWatch:function(){var e=this.recipient.award.id,t=void 0===e?null:e,r=f.getAwardOptions(t,this.$store.getters.getAwards||[])||[];return r.filter((function(e){return"faces"===String(e.key)})).length>0}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.updateValidation();case 1:case"end":return t.stop()}}),t)})))()}},kn=yn,xn=Object(h["a"])(kn,en,tn,!1,null,null,null),On=xn.exports,Rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Supervisor Contact Details "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{attrs:{id:"fieldset-supervisor-firstName",label:"Supervisor's First Name","label-for":"input-supervisor-firstName"}},[r("b-form-input",{attrs:{id:"input-supervisor-firstName",placeholder:"Enter supervisor's first name",state:e.validate("first_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.supervisor_first_name,callback:function(t){e.$set(e.recipient,"supervisor_first_name",t)},expression:"recipient.supervisor_first_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("first_name")}},[e._v(" This field is required. ")])],1),r("b-form-group",[r("b-form-group",{attrs:{id:"fieldset-supervisor-lastName",label:"Supervisor's Last Name","label-for":"input-supervisor-lastName"}},[r("b-form-input",{attrs:{id:"input-supervisor-lastName",placeholder:"Enter supervisor's last name",state:e.validate("last_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.supervisor_last_name,callback:function(t){e.$set(e.recipient,"supervisor_last_name",t)},expression:"recipient.supervisor_last_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("last_name")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-supervisor-email",label:"Supervisor's Contact Email","label-for":"input-supervisor-email"}},[r("b-form-input",{attrs:{id:"input-supervisor-email",placeholder:"Supervisor's employee email address",state:e.validate("email")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.supervisor_email,callback:function(t){e.$set(e.recipient,"supervisor_email",t)},expression:"recipient.supervisor_email"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("email")}},[e._v(" Enter a valid email address. ")])],1)],1)],1),r("Address",{attrs:{id:"supervisor_address",header:"Supervisor Address",label:"Supervisor",pobox:!0,required:!0}})],1)},Cn=[],$n={name:"input-supervisor-contact",components:{Address:Fr},methods:{updateValidation:function(){this.$store.commit("setFormValidation",{supervisor_contact:this.validate("all")})}},computed:{recipient:function(){return this.$store.getters.getFormData},validate:function(){var e=this;return function(t){var r={first_name:function(){return Ae(e.recipient.supervisor_first_name)},last_name:function(){return Ae(e.recipient.supervisor_last_name)},email:function(){return Se(e.recipient.supervisor_email)}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}},mounted:function(){this.updateValidation()}},An=$n,Sn=Object(h["a"])(An,Rn,Cn,!1,null,null,null),jn=Sn.exports,zn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Confirmations "),e.recipient.is_declared?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-declarations-is-declared",label:"Declare Registration as Completed","label-size":"md","label-class":"font-weight-bold","label-for":"input-declarations-is-declared"}},[r("b-form-checkbox",{attrs:{id:"input-declarations-is-declared",value:1,"unchecked-value":0,state:!!e.recipient.is_declared},on:{change:function(t){return e.updateValidation()}},model:{value:e.recipient.is_declared,callback:function(t){e.$set(e.recipient,"is_declared",t)},expression:"recipient.is_declared"}},[e._v("Confirm this Registration")]),r("b-form-invalid-feedback",{attrs:{state:!!e.recipient.is_declared}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-milestone-bcgeu","label-size":"md","label-class":"font-weight-bold","label-for":"input-milestone-bcgeu"}},[r("b-form-checkbox",{attrs:{id:"input-milestone-bcgeu",value:1,"unchecked-value":0},model:{value:e.recipient.is_bcgeu_member,callback:function(t){e.$set(e.recipient,"is_bcgeu_member",t)},expression:"recipient.is_bcgeu_member"}},[e._v("Confirm BCGEU Membership")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-declarations-ceremony-opt-out","label-size":"md","label-for":"input-declarations-ceremony-opt-out"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.ariaDescribedby;return[r("b-form-checkbox",{attrs:{id:"input-declarations-ceremony-opt-out",value:1,"unchecked-value":0,"aria-describedby":n},model:{value:e.recipient.ceremony_opt_out,callback:function(t){e.$set(e.recipient,"ceremony_opt_out",t)},expression:"recipient.ceremony_opt_out"}},[e._v("Recipient would like award only and to opt out of attending the ceremony")])]}}])}),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-declarations-survey-participation","label-size":"md","label-for":"input-declarations-survey-participation"}},[r("b-form-checkbox",{attrs:{id:"input-declarations-survey-participation",value:1,"unchecked-value":0},model:{value:e.recipient.survey_participation,callback:function(t){e.$set(e.recipient,"survey_participation",t)},expression:"recipient.survey_participation"}},[e._v("Confirm recipient participation in LSA survey")])],1)],1)],1)},En=[],Pn={name:"input-confirmations",methods:{updateValidation:function(){this.$store.commit("setFormValidation",{confirmations:!!this.recipient.is_declared})}},computed:{recipient:function(){return this.$store.getters.getFormData}},mounted:function(){this.updateValidation()}},Ln=Pn,Dn=Object(h["a"])(Ln,zn,En,!1,null,null,null),Fn=Dn.exports,Mn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Administrator's Notes ")]},proxy:!0}])},[r("b-form-group",{attrs:{id:"fieldset-admin-notes"}},[r("b-form-textarea",{attrs:{id:"input-admin-notes"},model:{value:e.recipient.admin_notes,callback:function(t){e.$set(e.recipient,"admin_notes",t)},expression:"recipient.admin_notes"}})],1)],1)],1)},Nn=[],In={name:"input-admin-notes",computed:{recipient:function(){return this.$store.getters.getFormData}}},Tn=In,Hn=Object(h["a"])(Tn,Mn,Nn,!1,null,null,null),Un=Hn.exports,Vn={id:null,historical:!1,historical_milestone:"",historical_milestone_year:"",admin_notes:"",guid:null,idir:null,employee_number:null,first_name:null,last_name:null,government_email:null,government_phone_number:null,personal_phone_number:null,personal_email:null,organization_id:null,branch_name:null,milestones:"",qualifying_year:"",is_bcgeu_member:0,retiring_this_year:0,retirement_date:null,award:{id:null,options:null,status:"delegated"},is_declared:0,survey_participation:0,ceremony_opt_out:0,office_address:{id:null,prefix:"",street_address:"",postal_code:null,community:""},supervisor_first_name:"",supervisor_last_name:"",supervisor_email:"",supervisor_address:{id:null,pobox:"",prefix:"",street_address:"",postal_code:null,community:""},personal_address:{id:null,prefix:"",street_address:"",postal_code:null,community:""}},qn={identification:!1,office_address:!1,milestone:!1,award:!1,award_options:!1,supervisor_contact:!1,supervisor_address:!1,confirmations:!1},Bn={head:{title:"Register User"},props:["header","lead","mode"],components:{PageHeader:$e,InputIdentification:Yr,InputMilestone:Zr,InputAward:On,InputSupervisor:jn,InputPersonal:Tr,InputDeclarations:Fn,InputAdminNotes:Un},data:function(){return{processing:!1,error:""}},computed:{recipient:function(){return this.$store.getters.getFormData},isLoading:function(){return this.$store.getters.isLoading||!this.recipient},isValid:function(){return this.$store.getters.isValid},isHistoricalRecipient:function(){var e=this.$store.getters.getFormData||{},t=e.historical,r=void 0===t?null:t;return r}},methods:{submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Saving:",e.recipient),e.processing=!0,"create"!==e.mode){t.next=8;break}return t.next=5,M(e.recipient);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,N(e.$route.params.id,e.recipient);case 10:t.t0=t.sent;case 11:if(r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],s=a||{},o=s.id,l=void 0===o?"":o,!i&&l){t.next=21;break}console.error(i,a),e.$store.commit("setMessage",{text:"Recipient could not be saved. An error occurred.",type:"danger"}),t.next=28;break;case 21:if(e.$store.commit("setMessage",{text:"create"===e.mode?"Recipient successfully registered":"Recipient successfully updated",type:"success"}),"create"!==e.mode){t.next=27;break}return t.next=25,e.$router.push("/recipients/");case 25:t.next=28;break;case 27:case 28:e.processing=!1;case 29:case"end":return t.stop()}}),t)})))()},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.$store.dispatch("loadOptions");case 3:if("edit"!==e.mode){t.next=9;break}return t.next=6,F(e.$route.params.id||"");case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=[null,Vn];case 10:r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],i?(e.$store.commit("setMessage",i),e.error=i.text):(e.$store.commit("setFormData",a),e.$store.commit("setFormValidation",qn)),e.$store.commit("setLoading",!1);case 16:case"end":return t.stop()}}),t)})))()}},Yn=Bn,Xn=Object(h["a"])(Yn,Cr,$r,!1,null,null,null),Jn=Xn.exports,Wn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-card",{attrs:{id:"recipient-delete",title:"Recipient Profile"}},[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:["first_name","last_name","employee_number","personal_email"]}}),r("b-card-footer",{attrs:{align:"center"}},[r("b-button",{staticClass:"m-2",attrs:{disabled:e.processing,type:"button"},on:{click:function(t){return e.submit()}}},[e._v("Delete")]),r("b-button",{staticClass:"m-2",attrs:{type:"button",variant:"secondary"},on:{click:function(t){return e.reroute("/recipients")}}},[e._v("Cancel")])],1)],1)],1)},Gn=[],Kn={props:["header","lead","mode"],components:{PageHeader:$e},data:function(){return{recipient:null,processing:!1}},computed:{isLoading:function(){return this.$store.getters.isLoading||!this.recipient}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Deleting:",e.recipient),e.processing=!0,t.next=4,I(e.recipient.id);case 4:if(r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],console.log(i,a),s=a||{},o=s.id,l=void 0===o?"":o,!i&&l){t.next=14;break}e.$store.commit("setMessage",{text:"An error occurred. Your deletion could not be completed",type:"danger"}),t.next=17;break;case 14:return e.$store.commit("setMessage",{text:"Recipient ".concat(e.recipient.first_name||""," ").concat(e.recipient.last_name||""," successfully deleted"),type:"success"}),t.next=17,e.reroute("/recipients/");case 17:e.processing=!1;case 18:case"end":return t.stop()}}),t)})))()}},beforeCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,F(e.$route.params.id||"");case 3:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&e.$store.commit("setMessage",i),e.recipient=a,e.$store.commit("setLoading",!1);case 10:case"end":return t.stop()}}),t)})))()}},Qn=Kn,Zn=Object(h["a"])(Qn,Wn,Gn,!1,null,null,null),ei=Zn.exports,ti=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-container",{attrs:{fluid:""}},[e.isAdmin?e._e():r("b-alert",{attrs:{variant:"info",show:""}},[e._v("Sign in to view this page.")]),e.downloading?r("b-alert",{attrs:{variant:"info",show:""}},[r("b-spinner",{staticClass:"mr-1",attrs:{small:""}}),e._v("Downloading ... ")],1):e._e(),r("b-row",{attrs:{"align-h":"between"}},[r("b-col",{attrs:{cols:"6"}},[r("b-form-group",{attrs:{label:"Category","label-for":"table-select-filter-category","label-cols":"3"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-category",options:e.categories||[]},model:{value:e.selectCategory,callback:function(t){e.selectCategory=t},expression:"selectCategory"}})],1)],1),r("b-col",[r("b-button",{attrs:{size:"sm"},on:{click:e.clearFilters}},[e._v("Clear Filters")])],1)],1)],1),r("b-table",{attrs:{items:e.reports||[],fields:e.fields,striped:"",filter:e.criteria,"filter-function":e.applyFilter,"sort-by":e.sortBy,"sort-desc":e.sortDesc,responsive:"sm",busy:e.loading},on:{"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell(details)",fn:function(t){return e._l(t.item.format,(function(n,i){return r("b-button",{key:i,staticClass:"m-1",attrs:{size:"sm",disabled:e.downloading},on:{click:function(r){"data"===n?e.reroute("/reports/view/"+t.item.id):e.downloadFile(t.item.category,t.item.slug,n)}}},["data"!==n?r("BIconDownload",{staticClass:"mr-1"}):e._e(),e._v(e._s(n.toUpperCase())+" ")],1)}))}}])}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},ri=[],ni=[{id:"lsa-recipients-export",ref:"lsa-export-1",category:"recipients",slug:"summary",format:["csv"],label:"Recipients: Data Export",description:"Export recipient registration data",authorize:"admin"},{id:"lsa-awards-summary",ref:"lsa-report-2",category:"awards",slug:"summary",format:["data","csv","pdf"],label:"Awards: List and Totals",description:"List of available awards and their order totals",authorize:"admin",schema:{fields:[{key:"name",label:"Award"},{key:"25",label:"25"},{key:"30",label:"30"},{key:"35",label:"35"},{key:"40",label:"40"},{key:"45",label:"45"},{key:"50",label:"50"},{key:"extras",label:"Totals"}]}},{id:"lsa-pecsf-summary",ref:"lsa-report-3",category:"awards",slug:"pecsf",format:["data","csv","pdf"],label:"Awards: PECSF Donations",description:"List of donations to PECSF Fund",authorize:"admin",schema:{fields:[{key:"award_year",label:"Qualifying Year"},{key:"employee_number",label:"Employee ID"},{key:"first_name",label:"First Name"},{key:"last_name",label:"Last Name"},{key:"organization",label:"Ministry"},{key:"community",label:"Community"},{key:"milestone",label:"Milestone"},{key:"pecsf_pool",label:"PECSF Pool"},{key:"pecsf_region_1",label:"PECSF Region 1"},{key:"pecsf_charity_1",label:"PECSF Charity 1"},{key:"pecsf_charity_1_vendor",label:"PECSF Charity 1 Vendor Code"},{key:"pecsf_region_2",label:"PECSF Region 2"},{key:"pecsf_charity_2",label:"PECSF Charity 2"},{key:"pecsf_charity_2_vendor",label:"PECSF Charity 2 Vendor Code"}]}}],ii=["awards","recipients","ceremonies"],ai={reports:function(){return ni},get:function(e){var t=ni.filter((function(t){return t.id===e}));return t.length>0?t[0]:null},categories:function(){return ii}},si={name:"reports-list",props:["header","lead","mode"],components:{PageHeader:$e,BIconDownload:w["p"]},data:function(){return{loading:!1,error:!1,message:"",sortBy:"name",sortDesc:!0,selectCategory:"",fields:[{key:"label",label:"Name",sortable:!0},{key:"category",sortable:!0},{key:"description",sortable:!1},{key:"details",label:"",sortable:!1}],downloading:!1}},computed:{isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},reports:function(){return ai.reports()||[]},categories:function(){return ai.categories()},criteria:function(){return{category:this.selectCategory}}},methods:{clearFilters:function(){this.selectCategory=""},applyFilter:function(e){return!this.criteria.category||e.category===this.criteria.category},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},downloadFile:function(e,t,r){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var a,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n.downloading=!0,n.error=!1,i.next=4,B("reports/".concat(e,"/").concat(t,"/").concat(r),"lsa-report-".concat(e,"-").concat(t,".").concat(r));case 4:a=i.sent,s=Object(c["a"])(a,1),o=s[0],o&&(n.error=!0,n.$store.commit("setMessage",o)),n.downloading=!1;case 9:case"end":return i.stop()}}),i)})))()}}},oi=si,li=Object(h["a"])(oi,ti,ri,!1,null,null,null),ci=li.exports,ui=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.label||this.header,lead:this.description||this.lead}}),e.isLoading?e._e():r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col",[e._l(e.report.format.filter((function(e){return"data"!==e})),(function(t,n){return r("b-button",{key:n,staticClass:"m-1",attrs:{size:"sm",disabled:e.downloading},on:{click:function(r){return e.downloadReport(e.report.category,e.report.slug,t)}}},[r("BIconDownload",{staticClass:"mr-1"}),e._v(e._s(t.toUpperCase())+" ")],1)})),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"dark"},on:{click:function(t){return e.reroute("/reports")}}},[e._v(" Return to Reports ")]),e.downloading?r("b-spinner",{staticClass:"mr-1",attrs:{small:""}}):e._e()],2)],1)],1),r("b-table",{attrs:{items:e.items,fields:e.fields,striped:"",responsive:"sm",busy:e.loading},on:{"update:busy":function(t){e.loading=t}}}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},di=[],pi={name:"reports-list",props:["header","lead","mode"],components:{PageHeader:$e,BIconDownload:w["p"]},data:function(){return{label:"",report:null,description:"",loading:!1,error:!1,message:"",items:[],fields:[],downloading:!1}},computed:{isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},categories:function(){return ai.categories()}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},downloadReport:function(e,t,r){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var a,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n.downloading=!0,n.error=!1,i.next=4,B("reports/".concat(e,"/").concat(t,"/").concat(r),"lsa-report-".concat(e,"-").concat(t,".").concat(r));case 4:a=i.sent,s=Object(c["a"])(a,1),o=s[0],o&&(n.error=!0,n.$store.commit("setMessage",o)),n.downloading=!1;case 9:case"end":return i.stop()}}),i)})))()}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l,u,d,p,m,f,b,g,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),e.error=!1,e.report=ai.get(e.$route.params.id||""),r=e.report||{},n=r.slug,i=void 0===n?"":n,a=r.category,s=void 0===a?"":a,o=r.label,l=void 0===o?"":o,u=r.description,d=void 0===u?"":u,p=r.schema,m=void 0===p?{}:p,e.label="Report - ".concat(l),e.description=d,t.next=8,U("reports/".concat(s,"/").concat(i,"/data"));case 8:if(f=t.sent,b=Object(c["a"])(f,2),g=b[0],h=b[1],console.log(h),!g){t.next=18;break}return e.error=!0,e.$store.commit("setMessage",g),e.$store.commit("setLoading",!1),t.abrupt("return");case 18:e.items=h||[],e.fields=m.fields,e.$store.commit("setLoading",!1);case 21:case"end":return t.stop()}}),t)})))()}},mi=pi,fi=Object(h["a"])(mi,ui,di,!1,null,null,null),bi=fi.exports,gi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-form",[r("b-card",{staticClass:"mb-3",attrs:{header:e.isCreate?"Create Award":"Update Award","header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"}},[r("b-form-group",[r("b-form-group",{attrs:{id:"fieldset-award-name",label:"Award Name","label-for":"input-award-name"}},[r("b-form-input",{attrs:{id:"input-award-name",placeholder:"Full name of award",state:e.validate("name")},model:{value:e.award.name,callback:function(t){e.$set(e.award,"name",t)},expression:"award.name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("name")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-award-shortname",label:"Short Name","label-for":"input-award-name"}},[r("b-form-input",{attrs:{id:"input-award-shortname",placeholder:"Code or shortened name of award",state:e.validate("short_name")},model:{value:e.award.short_name,callback:function(t){e.$set(e.award,"short_name",t)},expression:"award.short_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("short_name")}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-award-milestone",label:"Select Milestone","label-for":"input-award-milestone"}},[r("b-form-select",{attrs:{id:"input-award-milestone",value:e.award.milestone,options:e.milestones,state:e.validate("milestone")}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("milestone")}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-award-image-url",label:"Enter Image URL","label-for":"input-award-milestone"}},[r("b-form-input",{attrs:{id:"input-award-image-url",type:"url",placeholder:"URL for award image"},model:{value:e.award.image_url,callback:function(t){e.$set(e.award,"image_url",t)},expression:"award.image_url"}})],1),r("b-form-group",{attrs:{id:"fieldset-award-description",label:"Description","label-for":"input-award-description",description:"Use '\\n' for line breaks."}},[r("b-form-textarea",{attrs:{id:"input-award-description"},model:{value:e.award.description,callback:function(t){e.$set(e.award,"description",t)},expression:"award.description"}})],1),r("b-form-group",{attrs:{id:"fieldset-award-options",label:"Options","label-for":"input-award-options","label-class":"font-weight-bold"}},[r("b-form-checkbox-group",{attrs:{id:"input-award-options",name:"award-options",stacked:""},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}},e._l(e.optionTypes,(function(t,n){return r("b-form-checkbox",{key:t.value,attrs:{value:t.value,id:"input-group-award-options-"+n}},[r("b-badge",{staticClass:"mr-2"},[e._v(e._s(t.type))]),r("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.text))]),e.selectedOptions.includes(t.value)&&"select"===t.type?r("b-form-group",{attrs:{id:"input-group-award-options-values-"+n,label:"Options:","label-for":"input-award-options-value-"+n,"label-cols":"3"}},e._l(e.options[t.value],(function(t,n){return r("b-input-group",{key:t.value,staticClass:"mb-2",attrs:{prepend:"Enter Value/Label"}},[r("b-form-input",{attrs:{id:"input-award-options-value-"+n},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"optSelection.value"}}),r("b-form-input",{attrs:{id:"input-award-options-text-"+n},model:{value:t.text,callback:function(r){e.$set(t,"text",r)},expression:"optSelection.text"}})],1)})),1):e._e()],1)})),1)],1),r("b-button",{staticClass:"mt-2",attrs:{variant:"info",disabled:!e.validate("all")||e.processing},on:{click:function(t){return e.submit()}}},[e._v(" "+e._s(e.isCreate?"Create":"Update")+" "),e.processing?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e()],1),r("b-button",{staticClass:"mt-2 ml-2",attrs:{variant:"secondary",disabled:e.processing},on:{click:function(t){return e.reroute("/awards")}}},[e._v(" Return to Awards ")])],1)],1)],1)],1)},hi=[],vi={head:{title:"Register User"},props:["header","lead","mode"],components:{PageHeader:$e},data:function(){return{processing:!1,award:"",options:[],selectedOptions:[],optionTypes:f.get("award-option-types"),milestones:f.get("milestones")}},computed:{isLoading:function(){return this.$store.getters.isLoading||0===this.$store.getters.getOrganizations.length},isOrgContact:function(){return"orgContact"===this.user.role},isCreate:function(){return"create"===this.mode},validate:function(){var e=this;return function(t){var r={milestone:function(){return!!parseInt(e.award.milestone)},name:function(){return!!e.award.name},short_name:function(){return!!e.award.short_name}};return"all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]&&!!r[t]()}}},methods:{submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.processing=!0,e.award.options=JSON.stringify(e.options),console.log(e.award),e.processing=!1;case 4:case"end":return t.stop()}}),t)})))()},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},lookup:function(e,t){return f.lookup(e,t)}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("setLoading",!0),!e.isCreate){t.next=5;break}t.t0=[null,{}],t.next=8;break;case 5:return t.next=7,U("awards/show/".concat(e.$route.params.id));case 7:t.t0=t.sent;case 8:r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&e.$store.commit("setMessage",i),e.award={id:a.id||"",name:a.name||"",short_name:a.short_name||"",milestone:a.milestone||"",description:a.description||"",image_url:a.image_url||""},e.selectedOptions=Object.keys(JSON.parse(a.options||"{}")),e.options=JSON.parse(a.options||"{}"),e.$store.commit("setLoading",!1);case 17:case"end":return t.stop()}}),t)})))()}},_i=vi,wi=Object(h["a"])(_i,gi,hi,!1,null,null,null),yi=wi.exports,ki=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-form",[r("b-card",{staticClass:"mb-3",attrs:{header:e.isCreate?"Create Ceremony":"Update Ceremony","header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"}},[r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-ceremony-scheduled-date",label:"Scheduled Date","label-size":"md","label-class":"font-weight-bold","label-for":"input-ceremony-scheduled-date"}},[r("b-form-datepicker",{attrs:{id:"input-ceremony-scheduled-date",min:e.minDate,max:e.maxDate,locale:"en",state:!!e.date},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),r("b-form-invalid-feedback",{attrs:{state:!!e.date}},[e._v(" This field is required. ")]),r("b-form-group",{staticClass:"mt-2 mb-4",attrs:{id:"fieldset-ceremony-scheduled-time",label:"Scheduled Time","label-size":"md","label-class":"font-weight-bold","label-for":"input-ceremony-scheduled-time"}},[r("b-form-timepicker",{attrs:{id:"input-ceremony-scheduled-time",min:e.minDate,max:e.maxDate,locale:"en",state:!!e.time&&!!e.date},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),r("b-form-invalid-feedback",{attrs:{state:!!e.time&&!!e.date}},[e._v(" This field is required. ")])],1),r("b-button",{staticClass:"mt-2",attrs:{variant:"info",disabled:!e.validate()||e.processing},on:{click:function(t){return e.submit()}}},[e._v(" "+e._s(e.isCreate?"Create":"Update")+" "),e.processing?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e()],1),r("b-button",{staticClass:"mt-2 ml-2",attrs:{variant:"secondary",disabled:e.processing},on:{click:function(t){return e.reroute("/ceremonies")}}},[e._v(" Return to Ceremonies ")])],1)],1)],1)],1)},xi=[],Oi={head:{title:"Register User"},props:["header","lead","mode"],components:{PageHeader:$e},data:function(){return{processing:!1,id:"",date:"",time:""}},computed:{isLoading:function(){return this.$store.getters.isLoading||0===this.$store.getters.getOrganizations.length},isOrgContact:function(){return"orgContact"===this.user.role},isCreate:function(){return"create"===this.mode},minDate:function(){var e=-1,t=new Date;return new Date(t.setFullYear(t.getFullYear()+e))},maxDate:function(){var e=1,t=new Date;return new Date(t.setFullYear(t.getFullYear()+e))}},methods:{validate:function(){return!!this.date&&!!this.time},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.processing=!0,r="".concat(e.date," ").concat(e.time),console.log(e.date,r),!e.isCreate){t.next=9;break}return t.next=6,q("ceremonies/create",{scheduled_datetime:r});case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,V("ceremonies/update/".concat(e.$route.params.id),{id:e.id,scheduled_datetime:r});case 11:t.t0=t.sent;case 12:if(n=t.t0,i=Object(c["a"])(n,1),a=i[0],!a){t.next=19;break}e.$store.commit("setMessage",{text:"Ceremony could not be saved. An error occurred.",type:"danger"}),t.next=26;break;case 19:if(e.$store.commit("setMessage",{text:e.isCreate?"Ceremony successfully created":"Ceremony successfully updated",type:"success"}),!e.isCreate){t.next=25;break}return t.next=23,e.$router.push("/ceremonies/");case 23:t.next=26;break;case 25:case 26:e.processing=!1;case 27:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("setLoading",!0),!e.isCreate){t.next=5;break}t.t0=[null,{}],t.next=8;break;case 5:return t.next=7,U("ceremonies/show/".concat(e.$route.params.id)||!1);case 7:t.t0=t.sent;case 8:r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&e.$store.commit("setMessage",i),s="edit"===e.mode?new Date(a.scheduled_datetime):new Date,e.id=a.id||"",e.date=s?s.toISOString().split("T")[0]:"",e.time=s&&s.toLocaleTimeString("en-US",{hour12:!1})||"",e.$store.commit("setLoading",!1);case 18:case"end":return t.stop()}}),t)})))()}},Ri=Oi,Ci=Object(h["a"])(Ri,ki,xi,!1,null,null,null),$i=Ci.exports,Ai=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-container",[e.isAdmin?e._e():r("b-alert",{attrs:{variant:"info",show:""}},[e._v("Sign in to view this page.")]),r("b-row",{attrs:{"align-h":"between"}},[r("b-col",{attrs:{cols:"6"}},[r("b-form-group",{attrs:{label:"Category","label-for":"table-select-filter-category","label-cols":"3"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-category",options:e.categories||[]},model:{value:e.selectCategory,callback:function(t){e.selectCategory=t},expression:"selectCategory"}})],1)],1),r("b-col",[r("b-button",{attrs:{size:"sm"},on:{click:e.clearFilters}},[e._v("Clear Filters")])],1)],1)],1),r("b-table",{attrs:{items:e.attendees||[],fields:e.fields,striped:"",filter:e.criteria,"filter-function":e.applyFilter,"sort-by":e.sortBy,"sort-desc":e.sortDesc,responsive:"sm",busy:e.loading},on:{"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell(status)",fn:function(t){return[e._l(t.item.attendee,(function(t,n){return r("b-badge",{key:n,staticClass:"m-1",attrs:{variant:e.getStatus(t.status)}},[e._v(" "+e._s(e.lookup("assignments",t.status))+": "+e._s(new Date(t.ceremonies.scheduled_datetime).toLocaleString())+" ")])})),t.item.ceremony_opt_out?r("b-badge",{staticClass:"m-1",attrs:{variant:"danger"}},[e._v("Opt-Out")]):e._e()]}},{key:"cell(details)",fn:function(t){return["csv"!==t.item.format?r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/reports/view/"+t.item.id)}}},[e._v(" View ")]):e._e()]}}])}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},Si=[],ji={name:"reports-list",props:["header","lead","mode"],components:{PageHeader:$e},data:function(){return{loading:!1,error:!1,message:"",sortBy:"name",sortDesc:!0,selectCategory:"",fields:[{key:"status",label:"Status",sortable:!0},{key:"first_name",label:"First Name",sortable:!0},{key:"last_name",label:"Last Name",sortable:!0},{key:"details",label:"",sortable:!1}],attendees:[]}},computed:{isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},reports:function(){return ai.reports()||[]},categories:function(){return ai.categories()},criteria:function(){return{category:this.selectCategory}}},methods:{clearFilters:function(){this.selectCategory=""},applyFilter:function(e){return!this.criteria.category||e.category===this.criteria.category},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},loadData:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,i,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.processing=!0,t.error=!1,r.next=4,U("attendees/list/".concat(e));case 4:n=r.sent,i=Object(c["a"])(n,2),a=i[0],s=i[1],a&&(t.error=!0,t.$store.commit("setMessage",a)),t.attendees=s,console.log(t.attendees),t.processing=!1;case 12:case"end":return r.stop()}}),r)})))()},getStatus:function(e){var t={assigned:"info",waitlisted:"warning",invited:"dark",attending:"success",declined:"danger"};return t[e]||"secondary"}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.loadData(e.$route.params.id||"");case 3:e.$store.commit("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()}},zi=ji,Ei=Object(h["a"])(zi,Ai,Si,!1,null,null,null),Pi=Ei.exports,Li=(r("7db0"),r("fb6a"),r("a630"),{"recipients-view":"view recipients","recipients-create":"add recipients","recipients-edit":"edit recipients","recipients-delete":"destroy recipients"}),Di=function(e,t,r){var n=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.title})),i=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.metaTags})),a=t.matched.slice().reverse().find((function(e){return e.meta&&e.meta.metaTags}));if(n?document.title=n.meta.title:a&&(document.title=a.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((function(e){return e.parentNode.removeChild(e)})),!i)return r();i.meta.metaTags.map((function(e){var t=document.createElement("meta");return Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])})),t.setAttribute("data-vue-router-controlled",""),t})).forEach((function(e){return document.head.appendChild(e)})),r()},Fi=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r,n){var i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:return i=e.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],e.abrupt("return",s||!["orgContact","admin","super-admin"].includes(o.role)?n({name:"unauthorized"}):n());case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Mi=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r,n){var i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:return i=e.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],e.abrupt("return",s||!["admin","super-admin"].includes(o.role)?n({name:"unauthorized"}):n());case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Ni=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r,n){var i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:return i=e.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],e.abrupt("return",s||!["admin","super-admin"].includes(o.role)?n({name:"unauthorized"}):n());case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Ii=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r,n){var i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:return i=e.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],l=Li[t.name]||null,e.abrupt("return",s||!o.permissions.includes(l)?n({name:"unauthorized"}):n());case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();
/*!
 * Routes (Vue)
 * File: routes.js
 * Copyright(c) 2022 BC Gov
 * MIT Licensed
 */
function Ti(e){var t="Long Service Awards Administration\n";return{title:"".concat(e," - ").concat(t),metaTags:[{name:"icon",content:"favicon.ico"}]}}var Hi=[{path:"/login",name:"users-login",component:Me,meta:Ti("Sign In")},{path:"/",name:"dashboard",component:Je,meta:Ti("Admin Dashboard"),beforeEnter:Fi},{path:"/users/register",name:"users-register",component:Vt,meta:Ti("Register Admin User"),props:{header:"Register Admin User",lead:"Create New Admin User",mode:"create"},beforeEnter:Mi},{path:"/users/edit/:id",name:"users-edit",component:Vt,meta:Ti("Edit User Profile"),props:{header:"Edit User Info",lead:"Edit Admin User Profile",mode:"edit"},beforeEnter:Mi},{path:"/users/view/:id",name:"users-view",component:Wt,meta:Ti("View User Info"),props:{header:"View User Info",lead:"View admin user record",mode:"list"},beforeEnter:Mi},{path:"/users",name:"users-list",component:Ft,meta:Ti("Manage Users"),props:{header:"Manage Users",lead:"Manage LSA admin users",mode:"list"},beforeEnter:Mi},{path:"/recipients",name:"recipients-list",component:_r,meta:Ti("Manage Recipients"),props:{header:"Manage Recipients",lead:"Manage LSA recipient records",mode:"list"},beforeEnter:Fi},{path:"/recipients/view/:id",name:"recipients-view",component:Rr,meta:Ti("View Recipient"),props:{header:"View Recipient",lead:"View LSA recipient record",mode:"view"},beforeEnter:Ii},{path:"/recipients/create",name:"recipients-create",component:Jn,meta:Ti("Add Recipient"),props:{header:"Add Recipient",lead:"Add new LSA recipient record",mode:"create"},beforeEnter:Ii},{path:"/recipients/edit/:id",name:"recipients-edit",component:Jn,meta:Ti("Edit Recipient"),props:{header:"Edit Recipient",lead:"Edit LSA recipient record",mode:"edit"},beforeEnter:Ii},{path:"/recipients/delete/:id",name:"recipients-delete",component:ei,meta:Ti("Delete Recipient"),props:{header:"Delete Recipient",lead:"Delete LSA recipient record",mode:"delete"},beforeEnter:Ii},{path:"/reports",name:"reports-list",component:ci,meta:Ti("Reports"),props:{header:"Reports",lead:"Manage and generate LSA reports",mode:"list"},beforeEnter:Mi},{path:"/reports/view/:id",name:"reports-view",component:bi,meta:Ti("Report"),props:{header:"Report",lead:"View report data",mode:"list"},beforeEnter:Mi},{path:"/awards",name:"awards-list",component:vt,meta:Ti("Manage Awards"),props:{header:"Manage Awards",lead:"List of LSA awards",mode:"list",model:"awards",single:"Award"},beforeEnter:Mi},{path:"/awards/edit/:id",name:"awards-edit",component:yi,meta:Ti("Edit Award"),props:{header:"Update Award",lead:"Update LSA award details",mode:"edit"},beforeEnter:Mi},{path:"/awards/create",name:"awards-add",component:yi,meta:Ti("Add Award"),props:{header:"Add Award",lead:"Add new LSA award record",mode:"create"},beforeEnter:Mi},{path:"/ceremonies",name:"ceremonies-list",component:vt,meta:Ti("Manage Ceremonies"),props:{header:"Manage Ceremonies",lead:"List of upcoming LSA ceremonies",mode:"list",model:"ceremonies",single:"Ceremony"},beforeEnter:Mi},{path:"/ceremonies/create",name:"ceremonies-add",component:$i,meta:Ti("Add Ceremony"),props:{header:"Add Ceremony",lead:"Add new LSA ceremony record",mode:"create"},beforeEnter:Mi},{path:"/ceremonies/edit/:id",name:"ceremonies-edit",component:$i,meta:Ti("Edit Ceremony"),props:{header:"Edit Ceremony",lead:"Edit LSA ceremony record",mode:"edit"},beforeEnter:Mi},{path:"/attendees/list/:id",name:"attendees-list",component:Pi,meta:Ti("View Attendees"),props:{header:"Ceremony Attendees",lead:"View LSA ceremony attendees",mode:"list"},beforeEnter:Mi},{path:"/permissions",name:"permissions-list",component:tr,meta:Ti("Manage Permissions"),props:{header:"Manage User Permissions",lead:"User permissions settings",mode:"list",model:"permissions",single:"Permission"},beforeEnter:Ni},{path:"/401",name:"unauthorized",component:Ot,meta:Ti("Unauthorized")},{path:"*",name:"page-not-found",component:et,meta:Ti("Page Not Found")}],Ui=Hi,Vi={organizations:[],pecsf:{charities:[],regions:[]},ceremonies:[]},qi=null,Bi=[],Yi={},Xi={text:"",type:"",spinner:!1},Ji={message:Xi,error:!1,loading:!1,user:qi,options:Vi,awards:Bi,metadata:{},form:null,selected:[],pagination:{},validation:Yi},Wi={getUser:function(e){return e.user},isAuthenticated:function(e){return!!e.user&&!!e.user.role&&!!e.user.email},isOrgContact:function(e){return"orgContact"===e.user.role||"admin"===e.user.role||"super-admin"===e.user.role},isAdmin:function(e){return"admin"===e.user.role||"super-admin"===e.user.role},isSuperAdmin:function(e){return"super-admin"===e.user.role},getMessage:function(e){return e.message||Xi},isLoading:function(e){return e.loading},getError:function(e){return e.error},getFormData:function(e){return e.form},getSelected:function(e){return e.selected},getPagination:function(e){return e.pagination},isValid:function(e){return 0===Object.keys(e.validation).filter((function(t){return!e.validation[t]})).length},getOrganizations:function(e){return f.getOrganizations(e.options.organizations)},getAwards:function(e){return e.awards},getPecsfOptions:function(e){return f.getPecsfOptions(e.options.pecsf)},getCommunities:function(e){return f.getCommunities(e.options.communities)},getCeremonies:function(e){return f.getCeremonies(e.options.ceremonies)},getCeremoniesOptOut:function(e){return f.getCeremonies(e.options.ceremonies,!0)}},Gi={loadOptions:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,H();case 3:n=t.sent,r("setOptions",n);case 5:case"end":return t.stop()}}),t)})))()},handleError:function(e,t){var r=e.commit;r("setMessage",t),r("setError",t)},setMessage:function(e,t){var r=e.commit,n=t||{},i=n.text,a=void 0===i?"":i,s=n.type,o=void 0===s?"":s,l=n.spinner,c=void 0!==l&&l,u=n.dismissible,d=void 0!==u&&u;r("setMessage",{text:a,type:o,spinner:c,dismissible:d})},resetMessage:function(e){var t=e.commit;t("resetMessage")},resetRegistration:function(e){var t=e.commit;t("resetRegistration")},loadAwards:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,i,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setError",!1),n("setMessage",{text:"Loading Awards for milestone year ".concat(t,"..."),type:"info",spinner:!0}),r.next=5,T(t);case 5:i=r.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],s||!o?(n("setMessage",{text:"Awards could not be found for this milestone.",type:"danger"}),n("setError",!0)):(n("resetAwards"),n("setAwards",o||[]),n("resetMessage"));case 10:case"end":return r.stop()}}),r)})))()},isHistoricalRecipient:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,i,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setMessage",{text:"Looking up Employee Number...",type:"info"}),r.next=4,P(t);case 4:i=r.sent,a=Object(c["a"])(i,2),s=a[1],n("setFormData",{historical:s}),n("resetMessage");case 9:case"end":return r.stop()}}),r)})))()}},Ki={setMessage:function(e,t){e.message=t},resetMessage:function(e){e.message=Xi},setError:function(e,t){e.error=t},setMetadata:function(e,t){e.metadata=Object.assign({},e.metadata,t)},resetAwards:function(e){e.awards=[]},setAwards:function(e,t){e.awards=Object.assign([],e.awards,t)},setLoading:function(e,t){e.loading=t},setUser:function(e,t){e.user=t?{role:t.role||"",permissions:t.permissions||[],idir:t.idir||"",name:t.name||"",email:t.email||"",organizations:t.organizations||[]}:null},setOptions:function(e,t){e.options=t},setPecsfOptions:function(e,t){e.options.pecsf=t},setFormData:function(e,t){e.form=Object.assign({},e.form,t)},setSelected:function(e,t){e.selected=t},setFormValidation:function(e,t){e.validation=Object.assign({},e.validation,t)},setPagination:function(e,t){e.pagination=Object.assign({},e.pagination,t)}},Qi={state:Ji,getters:Wi,actions:Gi,mutations:Ki},Zi=r("5f5b");r("f9e3"),r("2dd8");n["default"].use(Zi["a"]),n["default"].use(Ue["a"]),n["default"].use(i["a"]),n["default"].config.productionTip=!1;var ea=new Ue["a"]({base:"/admin",mode:"history",routes:Ui}),ta=new i["a"].Store(Qi);ea.beforeEach(Di),new n["default"]({store:ta,el:"#app",router:ea,render:function(e){return e(He)}})},"85ec":function(e,t,r){},afbc:function(e,t,r){},e3cd:function(e,t,r){e.exports=r.p+"img/wiw-white-text.2ab74465.svg"},f87e:function(e,t,r){"use strict";r("afbc")}});
//# sourceMappingURL=app.16689802.js.map