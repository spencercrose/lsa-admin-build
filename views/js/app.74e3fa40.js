(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},i={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/admin/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"2ef6":function(e,t,r){},"53ca":function(e,t,r){"use strict";r("2ef6")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),i=r("2f62"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("header",[r("NavBar"),r("Message")],1),r("main",[e.isLoading?r("b-alert",{staticClass:"m-5",attrs:{show:"",variant:"info"}},[r("b-spinner",{staticClass:"mr-3",attrs:{small:""}}),e._v("Loading... ")],1):e._e(),e.isAuthenticated?r("div",{staticClass:"container mt-3"},[r("router-view")],1):e._e(),e.isAuthenticated||e.isLoading?e._e():r("Login")],1),r("footer",[r("Footer")],1)])},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"z-index":"9990"}},[e.isAuthenticated?r("b-sidebar",{staticStyle:{"z-index":"9999"},attrs:{id:"sidebar-profile",title:"User Profile","backdrop-variant":"dark",backdrop:"",shadow:""}},[r("Profile")],1):e._e(),r("b-navbar",{attrs:{fixed:"top",toggleable:"lg",type:"dark",variant:"dark"}},[r("b-navbar-brand",{attrs:{href:"/admin"}},[r("span",[e._v("Long Service Awards "),r("b-badge",{attrs:{variant:"info"}},[e._v("Admin")])],1)]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":"",type:"dark",variant:"info"}},[r("b-navbar-nav",[r("li",[r("router-link",{staticClass:"nav-link",attrs:{to:"/",exact:""}},[e._v("Home")])],1),r("b-nav-item",{attrs:{href:"https://longserviceawards.gww.gov.bc.ca/"}},[e._v("About")])],1),e.isAuthenticated?r("b-navbar-nav",{staticClass:"ml-auto"},[e.user?r("b-nav-item-dropdown",{staticClass:"btn btn-info text-light p-0",attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[r("BIconPerson"),e._v(" "+e._s(e.user.idir||e.user.email.split("@")[0])+" ")]},proxy:!0}],null,!1,2924744286)},[r("b-dropdown-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-profile",modifiers:{"sidebar-profile":!0}}]},[e._v(" Profile ")]),e.isOrgContact?r("b-dropdown-item",[r("router-link",{attrs:{to:"/recipients/create"}},[e._v("Register Recipient")])],1):e._e(),e.isOrgContact?r("b-dropdown-item",[r("router-link",{attrs:{to:"/recipients/"}},[e._v("Manage Recipients")])],1):e._e(),e.isAdmin?r("b-dropdown-item",{attrs:{disabled:!0}},[r("router-link",{attrs:{to:"/awards/"}},[e._v("Manage Awards")])],1):e._e(),e.isAdmin?r("b-dropdown-item",{attrs:{disabled:!0}},[r("router-link",{attrs:{to:"/ceremony/",exact:""}},[e._v("Manage Ceremonies")])],1):e._e(),e.isAdmin?r("b-dropdown-item",[r("router-link",{attrs:{to:"/users/register"}},[e._v("Add User")])],1):e._e(),e.isSuperAdmin?r("b-dropdown-item",[r("router-link",{attrs:{to:"/users/"}},[e._v("Manage Users")])],1):e._e(),r("b-dropdown-item",[r("b-button",{attrs:{block:"",type:"button"},on:{click:function(t){return e.logout()}}},[e._v("Sign Out")])],1)],1):e._e()],1):e._e(),e.isAuthenticated||e.isLoading?e._e():r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-button",{attrs:{variant:"info",type:"button"},on:{click:function(t){return e.reroute("/login")}}},[e._v("Sign In")])],1)],1)],1)],1)},l=[],c=r("3835"),u=r("1da1"),d=(r("b0c0"),r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-table",{attrs:{stacked:"",items:[e.user],fields:["name",{key:"idir",label:"IDIR"},"role","email","organizations"]},scopedSlots:e._u([{key:"cell(role)",fn:function(t){return[e._v(" "+e._s(e.lookup("roles",t.item.role))+" ")]}},{key:"cell(organizations)",fn:function(t){return e._l(t.item.organizations,(function(t){return r("div",{key:t},[e._v(" "+e._s(e.lookupOrganization(t))+" ")])}))}}])})],1)}),p=[],m=(r("4de4"),r("d3b7"),r("d81d"),r("b64b"),r("4e82"),r("99af"),r("ac1f"),r("5319"),r("466d"),{status:[{value:null,text:"Please select a registration status"},{value:"draft",text:"Draft"},{value:"submitted",text:"Submitted"}],roles:[{value:null,text:"Please select a user role"},{value:"super-admin",text:"Super-Administrator"},{value:"admin",text:"Administrator"},{value:"orgContact",text:"Organization Contact"}],isRetiring:[{value:null,text:"Please select a retirement status"},{value:1,text:"Retiring This Year"},{value:0,text:"Not Retiring This Year"}],milestones:[{value:"",text:"Please select a milestone year"},{value:"25",text:"25 Years"},{value:"30",text:"30 Years"},{value:"35",text:"35 Years"},{value:"40",text:"40 Years"},{value:"45",text:"45 Years"},{value:"50",text:"50 Years"}],"qualifying-years":[{value:"2022",text:"2022"},{value:"2021",text:"2021"},{value:"2020",text:"2020"},{value:"2019",text:"2019"}],"award-types":[{value:"pecsf",text:"PECSF"},{value:"watch",text:"Watch"},{value:"bracelet",text:"Bracelet"}],"award-option-types":[{value:"sizes",text:"Size"},{value:"faces",text:"Watch Face"},{value:"straps",text:"Watch Strap"},{value:"engraving",text:"Engraving"},{value:"certificate",text:"Name for the 25 Year Certificate"},{value:"pecsfPool",text:"Donate to PECSF Regional Pool Fund"},{value:"pecsfRegion1",text:"PECSF Region 1"},{value:"pecsfCharity1",text:"PECSF Charity (Region 1)"},{value:"pecsfRegion2",text:"PECSF Region 2"},{value:"pecsfCharity2",text:"PECSF Charity (Region 2)"},{value:"honour",text:"In Honour of"}]}),f={get:function(e){return"undefined"!==m[e]?m[e]:null},lookup:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;if(!r[e])return null;var n=r[e].filter((function(e){return e.value===t}));return n.length>0?n[0].text:null},getAwardOptions:function(e,t){var r=this,n=(t||[]).filter((function(t){var r=t||{},n=r.id,i=void 0===n?null:n;return String(i)===String(e)}));if(n.length>0){var i=n[0]||{},a=i.options,s=void 0===a?null:a;return s?Object.keys(s||{}).map((function(e){return{key:e,label:r.lookup("award-option-types",e),options:Array.isArray(s[e])?s[e]:null,selected:null,disabled:!1}})):null}return null},getAwardDetails:function(e,t){var r=t.filter((function(t){return t.id===e}));return r.length>0?r[0]:null},getOrganizations:function(e){function t(e,t){return e.shortName<t.shortName?-1:e.shortName>t.shortName?1:0}var r=(e||[]).sort(t).map((function(e){return{text:"".concat(e.shortName," - ").concat(e.name),value:e.id}}))||[];return r.unshift({value:null,text:"Please select a Ministry"}),r},getCommunities:function(e){function t(e,t){return e.name<t.name?-1:e.name>t.name?1:0}var r=(e||[]).sort(t).map((function(e){return{text:"".concat(e.name),value:e.id}}))||[];return r.unshift({value:null,text:"Please select a Community"}),r},getPecsfOptions:function(e){var t=e||{},r=t.regions,n=void 0===r?[]:r,i=t.charities,a=void 0===i?[]:i;function s(e,t){return e.name<t.name?-1:e.name>t.name?1:0}var o=n.sort(s).map((function(e){return{text:e.name,value:e.id}}))||[];o.unshift({value:null,text:"Please select a PECSF region"});var l=a.sort(s).map((function(e){return{region:e.pecsf_region_id,text:e.name,value:e.id}}))||[];return l.unshift({value:null,text:"Please select a PECSF charity"}),{regions:o,charities:l}},formatPhoneNumber:function(e){var t=(""+e).replace(/\D/g,""),r=t.match(/^(\d{3})(\d{3})(\d{4})$/);return r?"("+r[1]+") "+r[2]+"-"+r[3]:null},getEngravingCharLimit:function(e){return"38mm"===e?18:15}},b={name:"user-profile",components:{},methods:{lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){var t=f.lookup("organizations",parseInt(e),{organizations:this.$store.getters.getOrganizations||[]});return t?t.substring(t.indexOf("[")+1,t.lastIndexOf("]")):""}},computed:{user:function(){return this.$store.getters.getUser}}},g=b,h=r("2877"),v=Object(h["a"])(g,d,p,!1,null,null,null),_=v.exports,w=r("7386"),y=(r("d9e2"),r("bc3a")),k=r.n(y),x=r("b85c"),R=(r("e9c4"),r("a4d3"),r("e01a"),{invalidToken:{text:"User token could not be verified.",type:"danger"},invalidData:{text:"Your form data is invalid or incomplete.",type:"danger"},serverError:{text:"Server Error: Your request could not be completed.",type:"danger"},notAuthorized:{text:"You are not authorized to access this screen.",type:"danger"},loginError:{text:"Login Error: Your user credentials are not valid.",type:"danger"}}),O={get:function(e){return"undefined"!==R[e]?R[e]:null}};
/*!
 * API services (Vue)
 * File: api.services.js
 * Copyright(c) 2022 BC Gov
 * MIT Licensed
 */
k.a.defaults.xsrfCookieName="csrftoken",k.a.defaults.xsrfHeaderName="X-CSRFToken";var C=k.a.create({baseURL:"https://lsaapp.gww.gov.bc.ca/api",xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":"XSRF-TOKEN"},withCredentials:!0}),$=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError].filter((function(e){return"function"===typeof e}));function S(e){var t,r=Object(x["a"])($);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e instanceof n)throw e}}catch(i){r.e(i)}finally{r.f()}}function A(e,t){return e.then((function(e){return e instanceof Error?(S(e),[e]):[void 0,e]})).catch((function(e){return S(e),[e]})).finally((function(){t&&"function"===typeof t&&t()}))}var z=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],i){e.next=22;break}return e.next=8,A(C.get("/recipients/archived/".concat(t)));case 8:if(a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],u=l||{},d=u.data,p=void 0===d?[]:d,!o||!o.response){e.next=19;break}if(403!==o.response.status){e.next=18;break}return e.abrupt("return",[O.get("notAuthorized"),null]);case 18:return e.abrupt("return",[O.get("serverError"),null]);case 19:return e.abrupt("return",[o,Object.keys(p).length>0]);case 22:return e.abrupt("return",[O.get("invalidToken"),null]);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,o,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(t=e.sent,r=Object(c["a"])(t,1),n=r[0],n){e.next=22;break}return e.next=8,A(C.get("recipients/list"));case 8:if(i=e.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],l=o||{},u=l.data,d=void 0===u?[]:u,!s||!s.response){e.next=19;break}if(403!==s.response.status){e.next=18;break}return e.abrupt("return",[O.get("notAuthorized"),null]);case 18:return e.abrupt("return",[O.get("serverError"),null]);case 19:return e.abrupt("return",[s,d]);case 22:return e.abrupt("return",[O.get("invalidToken"),null]);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p,m,f,b,g,h,v,_,w,y,k,x,R,$,S,z,j,E,P,L,D,F,M,N,q,I,V;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],i){e.next=31;break}return e.next=8,A(C.get("recipients/view/".concat(t)));case 8:if(a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],u=l||{},d=u.data,p=void 0===d?null:d,m=p||{},f=m.awards,b=void 0===f?[]:f,g=m.milestones,h=void 0===g?"":g,v=m.supervisor_address,_=void 0===v?null:v,w=m.office_address,y=void 0===w?null:w,k=m.personal_address,x=void 0===k?null:k,R=b.filter((function(e){return String(e.milestone)===String(h)})),$={award_id:null,award_name:null,options:{}},R.length>0&&(S=R[0]||{},z=S.pivot,j=void 0===z?{}:z,E=j||{},P=E.award_id,L=void 0===P?null:P,D=E.options,F=void 0===D?"{}":D,M=E.name,N=void 0===M?null:M,q=E.status,I=void 0===q?"":q,$={id:L,name:N,options:JSON.parse(F),status:I}),V=Object.assign({},p,{award:$}),y||(V=Object.assign({},V,{office_address:{id:null,prefix:"",street_address:"",postal_code:null,community:""}})),x||(V=Object.assign({},V,{personal_address:{id:null,prefix:"",street_address:"",postal_code:null,community:""}})),_||(V=Object.assign({},V,{supervisor_address:{id:null,pobox:"",prefix:"",street_address:"",postal_code:null,community:""}})),console.log("Filtered Recipient data",V),!o||!o.response){e.next=28;break}if(403!==o.response.status){e.next=27;break}return e.abrupt("return",[O.get("notAuthorized"),null]);case 27:return e.abrupt("return",[O.get("serverError"),null]);case 28:return e.abrupt("return",[o,V]);case 31:return e.abrupt("return",[O.get("invalidToken"),null]);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p,m,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],i){e.next=24;break}return a={id:t.award.id||null,options:JSON.stringify(t.award.options)||JSON.stringify({}),status:"delegated"},s=Object.assign({},t,{award:a}),e.next=10,A(C.post("recipients/create",s));case 10:if(o=e.sent,l=Object(c["a"])(o,2),u=l[0],d=l[1],p=d||{},m=p.data,f=void 0===m?null:m,!u||!u.response){e.next=21;break}if(403!==u.response.status){e.next=20;break}return e.abrupt("return",[O.get("notAuthorized"),null]);case 20:return e.abrupt("return",[O.get("serverError"),null]);case 21:return e.abrupt("return",[u,f]);case 24:return e.abrupt("return",[O.get("invalidToken"),null]);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,i,a,s,o,l,u,d,p,m,f,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(n=e.sent,i=Object(c["a"])(n,1),a=i[0],a){e.next=24;break}return s={id:r.award.id||null,options:JSON.stringify(r.award.options)||JSON.stringify({}),status:"delegated"},o=Object.assign({},r,{award:s}),e.next=10,A(C.put("recipients/update/".concat(t),o));case 10:if(l=e.sent,u=Object(c["a"])(l,2),d=u[0],p=u[1],m=p||{},f=m.data,b=void 0===f?null:f,!d||!d.response){e.next=21;break}if(403!==d.response.status){e.next=20;break}return e.abrupt("return",[O.get("notAuthorized"),null]);case 20:return e.abrupt("return",[O.get("serverError"),null]);case 21:return e.abrupt("return",[d,b]);case 24:return e.abrupt("return",[O.get("invalidToken"),null]);case 25:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],i){e.next=22;break}return e.next=8,A(C.get("recipients/delete/".concat(t)));case 8:if(a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],u=l||{},d=u.data,p=void 0===d?null:d,!o||!o.response){e.next=19;break}if(403!==o.response.status){e.next=18;break}return e.abrupt("return",[O.get("notAuthorized"),null]);case 18:return e.abrupt("return",[O.get("serverError"),null]);case 19:return e.abrupt("return",[o,p]);case 22:return e.abrupt("return",[O.get("invalidToken"),null]);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],i){e.next=22;break}return e.next=8,A(C.get("milestones/".concat(t,"/awards")));case 8:if(a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],u=l||{},d=u.data,p=void 0===d?null:d,!o||!o.response){e.next=19;break}if(403!==o.response.status){e.next=18;break}return e.abrupt("return",[O.get("notAuthorized"),null]);case 18:return e.abrupt("return",[O.get("serverError"),null]);case 19:return e.abrupt("return",[o,p.map((function(e){return{id:e.id||"",name:e.name||"",shortName:e.short_name||"",description:e.description||"",imageUrl:e.image_url||"",options:JSON.parse(e.options)||null}}))]);case 22:return e.abrupt("return",[O.get("invalidToken"),null]);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C.get("organizations");case 2:return t=e.sent,e.next=5,C.get("communities");case 5:return r=e.sent,e.next=8,C.get("pecsf/charities");case 8:return n=e.sent,e.next=11,C.get("pecsf/regions");case 11:return i=e.sent,e.abrupt("return",{organizations:(t.data||[]).map((function(e){return{id:e.id||"",name:e.name||"",shortName:e.short_name||"",orgType:e.org_type||""}})),communities:(r.data||[]).map((function(e){return{id:e.id||"",name:e.name||"",region:e.region||""}})),pecsf:{charities:n?n.data:[],regions:i?i.data:[]}});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();
/*!
 * Authentication services (Vue)
 * File: auth.services.js
 * Copyright(c) 2022 BC Gov
 * MIT Licensed
 */
k.a.defaults.xsrfCookieName="csrftoken",k.a.defaults.xsrfHeaderName="X-CSRFToken";var N=k.a.create({baseURL:"https://lsaapp.gww.gov.bc.ca/",xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":"XSRF-TOKEN"},withCredentials:!0}),T=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A(N.get("sanctum/csrf-cookie"));case 2:return t=e.sent,r=Object(c["a"])(t,2),n=r[0],i=r[1],n&&console.error(n),e.abrupt("return",[n,i]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,o,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(t=e.sent,r=Object(c["a"])(t,1),n=r[0],n){e.next=23;break}return e.next=8,A(N.get("users"));case 8:if(i=e.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],l=o||{},u=l.data,d=void 0===u?[]:u,console.log(d),!s||!s.response){e.next=20;break}if(403!==s.response.status){e.next=19;break}return e.abrupt("return",[O.get("notAuthorized"),null]);case 19:return e.abrupt("return",[O.get("serverError"),null]);case 20:return e.abrupt("return",[s,d]);case 23:return e.abrupt("return",[O.get("invalidToken"),null]);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],i){e.next=19;break}return e.next=8,A(N.post("register",t));case 8:if(a=e.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],!o||!o.response){e.next=16;break}if(422!==o.response.status){e.next=15;break}return e.abrupt("return",[O.get("invalidData"),null]);case 15:return e.abrupt("return",[O.get("serverError"),null]);case 16:return e.abrupt("return",[o,l]);case 19:return e.abrupt("return",[O.get("invalidToken"),null]);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,o,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(r=e.sent,n=Object(c["a"])(r,1),i=n[0],i){e.next=22;break}return e.next=8,A(N.post("login",t));case 8:if(a=e.sent,s=Object(c["a"])(a,1),o=s[0],!o){e.next=13;break}return e.abrupt("return",[O.get("loginError"),null]);case 13:return e.next=15,U();case 15:return l=e.sent,u=Object(c["a"])(l,2),d=u[0],p=u[1],e.abrupt("return",[d?O.get("loginError"):null,p]);case 22:return e.abrupt("return",[i,null]);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(t=e.sent,r=Object(c["a"])(t,1),n=r[0],n){e.next=16;break}return e.next=8,A(N.post("logout"));case 8:if(i=e.sent,a=Object(c["a"])(i,1),s=a[0],!s){e.next=13;break}return e.abrupt("return",[O.get("serverError"),null]);case 13:return e.abrupt("return",[s,null]);case 16:return e.abrupt("return",[n,null]);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,o,l,u,d,p,m,f,b,g,h,v,_,w,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A(N.get("profile"));case 2:return t=e.sent,r=Object(c["a"])(t,2),n=r[0],i=r[1],n&&console.error(n),a=i||{},s=a.data,o=void 0===s?null:s,l=o||{},u=l.organizations,d=void 0===u?[]:u,p=l.roles,m=void 0===p?[]:p,f=l.name,b=void 0===f?"":f,g=l.idir,h=void 0===g?"":g,v=l.guid,_=void 0===v?"":v,w=l.email,y=void 0===w?"":w,e.abrupt("return",[n,{name:b,idir:h,guid:_,email:y,role:m.length>0?m[0].name:"",organizations:d.map((function(e){return e.id}))}]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y={name:"navbar",components:{Profile:_,BIconPerson:w["n"]},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},isLoading:function(){return this.$store.getters.isLoading},user:function(){return this.$store.getters.getUser}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},logout:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setMessage",{text:"Signing out...",type:"info"}),t.next=3,H();case 3:if(r=t.sent,n=Object(c["a"])(r,1),i=n[0],console.log(i),e.$store.commit("setMessage",i||{text:"Signed Out Successfully",type:"success"}),i||e.$store.commit("setUser",null),"user-login"===e.$route.name){t.next=12;break}return t.next=12,e.reroute("/login");case 12:case"end":return t.stop()}}),t)})))()}},beforeCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,U();case 3:return r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],!i&&a&&e.$store.commit("setUser",a),t.next=10,e.$store.dispatch("loadOptions");case 10:e.$store.commit("setLoading",!1);case 11:case"end":return t.stop()}}),t)})))()}},B=Y,X=Object(h["a"])(B,o,l,!1,null,null,null),G=X.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{staticClass:"p-1",attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#"}},[n("img",{attrs:{height:"60px",src:r("e3cd"),alt:"Where Ideas Work"}})]),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-navbar-nav")],1)],1)],1)},K=[],W={name:"Footer",computed:{isLoggedIn:function(){return this.$store.getters.isAuthenticated}}},Z=W,Q=Object(h["a"])(Z,J,K,!1,null,null,null),ee=Q.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"z-index":"9990"}},[r("b-navbar",{staticClass:"p-0 m-5",attrs:{fixed:"top"}},[e.message.text?r("b-alert",{staticClass:"w-100",attrs:{show:"4",fade:"",variant:e.message.type,dismissible:e.message.dismissible},on:{dismissed:function(t){e.message={text:"",type:""}}}},[e.message.spinner?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e(),e._v(" "+e._s(e.message.text)+" ")],1):e._e()],1)],1)},re=[],ne={name:"global-message",computed:{message:{get:function(){return this.$store.getters.getMessage},set:function(e){this.$store.dispatch("setMessage",e)}}}},ie=ne,ae=(r("f87e"),Object(h["a"])(ie,te,re,!1,null,null,null)),se=ae.exports,oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:"Sign In",lead:"Admin Authentication"}}),e.isAuthenticated?r("b-alert",{attrs:{variant:"info",show:""}},[e._v("You are currently logged in.")]):e._e(),e.isAuthenticated?r("b-alert",{attrs:{variant:"info",show:""}},[e._v("You are currently logged in.")]):r("b-form",{on:{submit:function(t){return e.submit()}}},[r("b-card",{staticClass:"mb-3",attrs:{header:"Login","header-tag":"header","bg-variant":"light"}},[r("b-form-group",{attrs:{id:"fieldset-user-login"}},[r("b-form-group",{attrs:{id:"input-group-user-login-email",label:"Email","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-email"}},[r("b-form-input",{attrs:{id:"input-user-login-email",type:"email",state:e.validate("email")},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("b-form-group",{attrs:{id:"input-group-user-login-password",label:"Password","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-password"}},[r("b-form-input",{attrs:{id:"input-user-login-password",type:"password",state:e.validate("password")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("b-button",{attrs:{variant:"info",disabled:e.processing||!e.validate("all")},on:{click:function(t){return e.submit()}}},[e._v(" Sign In "),this.processing?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e()],1)],1)],1)],1)],1)},le=[],ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-jumbotron",{attrs:{id:"page-header","header-level":"5",header:this.$props.header,lead:this.$props.lead}}),e.isLoading?r("b-alert",{attrs:{variant:"light",show:""}},[r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}),e._v(" Please wait while the page loads ... ")],1):e._e()],1)},ue=[],de={name:"page-header",props:{lead:String,header:String},computed:{isLoading:function(){return this.$store.getters.isLoading}}},pe=de,me=(r("53ca"),Object(h["a"])(pe,ce,ue,!1,null,null,null)),fe=me.exports;r("159b");var be=function(e){return!!String(e||"")},ge=function(e){return!!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},he=function(e){return!!String(e)},ve=function(e){return!!String(e).toLowerCase().match(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4}$/im)},_e=function(e){return!!String(e).toLowerCase().match(/^[ABCEGHJ-NPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][ -]?\d[ABCEGHJ-NPRSTV-Z]\d$/i)},we=function(e,t,r){var n=r||{},i=n.id,a=void 0===i?null:i,s=n.options,o=void 0===s?null:s,l=o||{},c=l.selections,u=void 0===c?[]:c;if(!parseInt(a)||0===(u||[]).length)return!1;if("pecsf"===e){var d={pecsfPool:!0,pecsfRegion1:null,pecsfCharity1:null,pecsfRegion2:null,pecsfCharity2:null,honour:null};u.forEach((function(e){d[e.key]=e.value}));var p={pecsfRegion1:function(){return!!d.pecsfRegion1},pecsfCharity1:function(){return!!d.pecsfPool||!!d.pecsfRegion1&&!!d.pecsfCharity1},pecsfRegion2:function(){return!!d.pecsfPool||!!d.pecsfRegion2},pecsfCharity2:function(){return!!d.pecsfPool||!!d.pecsfRegion2&&!!d.pecsfCharity2},honour:function(){return!!d.honour}};return"undefined"!==p[t]&&("all"===t?0===Object.keys(p).filter((function(e){return!p[e]()})).length:!!p[t]())}return 0===u.filter((function(e){return!e.value})).length},ye={name:"user-login",components:{PageHeader:fe},data:function(){return{processing:!1,form:{email:"",password:"",remember:!1,errors:[]}}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.processing=!0,t.next=3,V(e.form);case 3:return r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],t.next=9,e.$store.dispatch("setMessage",i||{text:"Signed In Successfully",type:"success"});case 9:if(!a){t.next=14;break}if(e.$store.commit("setUser",a),"dashboard"===e.$route.name){t.next=14;break}return t.next=14,e.reroute("/");case 14:e.processing=!1;case 15:case"end":return t.stop()}}),t)})))()}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},validate:function(){var e=this;return function(t){var r={email:function(){return ge(e.form.email)},password:function(){return he(e.form.password)}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}}},ke=ye,xe=Object(h["a"])(ke,oe,le,!1,null,null,null),Re=xe.exports,Oe={name:"app",components:{NavBar:G,Message:se,Footer:ee,Login:Re},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},isLoading:function(){return this.$store.getters.isLoading}}},Ce=Oe,$e=(r("034f"),Object(h["a"])(Ce,a,s,!1,null,null,null)),Se=$e.exports,Ae=r("8c4f"),ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:"Dashboard",lead:"Administration Dashboard"}}),e.isAuthenticated||e.isLoading?r("b-container",[r("div",[r("b-card-group",{attrs:{deck:""}},[r("b-card",{attrs:{title:"Register Award Recipients"},scopedSlots:e._u([{key:"footer",fn:function(){return[r("b-button",{attrs:{block:"",variant:"info"},on:{click:function(t){return e.reroute("/recipients/create")}}},[e._v("Register Recipient ")])]},proxy:!0}])},[r("b-card-text",[r("p",[e._v("Register Long Service Award recipients as well as view and edit their record data.")])])],1),r("b-card",{attrs:{title:"Manage Award Recipients"},scopedSlots:e._u([{key:"footer",fn:function(){return[r("b-button",{attrs:{block:"",variant:"info"},on:{click:function(t){return e.reroute("/recipients/")}}},[e._v("Recipients List ")])]},proxy:!0}])},[r("b-card-text",[r("p",[e._v("View and edit Long Service Award recipient records.")])])],1)],1)],1)]):r("b-alert",{attrs:{variant:"warning",show:""}},[e._v("You are not logged in.")])],1)},je=[],Ee={name:"dashboard",components:{PageHeader:fe},computed:{isLoading:function(){return this.$store.getters.isLoading},isAuthenticated:function(){return this.$store.getters.isAuthenticated}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()}}},Pe=Ee,Le=Object(h["a"])(Pe,ze,je,!1,null,null,null),De=Le.exports,Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-not-found"},[r("b-jumbotron",{attrs:{header:"404",lead:"Page could not be found."}})],1)},Me=[],Ne={},Te=Ne,qe=Object(h["a"])(Te,Fe,Me,!1,null,null,null),Ie=qe.exports,Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-unauthorized"},[r("b-jumbotron",{attrs:{header:"401 - Unauthorized",lead:"Please sign in to view access this site."}})],1)},He=[],Ue={},Ye=Ue,Be=Object(h["a"])(Ye,Ve,He,!1,null,null,null),Xe=Be.exports,Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-container",[e.isAdmin?e._e():r("b-alert",{attrs:{variant:"info",show:""}},[e._v("Sign in to view this page.")]),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Selection Mode:","label-for":"table-select-mode-select","label-cols-md":"4"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-mode-select",options:e.modes},model:{value:e.selectMode,callback:function(t){e.selectMode=t},expression:"selectMode"}})],1)],1),r("b-col",{staticClass:"mb-2",attrs:{align:"right"}},[e.selected.length>0?r("span",[e._v(" "+e._s(e.selected.length)+" Item(s) Selected")]):e._e(),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:e.selectAllRows}},[e._v("Select All")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:e.clearSelected}},[e._v("Clear Selected")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:e.clearFilters}},[e._v("Clear Filters")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"info"},on:{click:function(t){return e.reroute("/users/register")}}},[e._v("Add User")])],1)],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Organization","label-for":"table-select-filter-organization"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-organization",options:e.organizations},model:{value:e.selectOrganization,callback:function(t){e.selectOrganization=t},expression:"selectOrganization"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Retirement","label-for":"table-select-filter-retiring"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-retiring",options:e.roles},model:{value:e.selectRole,callback:function(t){e.selectRole=t},expression:"selectRole"}})],1)],1)],1)],1),r("b-table",{ref:"selectableTable",attrs:{"primary-key":"id",items:e.items,fields:e.fields,striped:"",filter:e.criteria,"filter-function":e.applyFilter,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"select-mode":e.selectMode,responsive:"sm",selectable:"",busy:e.loading},on:{"row-selected":e.onRowSelected,"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){var n=t.rowSelected;return[n?[r("div",{staticClass:"text-center",attrs:{"aria-hidden":"true"}},[r("BIconCheckSquare")],1),r("span",{staticClass:"sr-only"},[e._v("Selected")])]:[r("span",{attrs:{"aria-hidden":"true"}},[e._v(" ")]),r("span",{staticClass:"sr-only"},[e._v("Not selected")])]]}},{key:"cell(organizations)",fn:function(t){return e._l(t.item.organizations,(function(t){return r("div",{key:t},[e._v(" "+e._s(e.lookupOrganization(t))+" ")])}))}},{key:"cell(created)",fn:function(t){return[e._v(" "+e._s(t.item.created.toLocaleString())+" ")]}},{key:"cell(updated)",fn:function(t){return[e._v(" "+e._s(t.item.updated.toLocaleString())+" ")]}},{key:"cell(details)",fn:function(t){return[r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/users/view/"+t.item.id)}}},[e._v(" View ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/users/edit/"+t.item.id)}}},[e._v(" Edit ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/users/delete/"+t.item.id)}}},[e._v(" Delete ")])]}}])}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},Je=[],Ke={name:"recipients-list",props:["header","lead","mode"],components:{PageHeader:fe,BIconCheckSquare:w["d"]},data:function(){return{loading:!1,error:!1,message:"",sortBy:"last_name",sortDesc:!0,selected:[],items:[],modes:["multi","single","range"],selectMode:"multi",selectOrganization:null,selectRole:null,fields:[{key:"name",sortable:!0},{key:"role",sortable:!0},{key:"organizations",sortable:!0},{key:"updated",sortable:!0},{key:"created",sortable:!0},{key:"details",label:"",sortable:!1}]}},computed:{isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},organizations:function(){return this.$store.getters.getOrganizations},criteria:function(){return{status:this.selectStatus,isRetiring:this.selectIsRetiring,milestone:this.selectMilestone,organization:this.selectOrganization}},roles:function(){return f.get("roles")}},methods:{onRowSelected:function(e){this.selected=e},selectAllRows:function(){this.$refs.selectableTable.selectAllRows()},clearSelected:function(){this.$refs.selectableTable.clearSelected()},clearFilters:function(){this.selectRole=null,this.selectOrganization=null},applyFilter:function(e){var t=!this.criteria.role||e.role===this.criteria.role,r=!this.criteria.organization||e.organization===this.criteria.organization;return r&&t},loadUsers:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q();case 2:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&(e.error=!0,e.$store.commit("setMessage",i)),e.items=(a||[]).map((function(e){var t=e||{},r=t.id,n=void 0===r?null:r,i=t.name,a=void 0===i?"":i,s=t.roles,o=void 0===s?[]:s,l=t.organizations,c=void 0===l?[]:l,u=t.updated_at,d=void 0===u?null:u,p=t.created_at,m=void 0===p?null:p,f=new Date(d),b=new Date(m),g=o.length>0?o[0].name:"unknown";return{id:n,name:a,role:g,organizations:c.map((function(e){return e.id})),created:b,updated:f}}));case 8:case"end":return t.stop()}}),t)})))()},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){var t=f.lookup("organizations",parseInt(e),{organizations:this.$store.getters.getOrganizations||[]});return t?t.substring(t.indexOf("[")+1,t.lastIndexOf("]")):""}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.loadUsers();case 3:e.$store.commit("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()}},We=Ke,Ze=Object(h["a"])(We,Ge,Je,!1,null,null,null),Qe=Ze.exports,et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-form",[r("b-card",{staticClass:"mb-3",attrs:{header:"create"===this.mode?"Register User":"Update User Data","header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"}},[r("b-form-group",{attrs:{id:"fieldset-user-registration"}},[r("b-form-group",{attrs:{id:"input-group-user-name",label:"Full Name","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-email"}},[r("b-form-input",{attrs:{id:"input-user-name",state:e.validate("name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("name")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-user-email",label:"Email","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-email"}},[r("b-form-input",{attrs:{id:"input-user-email",autocomplete:"on",state:e.validate("email")},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("email")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-user-role",label:"Select User Role","label-class":"font-weight-bold","label-for":"input-user-role"}},[r("b-form-select",{attrs:{id:"input-user-role",options:e.roles},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("role")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-organization",label:"Associated Organizations","label-class":"font-weight-bold","label-for":"input-user-organization"}},[r("b-form-select",{attrs:{id:"input-user-organization",options:e.organizations,disabled:!e.isOrgContact,multiple:""},model:{value:e.form.organizations,callback:function(t){e.$set(e.form,"organizations",t)},expression:"form.organizations"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("organizations")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-user-idir",label:"IDIR","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-idir",description:"Optional"}},[r("b-form-input",{attrs:{id:"input-user-idir"},model:{value:e.form.idir,callback:function(t){e.$set(e.form,"idir",t)},expression:"form.idir"}})],1),r("b-form-group",{attrs:{id:"input-group-user-guid",label:"GUID","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-guid",description:"Optional"}},[r("b-form-input",{attrs:{id:"input-user-guid"},model:{value:e.form.guid,callback:function(t){e.$set(e.form,"guid",t)},expression:"form.guid"}})],1),r("b-form-group",{attrs:{id:"input-group-user-password",label:"Password","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-password"}},[r("b-form-input",{attrs:{type:"password",id:"input-user-password",autocomplete:"on",state:e.validate("password")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("password")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"input-group-user-password-confirmation",label:"Password Confirmation","label-size":"md","label-class":"font-weight-bold","label-for":"input-user-login-password-confirmation"}},[r("b-form-input",{attrs:{type:"password",id:"input-user-password-confirmation",autocomplete:"off",state:e.validate("password_confirmation")},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("password_confirmation")}},[e._v(" This field is required. Passwords must match. ")])],1),r("b-button",{attrs:{variant:"info",disabled:e.form.processing||!e.validate("all")},on:{click:function(t){return e.submit()}}},[this.form.processing?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e(),e._v(" "+e._s("create"===this.mode?"Register":"Update")+" ")],1)],1)],1)],1)],1)},tt=[],rt={head:{title:"Register User"},props:["header","lead","mode"],components:{PageHeader:fe},data:function(){return{form:{name:"",idir:"",guid:"",role:"",email:"",organizations:[],password:"",password_confirmation:"",processing:!1,errors:[]}}},computed:{organizations:function(){return this.$store.getters.getOrganizations.filter((function(e){return!!e.value}))||[]},roles:function(){return f.get("roles")},isLoading:function(){return this.$store.getters.isLoading||0===this.$store.getters.getOrganizations.length},isOrgContact:function(){return"orgContact"===this.form.role},validate:function(){var e=this;return function(t){var r={name:function(){return be(e.form.name)},email:function(){return ge(e.form.email)},role:function(){return!!e.form.role},password:function(){return he(e.form.password)},password_confirmation:function(){return he(e.form.password)&&e.form.password===e.form.password_confirmation},organizations:function(){return!e.isOrgContact||e.isOrgContact&&e.form.organizations.length>0}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}},methods:{submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.processing=!0,"create"!==e.mode){t.next=7;break}return t.next=4,I(e.form);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,(void 0)(e.form);case 9:t.t0=t.sent;case 10:r=t.t0,n=Object(c["a"])(r,1),i=n[0],i&&e.$store.commit("setMessage",i),e.form.processing=!1;case 15:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("setLoading",!0),"edit"!==e.mode){t.next=7;break}return t.next=4,(void 0)(e.$route.params.id||"");case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=[null,e.form];case 8:r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],console.log(a),i&&e.$store.commit("setMessage",i),e.form=a,e.$store.commit("setLoading",!1);case 16:case"end":return t.stop()}}),t)})))()}},nt=rt,it=Object(h["a"])(nt,et,tt,!1,null,null,null),at=it.exports,st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-container",[e.isOrgContact?e._e():r("b-alert",{attrs:{variant:"info",show:""}},[e._v("Sign in to view this page.")]),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Selection Mode:","label-for":"table-select-mode-select","label-cols-md":"4"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-mode-select",options:e.modes},model:{value:e.selectMode,callback:function(t){e.selectMode=t},expression:"selectMode"}})],1)],1),r("b-col",{staticClass:"mb-2",attrs:{align:"right"}},[e.selected.length>0?r("span",[e._v(" "+e._s(e.selected.length)+" Item(s) Selected")]):e._e(),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:e.selectAllRows}},[e._v("Select All")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:e.clearSelected}},[e._v("Clear Selected")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:e.clearFilters}},[e._v("Clear Filters")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"info"},on:{click:function(t){return e.reroute("/recipients/create")}}},[e._v("Add Recipient")])],1)],1),r("b-row",[e.isSuperAdmin?r("b-col",[r("b-form-group",{attrs:{label:"Status","label-for":"table-select-filter-declared"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-declared",options:e.statuses},model:{value:e.selectStatus,callback:function(t){e.selectStatus=t},expression:"selectStatus"}})],1)],1):e._e(),r("b-col",[r("b-form-group",{attrs:{label:"Milestone","label-for":"table-select-filter-milestone"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-milestone",options:e.milestones},model:{value:e.selectMilestone,callback:function(t){e.selectMilestone=t},expression:"selectMilestone"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Organization","label-for":"table-select-filter-organization"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-organization",options:e.organizations},model:{value:e.selectOrganization,callback:function(t){e.selectOrganization=t},expression:"selectOrganization"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Retirement","label-for":"table-select-filter-retiring"}},[r("b-form-select",{staticClass:"mb-3",attrs:{id:"table-select-filter-retiring",options:e.isRetiring},model:{value:e.selectIsRetiring,callback:function(t){e.selectIsRetiring=t},expression:"selectIsRetiring"}})],1)],1)],1)],1),r("b-table",{ref:"selectableTable",attrs:{"primary-key":"id",items:e.items,fields:e.fields,striped:"",filter:e.criteria,"filter-function":e.applyFilter,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"select-mode":e.selectMode,responsive:"sm",selectable:"",busy:e.loading},on:{"row-selected":e.onRowSelected,"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){var n=t.rowSelected;return[n?[r("div",{staticClass:"text-center",attrs:{"aria-hidden":"true"}},[r("BIconCheckSquare")],1),r("span",{staticClass:"sr-only"},[e._v("Selected")])]:[r("span",{attrs:{"aria-hidden":"true"}},[e._v(" ")]),r("span",{staticClass:"sr-only"},[e._v("Not selected")])]]}},{key:"cell(status)",fn:function(t){return[r("b-badge",{attrs:{variant:t.item.submitted?"success":"warning"}},[e._v(" "+e._s(t.item.submitted?"Submitted":"Draft")+" ")])]}},{key:"cell(organization)",fn:function(t){return[e._v(" "+e._s(e.lookupOrganization(t.item.organization))+" ")]}},{key:"cell(isRetiring)",fn:function(t){return[e._v(" "+e._s(t.item.isRetiring?"Yes":"No")+" ")]}},{key:"cell(created)",fn:function(t){return[e._v(" "+e._s(t.item.created.toLocaleString())+" ")]}},{key:"cell(updated)",fn:function(t){return[e._v(" "+e._s(t.item.updated.toLocaleString())+" ")]}},{key:"cell(details)",fn:function(t){return[r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/recipients/view/"+t.item.id)}}},[e._v(" View ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/recipients/edit/"+t.item.id)}}},[e._v(" Edit ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm"},on:{click:function(r){return e.reroute("/recipients/delete/"+t.item.id)}}},[e._v(" Delete ")])]}}])}),e.error?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" A server error occurred. Please contact the site administrator for assistance. ")]):e._e()],1)},ot=[],lt={name:"recipients-list",props:["header","lead","mode"],components:{PageHeader:fe,BIconCheckSquare:w["d"]},data:function(){return{loading:!1,error:!1,message:"",sortBy:"updated",sortDesc:!0,modes:["multi","single","range"],selectMode:"multi",selectMilestone:"",selectIsRetiring:"",selectOrganization:"",statuses:f.get("status"),selectStatus:"",selected:[],items:[],isRetiring:f.get("isRetiring"),milestones:f.get("milestones"),fields:this.isSuperAdmin?[{key:"status",sortable:!0},{key:"first_name",sortable:!0},{key:"last_name",sortable:!0},{key:"organization",sortable:!0},{key:"milestone",sortable:!0},{key:"branch_name",sortable:!0,label:"Branch"},{key:"isRetiring",sortable:!0,label:"Retiring"},{key:"updated",sortable:!0},{key:"created",sortable:!0},{key:"details",label:"",sortable:!1}]:[{key:"first_name",sortable:!0},{key:"last_name",sortable:!0},{key:"organization",sortable:!0},{key:"milestone",sortable:!0},{key:"branch_name",sortable:!0,label:"Branch"},{key:"isRetiring",sortable:!0,label:"Retiring"},{key:"updated",sortable:!0},{key:"created",sortable:!0},{key:"details",label:"",sortable:!1}]}},computed:{isLoading:function(){return this.$store.getters.isLoading},isOrgContact:function(){return this.$store.getters.isOrgContact},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},organizations:function(){return this.$store.getters.getOrganizations},criteria:function(){return{status:this.selectStatus,isRetiring:this.selectIsRetiring,milestone:this.selectMilestone,organization:this.selectOrganization}},settings:function(){return this.$store.getters.getSettings}},methods:{onRowSelected:function(e){this.selected=e},selectAllRows:function(){this.$refs.selectableTable.selectAllRows()},clearSelected:function(){this.$refs.selectableTable.clearSelected()},clearFilters:function(){this.selectStatus=null,this.selectIsRetiring=null,this.selectMilestone=null,this.selectOrganization=null},applyFilter:function(e){var t=!this.criteria.status||e.status&&"submitted"===this.criteria.status||!e.status&&"draft"===this.criteria.status,r=!this.criteria.isRetiring||e.isRetiring===this.criteria.isRetiring,n=!this.criteria.milestone||e.milestone===this.criteria.milestone,i=!this.criteria.organization||e.organization===this.criteria.organization;return t&&r&&i&&n},loadRecipients:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&(e.error=!0,e.$store.commit("setMessage",i)),e.items=(a||[]).map((function(t){var r=t||{},n=r.id,i=void 0===n?null:n,a=r.first_name,s=void 0!==a&&a,o=r.last_name,l=void 0===o?null:o,c=r.milestones,u=void 0===c?null:c,d=r.historical,p=void 0!==d&&d,m=r.retiring_this_year,f=void 0===m?0:m,b=r.organization_id,g=void 0===b?"":b,h=r.branch_name,v=void 0===h?"":h,_=r.is_declared,w=void 0===_?0:_,y=r.updated_at,k=void 0===y?null:y,x=r.created_at,R=void 0===x?null:x,O=new Date(k),C=new Date(R);return e.isSuperAdmin?{id:i,status:w?"submitted":"draft",first_name:s,last_name:l,organization:g,historical:p,milestone:p?"historical":u,branch_name:v,isRetiring:f,created:C,updated:O}:{id:i,first_name:s,last_name:l,organization:g,historical:p,milestone:p?"historical":u,branch_name:v,isRetiring:f,created:C,updated:O}}));case 8:case"end":return t.stop()}}),t)})))()},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){var t=f.lookup("organizations",parseInt(e),{organizations:this.organizations||[]});return t?t.substring(t.indexOf("[")+1,t.lastIndexOf("]")):""}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,e.loadRecipients();case 3:e.$store.commit("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()}},ct=lt,ut=Object(h["a"])(ct,st,ot,!1,null,null,null),dt=ut.exports,pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-container",[r("b-row",{attrs:{align:"right"}},[r("b-col",[r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"info"},on:{click:function(t){return e.reroute("/recipients/edit/"+e.recipient.id)}}},[e._v(" Edit ")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.reroute("/recipients/delete/"+e.recipient.id)}}},[e._v(" Delete ")])],1)],1),r("b-card",{staticClass:"mb-3",attrs:{header:"Recipient Record","header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"}},[e.isHistoricalRecipient?r("b-alert",{attrs:{show:"",variant:"info"}},[e._v(" This recipient has previously selected an award. ")]):e._e(),r("b-container",{staticClass:"p-3"},[r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Identification")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"first_name",label:"First Name"},{key:"last_name",label:"Last Name"},{key:"employee_number",label:"Employee Number"},{key:"government_email",label:"Government Email"},{key:"government_phone_number",label:"Government Phone"},{key:"personal_phone_number",label:"Phone"},{key:"organization_id",label:"Ministry/Organization"},{key:"branch_name",label:"Branch"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(organization_id)",fn:function(t){return[e._v(" "+e._s(e.lookupOrganization(t.item.organization_id))+" ")]}},{key:"cell(government_phone_number)",fn:function(t){return[e._v(" "+e._s(e.formatPhoneNumber(t.item.government_phone_number))+" ")]}},{key:"cell(personal_phone_number)",fn:function(t){return[e._v(" "+e._s(e.formatPhoneNumber(t.item.personal_phone_number))+" ")]}}],null,!1,2260629174)})],1)],1),e.recipient.office_address?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Office Address")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient.office_address],fields:[{key:"prefix",label:"Address Prefix"},{key:"street_address",label:"Street Address"},{key:"community",label:"Community"},{key:"postal_code",label:"Postal Code"}],striped:"",responsive:"sm","primary-key":"id"}})],1)],1):e._e(),r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Personal Contact Info")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"personal_email",label:"Email"}],striped:"",responsive:"sm","primary-key":"id"}}),e.recipient.personal_address?r("b-table",{attrs:{stacked:"",items:[e.recipient.personal_address],fields:[{key:"prefix",label:"Address Prefix"},{key:"street_address",label:"Street Address"},{key:"community",label:"Community"},{key:"postal_code",label:"Postal Code"}],striped:"",responsive:"sm","primary-key":"id"}}):e._e()],1)],1),e.isHistoricalRecipient?e._e():r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Milestone")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"milestones",label:"Milestone"},{key:"qualifying_year",label:"Qualifying Year"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){return[e._v(" "+e._s(e.lookup("milestones",t.item.milestones))+" ")]}}],null,!1,2932243400)})],1)],1),e.recipient.retiring_this_year?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Retirement")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"retirement_date",label:"Retirement Date"}],striped:"",responsive:"sm","primary-key":"id"}})],1)],1):e._e(),e.recipient.award.id&&e.awards?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Award")])]),r("b-col",[e.lookupAward(e.recipient.award.id)?r("b-table",{attrs:{stacked:"",items:[e.lookupAward(e.recipient.award.id)],fields:[{key:"name",label:"Award Name"},{key:"description",label:"Description"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(description)",fn:function(t){return e._l(e.parseDescription(t.item.description),(function(t,n){return r("p",{key:n},[e._v(" "+e._s(t)+" ")])}))}}],null,!1,3005756550)}):e._e()],1)],1):e._e(),e.recipient.award.options.selections?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Award Options")])]),r("b-col",e._l(e.recipient.award.options.selections||[],(function(t,n){return r("b-table",{key:n,attrs:{stacked:"",fields:[{key:"value",label:e.lookup("award-option-types",t.key)}],items:[t],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(value)",fn:function(t){return[e._v(" "+e._s(e.lookupAwardOption(t.item.key,t.item.value))+" ")]}}],null,!0)})})),1)],1):e._e(),e.recipient.supervisor_address?r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Service Pin (Supervisor Contact Info)")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"supervisor_first_name",label:"First Name"},{key:"supervisor_last_name",label:"Last Name"},{key:"supervisor_email",label:"Email"}],striped:"",responsive:"sm","primary-key":"id"}}),r("b-table",{attrs:{stacked:"",items:[e.recipient.supervisor_address],fields:[{key:"pobox",label:"P.O. Box"},{key:"prefix",label:"Address Prefix"},{key:"street_address",label:"Street Address"},{key:"community",label:"Community"},{key:"postal_code",label:"Postal Code"}],striped:"",responsive:"sm","primary-key":"id"}})],1)],1):e._e(),r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("h5",[e._v("Confirmations")])]),r("b-col",[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:[{key:"is_declared",label:"Has confirmed registration"},{key:"ceremony_opt_out",label:"To attend the Awards Ceremony"},{key:"survey_participation",label:"To participate in the LSA survey"},{key:"is_bcgeu_member",label:"BCGEU Member"}],striped:"",responsive:"sm","primary-key":"id"},scopedSlots:e._u([{key:"cell(ceremony_opt_out)",fn:function(t){return[e._v(" "+e._s(t.item.ceremony_opt_out?"No":"Yes")+" ")]}},{key:"cell(is_bcgeu_member)",fn:function(t){return[e._v(" "+e._s(t.item.is_bcgeu_member?"Yes":"No")+" ")]}},{key:"cell(survey_participation)",fn:function(t){return[e._v(" "+e._s(t.item.survey_participation?"Yes":"No")+" ")]}},{key:"cell(is_declared)",fn:function(t){return[e._v(" "+e._s(t.item.is_declared?"Yes":"No")+" ")]}}],null,!1,2818688521)})],1)],1)],1)],1)],1)],1)},mt=[],ft=(r("1276"),{name:"recipients-view",props:["header","lead","mode"],components:{PageHeader:fe},data:function(){return{recipient:null}},methods:{lookup:function(e,t){return f.lookup(e,t)},lookupOrganization:function(e){return f.lookup("organizations",parseInt(e),{organizations:this.organizations})},lookupAward:function(e){return f.getAwardDetails(parseInt(e),this.awards)},lookupAwardOption:function(e,t){var r=this.$store.getters.getAwards,n=this.$store.getters.getPecsfOptions,i=this.recipient.award||{},a=i.id,s=void 0===a?null:a,o=f.getAwardOptions(s,r),l=(o||[]).filter((function(t){return String(e)===String(t.key)}))||null;return l.length>0?"engraving"===e?t:f.lookup("options",t,l[0]||[]):"pecsfPool"===e?t?"Yes":"No":"honour"===e?t||"None":t?f.lookup("regions",parseInt(t),n)||f.lookup("charities",parseInt(t),n):"n/a"},formatPhoneNumber:function(e){return f.formatPhoneNumber(e)},parseDescription:function(e){return e.split(/(\\r)*\\n/g)},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()}},computed:{organizations:function(){return this.$store.getters.getOrganizations||[]},awards:function(){return this.$store.getters.getAwards||[]},isLoading:function(){return this.$store.getters.isLoading||!this.recipient},isHistoricalRecipient:function(){var e=this.recipient||{},t=e.historical,r=void 0!==t&&t;return r}},beforeCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),r=e.$route.params||{},n=r.id,i=void 0===n?null:n,t.next=4,E(i);case 4:if(a=t.sent,s=Object(c["a"])(a,2),o=s[0],l=s[1],!o){t.next=11;break}return e.$store.commit("setMessage",o),t.abrupt("return",null);case 11:return e.recipient=l,t.next=14,e.$store.dispatch("loadAwards",e.recipient.milestones);case 14:e.$store.commit("setLoading",!1);case 15:case"end":return t.stop()}}),t)})))()}}),bt=ft,gt=Object(h["a"])(bt,pt,mt,!1,null,null,null),ht=gt.exports,vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-container",[e.isHistoricalRecipient?r("b-alert",{attrs:{show:"",variant:"info"}},[e._v(" This recipient has previously selected an award. ")]):e._e(),r("InputIdentification"),r("InputPersonal"),r("InputMilestone"),r("InputAward"),r("InputSupervisor"),r("InputDeclarations"),r("b-button-group",{staticClass:"w-100"},[r("b-button",{attrs:{variant:"info",disabled:e.processing||!e.isValid},on:{click:function(t){return e.submit()}}},[e._v(" "+e._s("create"===this.mode?"Register":"Update")+" "),e.processing?r("b-spinner",{staticClass:"ml-3",attrs:{small:""}}):e._e()],1),r("b-button",{attrs:{variant:"secondary",disabled:e.processing},on:{click:function(t){return e.reroute("/recipients/")}}},[e._v(" Cancel ")])],1),r("b-form-invalid-feedback",{attrs:{state:e.isValid}},[e._v(" Form is invalid or incomplete. ")]),r("b-form-valid-feedback",{attrs:{state:e.isValid}},[e._v(" Form is complete and valid. ")]),e.recipient.id?r("b-row",{attrs:{align:"right"}},[r("b-col",[r("router-link",{attrs:{to:"/recipients/delete/"+e.recipient.id}},[e._v("Delete")])],1)],1):e._e()],1)],1)},_t=[],wt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Personal Contact Details "),e.isRequired&&e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{attrs:{id:"fieldset-personal-email",label:"Personal Email","label-for":"input-personal-email"}},[r("b-form-input",{attrs:{id:"input-personal-email",placeholder:"Recipient's email address"},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.personal_email,callback:function(t){e.$set(e.recipient,"personal_email",t)},expression:"recipient.personal_email"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("email")}},[e._v(" Enter a valid email address. This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-personal-phone",label:"Personal Phone Number","label-for":"input-personal-phone"}},[r("b-form-input",{attrs:{id:"input-personal-phone",placeholder:"###-###-####"},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.personal_phone_number,callback:function(t){e.$set(e.recipient,"personal_phone_number",t)},expression:"recipient.personal_phone_number"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("personal_phone_number")}},[e._v(" Enter a valid phone number. ")])],1)],1),r("Address",{attrs:{id:"personal_address",header:"Personal Address",label:"Personal"}})],1)},yt=[],kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.header)+" "),e.isRequired&&e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",[e.pobox?r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-pobox",label:"P.O. Box","label-for":"input-"+e.id+"-address-pobox",description:"Required for Victoria addresses"}},[r("b-form-input",{attrs:{prepend:"P.O. Box",id:"input-"+e.id+"-address-pobox",placeholder:"P.O. Box number"},model:{value:e.address.pobox,callback:function(t){e.$set(e.address,"pobox",t)},expression:"address.pobox"}})],1):e._e(),r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-prefix",label:"Address Prefix","label-for":"input-"+e.id+"-address-prefix",description:"Optional"}},[r("b-form-input",{attrs:{id:"input-"+e.id+"-address-prefix",placeholder:"Address prefix"},model:{value:e.address.prefix,callback:function(t){e.$set(e.address,"prefix",t)},expression:"address.prefix"}})],1),r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-street-address",label:"Street Address","label-for":"input-"+e.id+"-address-street-address"}},[r("b-form-input",{attrs:{id:"input-"+e.id+"-address-street-address",placeholder:e.label+" street address",state:e.isRequired?e.validate("street_address"):null},on:{change:function(t){return e.updateValidation()}},model:{value:e.address.street_address,callback:function(t){e.$set(e.address,"street_address",t)},expression:"address.street_address"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("street_address")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-postalcode",label:"Postal Code","label-for":"input-"+e.id+"-address-postalcode"}},[r("b-form-input",{attrs:{id:"input-"+e.id+"-address-postalcode",placeholder:"A0A 0A0",state:e.isRequired?e.validate("postal_code"):null},on:{update:function(t){return e.updateValidation()}},model:{value:e.address.postal_code,callback:function(t){e.$set(e.address,"postal_code",t)},expression:"address.postal_code"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("postal_code")}},[e._v(" Enter a valid Canadian postal code. "),e.isRequired?r("span",[e._v(" This field is required.")]):e._e()])],1),r("b-form-group",{attrs:{id:"fieldset-"+e.id+"-address-community",label:"City or Community","label-for":"input-"+e.id+"-address-community"}},[r("b-form-input",{attrs:{id:"input-"+e.id+"-address-community",placeholder:"Address's city or community",list:"community-list",state:e.isRequired?e.validate("community"):null},on:{change:function(t){return e.updateValidation()}},model:{value:e.address.community,callback:function(t){e.$set(e.address,"community",t)},expression:"address.community"}}),r("datalist",{attrs:{id:"community-list"}},e._l(e.communities,(function(t,n){return r("option",{key:n},[e._v(" "+e._s(t.text)+" ")])})),0),r("b-form-invalid-feedback",{attrs:{state:e.validate("community")}},[e._v(" This field is required. ")])],1)],1)],1)},xt=[],Rt=r("ade3"),Ot={name:"fieldset-address",props:{id:String,header:String,label:String,pobox:Boolean},methods:{updateValidation:function(){this.$store.commit("setFormValidation",Object(Rt["a"])({},this.id,this.validate("all")))}},computed:{recipient:function(){return this.$store.getters.getFormData},address:function(){return this.recipient[this.id]?this.recipient[this.id]:{}},organizations:function(){return this.$store.getters.getOrganizations},communities:function(){return this.$store.getters.getCommunities},isLoading:function(){return this.$store.getters.isLoading},isRequired:function(){return"personal_address"===this.id&&(this.recipient.ceremony_opt_out||this.recipient.retiring_this_year)},validate:function(){var e=this;return function(t){var r={street_address:function(){return e.isRequired&&be(e.address.street_address)||!e.isRequired},postal_code:function(){return e.isRequired&&_e(e.address.postal_code)||!e.isRequired&&(!e.address.postal_code||_e(e.address.postal_code))},community:function(){return e.isRequired&&be(e.address.community)||!e.isRequired}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}},mounted:function(){this.updateValidation()}},Ct=Ot,$t=Object(h["a"])(Ct,kt,xt,!1,null,null,null),St=$t.exports,At={name:"input-personal-contact",components:{Address:St},methods:{updateValidation:function(){this.isRequired&&this.$store.commit("setFormValidation",{personal_contact:this.validate("all")})}},computed:{recipient:function(){return this.$store.getters.getFormData},isRequired:function(){return this.recipient.retiring_this_year||this.recipient.ceremony_opt_out},validate:function(){var e=this;return function(t){var r={email:function(){return!e.recipient.personal_email||ge(e.recipient.personal_email)},personal_phone_number:function(){return!e.recipient.personal_phone_number||ve(e.recipient.personal_phone_number)}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}},mounted:function(){this.updateValidation()}},zt=At,jt=Object(h["a"])(zt,wt,yt,!1,null,null,null),Et=jt.exports,Pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Profile Details "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",[r("b-form-group",{attrs:{id:"fieldset-recipient-firstName",label:"First Name","label-for":"input-recipient-firstName"}},[r("b-form-input",{attrs:{id:"input-recipient-firstName",placeholder:"Recipient's first name",state:e.validate("first_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.first_name,callback:function(t){e.$set(e.recipient,"first_name",t)},expression:"recipient.first_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("first_name")}},[e._v(" This field is required. ")])],1),r("b-form-group",[r("b-form-group",{attrs:{id:"fieldset-recipient-lastName",label:"Last Name","label-for":"input-recipient-lastName"}},[r("b-form-input",{attrs:{id:"input-recipient-lastName",placeholder:"Recipient's last name",state:e.validate("last_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.last_name,callback:function(t){e.$set(e.recipient,"last_name",t)},expression:"recipient.last_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("last_name")}},[e._v(" This field is required. ")])],1)],1),r("b-form-group",{attrs:{id:"fieldset-recipient-employee-number",label:"Employee Number","label-for":"input-recipient-employee-number"}},[r("b-form-input",{attrs:{id:"input-recipient-employee-number",placeholder:"Recipient's employee number",state:e.validate("employee_number")},on:{change:function(t){return e.checkHistoricalRecipient()},update:function(t){return e.updateValidation()}},model:{value:e.recipient.employee_number,callback:function(t){e.$set(e.recipient,"employee_number",t)},expression:"recipient.employee_number"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("employee_number")}},[e._v(" This field is required. ")]),e.isHistoricalRecipient?r("b-alert",{attrs:{show:"",variant:"info"}},[e._v(" This recipient has previously selected an award. ")]):e._e()],1),r("b-form-group",{attrs:{id:"fieldset-recipient-email",label:"Government Email","label-for":"input-recipient-email"}},[r("b-form-input",{attrs:{id:"input-recipient-email",placeholder:"Recipient's employee email address",state:e.validate("government_email")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.government_email,callback:function(t){e.$set(e.recipient,"government_email",t)},expression:"recipient.government_email"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("government_email")}},[e._v(" Enter a valid email address. ")])],1),r("b-form-group",{attrs:{id:"fieldset-recipient-government-phone",label:"Government Phone Number","label-for":"input-recipient-government-phone",description:"Optional"}},[r("b-form-input",{attrs:{id:"input-recipient-government-phone",placeholder:"###-###-####"},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.government_phone_number,callback:function(t){e.$set(e.recipient,"government_phone_number",t)},expression:"recipient.government_phone_number"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("government_phone_number")}},[e._v(" Enter a valid phone number. ")])],1),r("b-form-group",{attrs:{id:"input-group-organization",label:"Government Ministry","label-for":"input-organization"}},[r("b-form-select",{attrs:{id:"input-organization",options:e.organizations,state:e.validate("organization_id")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.organization_id,callback:function(t){e.$set(e.recipient,"organization_id",t)},expression:"recipient.organization_id"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("organization_id")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-recipient-branch",label:"Branch (Please fill out in full)","label-for":"input-recipient-branch"}},[r("b-form-input",{attrs:{id:"input-recipient-branch",placeholder:"Recipient's ministry branch",state:e.validate("branch_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.branch_name,callback:function(t){e.$set(e.recipient,"branch_name",t)},expression:"recipient.branch_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("branch_name")}},[e._v(" This field is required. ")])],1)],1)],1),r("Address",{attrs:{id:"office_address",header:"Office Address",label:"Office"}})],1)},Lt=[],Dt=(r("caad"),r("2532"),{name:"input-identification",components:{Address:St},methods:{checkHistoricalRecipient:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("isHistoricalRecipient",e.recipient.employee_number);case 2:e.isHistoricalRecipient&&e.$store.commit("setFormData",{milestones:null,award:{}});case 3:case"end":return t.stop()}}),t)})))()},updateValidation:function(){this.$store.commit("setFormValidation",{identification:this.validate("all")})}},computed:{recipient:function(){return this.$store.getters.getFormData},organizations:function(){var e=this.$store.getters.getOrganizations||[],t=this.$store.getters.getUser||{};return t&&"orgContact"===t.role?e.filter((function(e){return t.organizations.includes(e.value)})):e},communities:function(){return this.$store.getters.getCommunities},validate:function(){var e=this;return function(t){var r={first_name:function(){return be(e.recipient.first_name)},last_name:function(){return be(e.recipient.first_name)},employee_number:function(){return be(e.recipient.employee_number)},government_email:function(){return ge(e.recipient.government_email)},government_phone_number:function(){return!e.recipient.government_phone_number||ve(e.recipient.government_phone_number)},organization_id:function(){return!!e.recipient.organization_id},branch_name:function(){return!!e.recipient.branch_name}};return"all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:"undefined"!==r[t]&&!!r[t]()}},isSubmitted:function(){return this.$store.getters.isSubmitted},isHistoricalRecipient:function(){return this.$store.getters.getFormData.historical}},beforeMount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.getters.getFormData.employee_number,n=void 0===r?null:r,t.next=3,e.$store.dispatch("isHistoricalRecipient",n);case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){this.updateValidation()}}),Ft=Dt,Mt=Object(h["a"])(Ft,Pt,Lt,!1,null,null,null),Nt=Mt.exports,Tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Milestone Details "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",[e.isHistoricalRecipient?r("b-alert",{attrs:{variant:"info",show:""}},[e._v(" This recipient has previously registered for an award. ")]):e._e(),e.isHistoricalRecipient?e._e():r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-milestone",label:"Select Recipient's Milestone","label-for":"input-milestone","label-class":"font-weight-bold"}},[r("b-form-select",{attrs:{id:"input-milestone",options:e.options.milestones,state:e.validate("milestone")},on:{change:function(t){return e.selectMilestone(e.recipient.milestones)}},model:{value:e.recipient.milestones,callback:function(t){e.$set(e.recipient,"milestones",t)},expression:"recipient.milestones"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("milestone")}},[e._v(" This field is required. ")])],1),e.isHistoricalRecipient?e._e():r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-milestone-qualifying-year",label:"Qualifying Year","label-size":"md","label-class":"font-weight-bold","label-for":"input-milestone-qualifying-year"}},[e._l(e.options.qualifyingYears,(function(t,n){return r("b-form-radio",{key:n,attrs:{name:"input-milestone-qualifying-year",disabled:e.isHistoricalRecipient,value:t.value,state:e.validate("qualifyingYear")},on:{change:function(t){return e.updateValidation()}},model:{value:e.recipient.qualifying_year,callback:function(t){e.$set(e.recipient,"qualifying_year",t)},expression:"recipient.qualifying_year"}},[e._v(" "+e._s(t.text)+" ")])})),r("b-form-invalid-feedback",{attrs:{state:e.validate("qualifyingYear")}},[e._v(" This field is required. ")])],2)],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-milestone-retirement",label:"Retirement","label-size":"md","label-class":"font-weight-bold","label-for":"input-milestone-retirement"}},[r("b-form-checkbox",{attrs:{id:"input-milestone-retirement",value:1,"unchecked-value":0},on:{change:function(t){return e.resetRetirementDate()}},model:{value:e.recipient.retiring_this_year,callback:function(t){e.$set(e.recipient,"retiring_this_year",t)},expression:"recipient.retiring_this_year"}},[e._v("Confirm retirement in "+e._s((new Date).getFullYear()))])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-milestone-retirement-date",label:"Retirement Date","label-size":"md","label-class":"font-weight-bold","label-for":"input-milestone-retirement-date"}},[r("b-form-datepicker",{attrs:{id:"input-milestone-retirement-date",min:e.currentDate,max:e.maxDate,locale:"en",disabled:!e.recipient.retiring_this_year},on:{input:function(t){return e.updateValidation()}},model:{value:e.recipient.retirement_date,callback:function(t){e.$set(e.recipient,"retirement_date",t)},expression:"recipient.retirement_date"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("retirementDate")}},[e._v(" This field is required. ")])],1)],1)],1)},qt=[],It={award:{id:null,options:null,name:"",status:"delegated"}},Vt={name:"input-milestone",data:function(){return{options:{qualifyingYears:f.get("qualifying-years"),milestones:f.get("milestones")}}},methods:{selectMilestone:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$store.commit("setFormData",It),r.next=3,t.$store.dispatch("loadAwards",e);case 3:t.updateValidation(),t.$store.commit("setFormValidation",{award:!1});case 5:case"end":return r.stop()}}),r)})))()},resetRetirementDate:function(){this.$store.commit("setFormData",{retirement_date:null}),this.updateValidation()},updateValidation:function(){this.$store.commit("setFormValidation",{milestone:this.validate("all")})}},computed:{recipient:function(){return this.$store.getters.getFormData},validate:function(){var e=this;return function(t){var r={milestone:function(){return!!parseInt(e.recipient.milestones)||e.isHistoricalRecipient},qualifyingYear:function(){return!!parseInt(e.recipient.qualifying_year)||e.isHistoricalRecipient},retirementDate:function(){return!parseInt(e.recipient.retiring_this_year)||!!Date.parse(e.recipient.retirement_date)}};return"all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]&&!!r[t]()}},currentDate:function(){return new Date},maxDate:function(){var e=1,t=new Date;return new Date(t.setFullYear(t.getFullYear()+e))},isHistoricalRecipient:function(){return this.$store.getters.getFormData.historical}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.updateValidation(),r=e.recipient.milestones,n=void 0===r?"":r,!n){t.next=5;break}return t.next=5,e.$store.dispatch("loadAwards",n);case 5:case"end":return t.stop()}}),t)})))()}},Ht=Vt,Ut=Object(h["a"])(Ht,Tt,qt,!1,null,null,null),Yt=Ut.exports,Bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isHistoricalRecipient?e._e():r("b-container",[e.recipient.milestones?r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Awards for Milestone Year "+e._s(e.recipient.milestones)+" "),e.recipient.award.id?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}],null,!1,1376826590)},[r("b-form-group",{attrs:{id:"fieldset-award",label:"Select Recipient's Award","label-for":"input-award"}},[r("b-form-select",{attrs:{id:"input-award",options:e.awards,state:!!e.recipient.award.id},on:{change:function(t){return e.resetOptions()}},model:{value:e.recipient.award.id,callback:function(t){e.$set(e.recipient.award,"id",t)},expression:"recipient.award.id"}}),r("b-form-invalid-feedback",{attrs:{state:!!e.recipient.award.id}},[e._v(" This field is required. ")])],1),r("p",[e._v(e._s(e.description))])],1):e._e(),e.recipient.award.id?r("div",[e.isPECSF?r("InputeAwardPECSF"):r("InputAwardOptions")],1):e._e()],1)},Xt=[],Gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Award Options "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",e._l(e.awardOptions,(function(t,n){return r("b-form-group",{key:n,staticClass:"mb-4",attrs:{id:"input-group-award-options-"+n,label:"Choose Your "+t.label,"label-for":"input-award-options-"+n,"label-class":"font-weight-bold",description:t.description||""}},[t.options?r("b-form-group",[r("b-form-select",{attrs:{id:"input-award-options-"+n,options:t.options,state:!!t.selected,disabled:t.disabled||e.isSubmitted},on:{change:function(r){return e.updateOptions(t)}},model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"awardOption.selected"}}),r("b-form-invalid-feedback",{attrs:{state:!!t.selected}},[e._v(" This field is required. ")])],1):e._e(),"engraving"===t.key?r("b-form-group",{attrs:{id:"input-group-award-option-engraving",label:"Enter Your Engraved Message","label-for":"input-award-options-engraving",description:"Character Limit: "+e.engravingCharLimit}},[r("b-form-input",{attrs:{id:"input-award-options-engraving",placeholder:"Enter your engraving",formatter:e.limitCharLength,disabled:e.isSubmitted},on:{change:function(r){return e.updateOptions(t)}},model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"awardOption.selected"}}),r("b-form-valid-feedback",{attrs:{state:!!t.selected}},[e._v(" Your Inscription: "),r("b",[e._v('"')]),e._v(e._s(t.selected)),r("b",[e._v('"')])])],1):e._e(),"certificate"===t.key?r("b-form-group",{attrs:{id:"input-group-award-option-certificate",label:"How you would like your name to appear on your 25-year certificate?","label-for":"input-award-options-certificate"}},[r("b-form-input",{attrs:{id:"input-award-options-certificate",placeholder:"Enter a name here",disabled:e.isSubmitted,state:!!t.selected},on:{update:function(r){return e.updateOptions(t)}},model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"awardOption.selected"}}),r("b-form-invalid-feedback",{attrs:{state:!!t.selected}},[e._v(" This field is required. ")]),r("b-form-valid-feedback",{attrs:{state:!!t.selected}},[e._v(" To appear on your certificate: "),r("b",[e._v('"')]),e._v(e._s(t.selected)),r("b",[e._v('"')])])],1):e._e()],1)})),1)],1)},Jt=[],Kt={name:"input-award-options-other",components:{},computed:{recipient:function(){return this.$store.getters.getFormData},awardOptions:function(){var e=this.recipient.award||{},t=e.id,r=void 0===t?null:t,n=e.options,i=void 0===n?{}:n,a=f.getAwardOptions(r,this.$store.getters.getAwards);if(!a)return[];var s=i||{},o=s.selections,l=void 0===o?[]:o;return a.map((function(e){return l.forEach((function(t){t.key===e.key&&(e.selected=t.value)})),e}))},validate:function(){var e=this;return function(t){return we("pecsf",t,e.recipient.award)}},engravingCharLimit:function(){var e="",t=this.recipient.award.options||{},r=t.selections,n=void 0===r?[]:r;return n.forEach((function(t){"sizes"===String(t.key)&&(e=t.value)})),f.getEngravingCharLimit(e)},isSubmitted:function(){return this.$store.getters.isSubmitted}},methods:{updateOptions:function(){var e={selections:(this.awardOptions||[]).map((function(e){return{key:e.key,value:e.selected}}))};this.$store.commit("setFormData",{award:{id:this.recipient.award.id||null,options:e,status:this.recipient.award.status}})},limitCharLength:function(e){return String(e).substring(0,this.engravingCharLimit)}}},Wt=Kt,Zt=Object(h["a"])(Wt,Gt,Jt,!1,null,null,null),Qt=Zt.exports,er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Award Options: PECSF Donation "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{attrs:{id:"input-group-award-options-pecsf",label:"Choose Donation Option","label-class":"font-weight-bold"}},[r("b-form-radio",{attrs:{name:"donatationOptions",value:!0},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfPool,callback:function(t){e.$set(e.selected,"pecsfPool",t)},expression:"selected.pecsfPool"}},[e._v("Donate to the PECSF Regional Pool Fund")]),r("b-form-radio",{attrs:{name:"donatationOptions",value:!1},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfPool,callback:function(t){e.$set(e.selected,"pecsfPool",t)},expression:"selected.pecsfPool"}},[e._v("Donate to a registered charitable organization (maximum of two)")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-region-1",label:"Choose a region for your first donation","label-class":"font-weight-bold","label-for":"input-award-options-pecsf-region-1"}},[r("b-form-select",{attrs:{id:"input-award-options-pecsf-region-1",options:e.pecsfOptions.regions,state:e.validate("pecsfRegion1"),disabled:e.isSubmitted},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfRegion1,callback:function(t){e.$set(e.selected,"pecsfRegion1",t)},expression:"selected.pecsfRegion1"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("pecsfRegion1")}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-charity-1",label:"Choose a charity for your first donation","label-class":"font-weight-bold","label-for":"input-award-options-pecsf-charity-1",description:"If you do not see your charity listed, please contact PECSF@gov.bc.ca"}},[r("b-form-select",{attrs:{id:"input-award-options-pecsf-charity-1",options:e.selected.pecsfRegion1?e.pecsfOptions.charities.filter((function(t){return t.region===e.selected.pecsfRegion1})):[{key:null,text:"Select a region to view charities."}],disabled:e.disabled.pecsfCharity1||e.isSubmitted},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfCharity1,callback:function(t){e.$set(e.selected,"pecsfCharity1",t)},expression:"selected.pecsfCharity1"}},[e._v(" "+e._s(e.selected.pecsfRegion1)+" ")]),r("b-form-invalid-feedback",{attrs:{state:e.validate("pecsfCharity1")}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-region-2",label:"Choose a region for your second donation","label-class":"font-weight-bold","label-for":"input-award-options-pecsf-region-2"}},[r("b-form-select",{attrs:{id:"input-award-options-pecsf-region-2",options:e.pecsfOptions.regions,disabled:e.disabled.pecsfRegion2||e.isSubmitted},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfRegion2,callback:function(t){e.$set(e.selected,"pecsfRegion2",t)},expression:"selected.pecsfRegion2"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("pecsfRegion2")}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-charity-2",label:"Choose a charity for your second donation","label-class":"font-weight-bold","label-for":"input-award-options-pecsf-charity-2",description:"If you do not see your charity listed, please contact PECSF@gov.bc.ca"}},[r("b-form-select",{attrs:{id:"input-award-options-pecsf-charity-2",options:e.selected.pecsfRegion2?e.pecsfOptions.charities.filter((function(t){return t.region===e.selected.pecsfRegion2})):[{key:null,text:"Select a region to view charities."}],disabled:e.disabled.pecsfCharity2||e.isSubmitted},on:{change:function(t){return e.updateSelection()}},model:{value:e.selected.pecsfCharity2,callback:function(t){e.$set(e.selected,"pecsfCharity2",t)},expression:"selected.pecsfCharity2"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("pecsfCharity1")}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-award-options-pecsf-behalf",label:"Name on PECSF Donation certificate","label-for":"input-award-options-pecsf-behalf"}},[r("b-form-input",{attrs:{id:"input-award-options-pecsf-behalf",placeholder:"Enter name here",disabled:e.disabled.honour||e.isSubmitted,state:e.validate("honour")},on:{update:function(t){return e.updateSelection()}},model:{value:e.selected.honour,callback:function(t){e.$set(e.selected,"honour",t)},expression:"selected.honour"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("honour")}},[e._v(" This field is required. ")])],1)],1)},tr=[],rr={name:"input-award-options-pecsf",data:function(){return{disabled:{pecsfRegion1:!0,pecsfCharity1:!0,pecsfRegion2:!0,pecsfCharity2:!0,honour:!1}}},computed:{recipient:function(){return this.$store.getters.getFormData},selected:function(){var e=this.recipient.award.options,t=void 0===e?{}:e,r=t||{},n=r.selections,i=void 0===n?[]:n,a={pecsfPool:!0,pecsfRegion1:null,pecsfCharity1:null,pecsfRegion2:null,pecsfCharity2:null,honour:null};return i.forEach((function(e){a[e.key]=e.value})),a},pecsfOptions:function(){return this.$store.getters.getPecsfOptions},isSubmitted:function(){return this.$store.getters.isSubmitted},validate:function(){var e=this;return function(t){return we("pecsf",t,e.recipient.award)}}},methods:{updateSelection:function(){var e=this;this.selected.pecsfPool?(this.selected.pecsfCharity1=null,this.selected.pecsfRegion2=null,this.selected.pecsfCharity2=null,this.disabled.pecsfCharity1=!0,this.disabled.pecsfRegion2=!0,this.disabled.pecsfCharity2=!0):(this.disabled.pecsfRegion2=!1,this.disabled.pecsfCharity1=!this.selected.pecsfRegion1,this.disabled.pecsfCharity2=!this.selected.pecsfRegion2,this.disabled.pecsfCharity1&&(this.selected.pecsfCharity1=null),this.disabled.pecsfCharity2&&(this.selected.pecsfCharity2=null));var t=Object.keys(this.selected||{}).map((function(t){return{key:t,value:e.selected[t]}}));this.$store.commit("setFormData",{award:{id:this.recipient.award.id||null,options:{selections:t},status:this.recipient.award.status}})}},mounted:function(){this.updateSelection()}},nr=rr,ir=Object(h["a"])(nr,er,tr,!1,null,null,null),ar=ir.exports,sr={name:"input-award",components:{InputAwardOptions:Qt,InputeAwardPECSF:ar},methods:{resetOptions:function(){this.$store.commit("setFormData",{award:{id:this.recipient.award.id,options:null,status:"delegated"}}),this.updateValidation()},updateValidation:function(){var e=f.getAwardDetails(this.recipient.award.id,this.$store.getters.getAwards||[]);this.$store.commit("setFormValidation",{award:!!this.recipient.award.id,award_options:!!e&&!!e.options||!0})}},computed:{recipient:function(){return this.$store.getters.getFormData},description:function(){var e=f.getAwardDetails(this.recipient.award.id,this.$store.getters.getAwards||[]);return e&&e.description||""},awards:function(){return(this.$store.getters.getAwards||[]).map((function(e){return{value:e.id||"",text:e.name||""}}))},isHistoricalRecipient:function(){return this.recipient.historical},isPECSF:function(){var e=this.recipient.award.id,t=void 0===e?null:e,r=f.getAwardOptions(t,this.$store.getters.getAwards||[])||[];return r.filter((function(e){return"pecsf"===String(e.key)})).length>0}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.updateValidation();case 1:case"end":return t.stop()}}),t)})))()}},or=sr,lr=Object(h["a"])(or,Bt,Xt,!1,null,null,null),cr=lr.exports,ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3 mt-3",attrs:{"header-tag":"header","header-class":"font-weight-bold","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Supervisor Contact Details "),e.validate("all")?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{attrs:{id:"fieldset-supervisor-firstName",label:"Supervisor's First Name","label-for":"input-supervisor-firstName"}},[r("b-form-input",{attrs:{id:"input-supervisor-firstName",placeholder:"Enter supervisor's first name",state:e.validate("first_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.supervisor_first_name,callback:function(t){e.$set(e.recipient,"supervisor_first_name",t)},expression:"recipient.supervisor_first_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("first_name")}},[e._v(" This field is required. ")])],1),r("b-form-group",[r("b-form-group",{attrs:{id:"fieldset-supervisor-lastName",label:"Supervisor's Last Name","label-for":"input-supervisor-lastName"}},[r("b-form-input",{attrs:{id:"input-supervisor-lastName",placeholder:"Enter supervisor's last name",state:e.validate("last_name")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.supervisor_last_name,callback:function(t){e.$set(e.recipient,"supervisor_last_name",t)},expression:"recipient.supervisor_last_name"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("last_name")}},[e._v(" This field is required. ")])],1),r("b-form-group",{attrs:{id:"fieldset-supervisor-email",label:"Supervisor's Contact Email","label-for":"input-supervisor-email"}},[r("b-form-input",{attrs:{id:"input-supervisor-email",placeholder:"Supervisor's employee email address",state:e.validate("email")},on:{update:function(t){return e.updateValidation()}},model:{value:e.recipient.supervisor_email,callback:function(t){e.$set(e.recipient,"supervisor_email",t)},expression:"recipient.supervisor_email"}}),r("b-form-invalid-feedback",{attrs:{state:e.validate("email")}},[e._v(" Enter a valid email address. ")])],1)],1)],1),r("Address",{attrs:{id:"supervisor_address",header:"Supervisor Address",label:"Supervisor",pobox:!0}})],1)},dr=[],pr={name:"input-supervisor-contact",components:{Address:St},methods:{updateValidation:function(){this.$store.commit("setFormValidation",{supervisor_contact:this.validate("all")})}},computed:{recipient:function(){return this.$store.getters.getFormData},validate:function(){var e=this;return function(t){var r={first_name:function(){return be(e.recipient.supervisor_first_name)},last_name:function(){return be(e.recipient.supervisor_last_name)},email:function(){return ge(e.recipient.supervisor_email)}};return"undefined"!==r[t]&&("all"===t?0===Object.keys(r).filter((function(e){return!r[e]()})).length:!!r[t]())}}},mounted:function(){this.updateValidation()}},mr=pr,fr=Object(h["a"])(mr,ur,dr,!1,null,null,null),br=fr.exports,gr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-card",{staticClass:"mb-3",attrs:{"header-tag":"header","bg-variant":"light","header-class":"font-weight-bold"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Confirmations "),e.recipient.is_declared?r("b-badge",{attrs:{variant:"success",show:""}},[e._v("Completed")]):e._e()]},proxy:!0}])},[r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-declarations-is-declared",label:"Declare Registration as Completed","label-size":"md","label-class":"font-weight-bold","label-for":"input-declarations-is-declared"}},[r("b-form-checkbox",{attrs:{id:"input-declarations-is-declared",value:1,"unchecked-value":0,state:!!e.recipient.is_declared},on:{change:function(t){return e.updateValidation()}},model:{value:e.recipient.is_declared,callback:function(t){e.$set(e.recipient,"is_declared",t)},expression:"recipient.is_declared"}},[e._v("Confirm this Registration")]),r("b-form-invalid-feedback",{attrs:{state:!!e.recipient.is_declared}},[e._v(" This field is required. ")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-milestone-bcgeu","label-size":"md","label-class":"font-weight-bold","label-for":"input-milestone-bcgeu"}},[r("b-form-checkbox",{attrs:{id:"input-milestone-bcgeu",value:1,"unchecked-value":0},model:{value:e.recipient.is_bcgeu_member,callback:function(t){e.$set(e.recipient,"is_bcgeu_member",t)},expression:"recipient.is_bcgeu_member"}},[e._v("Confirm BCGEU Membership")])],1),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-declarations-ceremony-opt-out","label-size":"md","label-for":"input-declarations-ceremony-opt-out"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.ariaDescribedby;return[r("b-form-checkbox",{attrs:{id:"input-declarations-ceremony-opt-out",value:1,"unchecked-value":0,"aria-describedby":n},model:{value:e.recipient.ceremony_opt_out,callback:function(t){e.$set(e.recipient,"ceremony_opt_out",t)},expression:"recipient.ceremony_opt_out"}},[e._v("Recipient would like award only and to opt out of attending the ceremony")])]}}])}),r("b-form-group",{staticClass:"mb-4",attrs:{id:"fieldset-declarations-survey-participation","label-size":"md","label-for":"input-declarations-survey-participation"}},[r("b-form-checkbox",{attrs:{id:"input-declarations-survey-participation",value:1,"unchecked-value":0},model:{value:e.recipient.survey_participation,callback:function(t){e.$set(e.recipient,"survey_participation",t)},expression:"recipient.survey_participation"}},[e._v("Confirm recipient participation in LSA survey")])],1)],1)],1)},hr=[],vr={name:"input-confirmations",methods:{updateValidation:function(){this.$store.commit("setFormValidation",{confirmations:!!this.recipient.is_declared})}},computed:{recipient:function(){return this.$store.getters.getFormData}},mounted:function(){this.updateValidation()}},_r=vr,wr=Object(h["a"])(_r,gr,hr,!1,null,null,null),yr=wr.exports,kr={id:null,historical:!1,guid:null,idir:null,employee_number:null,first_name:null,last_name:null,government_email:null,government_phone_number:null,personal_phone_number:null,organization_id:null,branch_name:null,milestones:"",qualifying_year:"",is_bcgeu_member:0,retiring_this_year:0,retirement_date:null,award:{id:null,options:null,status:"delegated"},is_declared:0,survey_participation:0,ceremony_opt_out:0,office_address:{id:null,prefix:"",street_address:"",postal_code:null,community:""},supervisor_first_name:"",supervisor_last_name:"",supervisor_email:"",supervisor_address:{id:null,pobox:"",prefix:"",street_address:"",postal_code:null,community:""},personal_address:{id:null,prefix:"",street_address:"",postal_code:null,community:""}},xr={identification:!1,office_address:!1,milestone:!1,award:!1,award_options:!1,supervisor_contact:!1,supervisor_address:!1,confirmations:!1},Rr={head:{title:"Register User"},props:["header","lead","mode"],components:{PageHeader:fe,InputIdentification:Nt,InputMilestone:Yt,InputAward:cr,InputSupervisor:br,InputPersonal:Et,InputDeclarations:yr},data:function(){return{processing:!1}},computed:{recipient:function(){return this.$store.getters.getFormData},isLoading:function(){return this.$store.getters.isLoading||!this.recipient},isValid:function(){return this.$store.getters.isValid},isHistoricalRecipient:function(){var e=this.$store.getters.getFormData||{},t=e.historical,r=void 0===t?null:t;return r}},methods:{submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Saving:",e.recipient),e.processing=!0,"create"!==e.mode){t.next=8;break}return t.next=5,P(e.recipient);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,L(e.$route.params.id,e.recipient);case 10:t.t0=t.sent;case 11:if(r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],s=a||{},o=s.id,l=void 0===o?"":o,!i&&l){t.next=21;break}console.log(">>>",i,a),e.$store.commit("setMessage",{text:"Recipient could not be saved. An error occurred.",type:"danger"}),t.next=28;break;case 21:if(e.$store.commit("setMessage",{text:"create"===e.mode?"Recipient successfully registered":"Recipient successfully updated",type:"success"}),"create"!==e.mode){t.next=27;break}return t.next=25,e.$router.push("/recipients/");case 25:t.next=28;break;case 27:case 28:e.processing=!1;case 29:case"end":return t.stop()}}),t)})))()},reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("setLoading",!0),"edit"!==e.mode){t.next=7;break}return t.next=4,E(e.$route.params.id||"");case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=[null,kr];case 8:r=t.t0,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&e.$store.commit("setMessage",i),e.$store.commit("setFormData",a),e.$store.commit("setFormValidation",xr),e.$store.commit("setLoading",!1);case 16:case"end":return t.stop()}}),t)})))()}},Or=Rr,Cr=Object(h["a"])(Or,vt,_t,!1,null,null,null),$r=Cr.exports,Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("PageHeader",{attrs:{header:this.header,lead:this.lead}}),e.isLoading?e._e():r("b-card",{attrs:{id:"recipient-delete",title:"Recipient Profile"}},[r("b-table",{attrs:{stacked:"",items:[e.recipient],fields:["first_name","last_name","employee_number","personal_email"]}}),r("b-card-footer",{attrs:{align:"center"}},[r("b-button",{staticClass:"m-2",attrs:{disabled:e.processing,type:"button"},on:{click:function(t){return e.submit()}}},[e._v("Delete")]),r("b-button",{staticClass:"m-2",attrs:{type:"button",variant:"secondary"},on:{click:function(t){return e.reroute("/recipients")}}},[e._v("Cancel")])],1)],1)],1)},Ar=[],zr={head:{title:"Register User"},props:["header","lead","mode"],components:{PageHeader:fe},data:function(){return{recipient:null,processing:!1}},computed:{isLoading:function(){return this.$store.getters.isLoading||!this.recipient}},methods:{reroute:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$router.push(e);case 2:case"end":return r.stop()}}),r)})))()},submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Deleting:",e.recipient),e.processing=!0,t.next=4,D(e.recipient.id);case 4:if(r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],console.log(i,a),s=a||{},o=s.id,l=void 0===o?"":o,!i&&l){t.next=14;break}e.$store.commit("setMessage",{text:"An error occurred. Your deletion could not be completed",type:"error"}),t.next=17;break;case 14:return e.$store.commit("setMessage",{text:"Recipient successfully deleted",type:"success"}),t.next=17,e.reroute("/recipients/");case 17:e.processing=!1;case 18:case"end":return t.stop()}}),t)})))()}},beforeCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setLoading",!0),t.next=3,E(e.$route.params.id||"");case 3:r=t.sent,n=Object(c["a"])(r,2),i=n[0],a=n[1],i&&e.$store.commit("setMessage",i),e.recipient=a,e.$store.commit("setLoading",!1);case 10:case"end":return t.stop()}}),t)})))()}},jr=zr,Er=Object(h["a"])(jr,Sr,Ar,!1,null,null,null),Pr=Er.exports,Lr=(r("7db0"),r("fb6a"),r("a630"),r("3ca3"),{organizations:[],pecsf:{charities:[],regions:[]}}),Dr=null,Fr=[],Mr={},Nr={text:"",type:"",spinner:!1},Tr={message:Nr,error:!1,loading:!1,user:Dr,options:Lr,awards:Fr,metadata:{},form:null,validation:Mr},qr={getUser:function(e){return e.user},isAuthenticated:function(e){return!!e.user&&!!e.user.role&&!!e.user.email},isOrgContact:function(e){return"orgContact"===e.user.role||"admin"===e.user.role||"super-admin"===e.user.role},isAdmin:function(e){return"admin"===e.user.role||"super-admin"===e.user.role},isSuperAdmin:function(e){return"super-admin"===e.user.role},getMessage:function(e){return e.message||Nr},isLoading:function(e){return e.loading},isError:function(e){return e.error},getFormData:function(e){return e.form},isValid:function(e){return 0===Object.keys(e.validation).filter((function(t){return!e.validation[t]})).length},getOrganizations:function(e){return f.getOrganizations(e.options.organizations)},getAwards:function(e){return e.awards},getPecsfOptions:function(e){return f.getPecsfOptions(e.options.pecsf)},getCommunities:function(e){return f.getCommunities(e.options.communities)}},Ir={loadOptions:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,M();case 3:n=t.sent,r("setOptions",n);case 5:case"end":return t.stop()}}),t)})))()},handleError:function(e,t){var r=e.commit;r("setMessage",t),r("setError",!0)},setMessage:function(e,t){var r=e.commit,n=t||{},i=n.text,a=void 0===i?"":i,s=n.type,o=void 0===s?"":s,l=n.spinner,c=void 0!==l&&l,u=n.dismissible,d=void 0!==u&&u;r("setMessage",{text:a,type:o,spinner:c,dismissible:d})},resetMessage:function(e){var t=e.commit;t("resetMessage")},setStatus:function(e,t){var r=e.commit,n=t||{},i=n.current,a=void 0===i?null:i,s=n.next,o=void 0===s?null:s,l=n.previous,c=void 0===l?null:l;r("setStatus",{current:a,previous:c,next:o})},resetRegistration:function(e){var t=e.commit;t("resetRegistration")},loadAwards:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,i,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setError",!1),n("setMessage",{text:"Loading Awards for milestone year ".concat(t,"..."),type:"info",spinner:!0}),r.next=5,F(t);case 5:i=r.sent,a=Object(c["a"])(i,2),s=a[0],o=a[1],s||!o?(n("setMessage",{text:"Awards could not be found for this milestone.",type:"danger"}),n("setError",!0)):(n("setAwards",o||[]),n("resetMessage"));case 10:case"end":return r.stop()}}),r)})))()},isHistoricalRecipient:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,i,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setMessage",{text:"Looking up Employee Number...",type:"info"}),r.next=4,z(t);case 4:i=r.sent,a=Object(c["a"])(i,2),s=a[1],n("setFormData",{historical:s}),n("resetMessage");case 9:case"end":return r.stop()}}),r)})))()}},Vr={setMessage:function(e,t){e.message=t},resetMessage:function(e){e.message=Nr},setError:function(e,t){e.error=t},setMetadata:function(e,t){e.metadata=Object.assign({},e.metadata,t)},setAwards:function(e,t){e.awards=Object.assign([],e.awards,t)},setLoading:function(e,t){e.loading=t},setUser:function(e,t){e.user=t?{role:t.role||"",idir:t.idir||"",name:t.name||"",email:t.email||"",organizations:t.organizations||[]}:null},setOptions:function(e,t){e.options=t},setPecsfOptions:function(e,t){e.options.pecsf=t},setFormData:function(e,t){e.form=Object.assign({},e.form,t)},setFormValidation:function(e,t){e.validation=Object.assign({},e.validation,t)}},Hr={state:Tr,getters:qr,actions:Ir,mutations:Vr},Ur=function(e,t,r){var n=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.title})),i=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.metaTags})),a=t.matched.slice().reverse().find((function(e){return e.meta&&e.meta.metaTags}));if(n?document.title=n.meta.title:a&&(document.title=a.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((function(e){return e.parentNode.removeChild(e)})),!i)return r();i.meta.metaTags.map((function(e){var t=document.createElement("meta");return Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])})),t.setAttribute("data-vue-router-controlled",""),t})).forEach((function(e){return document.head.appendChild(e)})),r()},Yr=function(e,t,r){var n=Hr.getters.isAdmin;n?r():r({name:"unauthorized"})};
/*!
 * Routes (Vue)
 * File: routes.js
 * Copyright(c) 2022 BC Gov
 * MIT Licensed
 */
function Br(e){var t="Long Service Awards Administration\n";return{title:"".concat(e," - ").concat(t),metaTags:[{name:"icon",content:"favicon.ico"}]}}var Xr=[{path:"/",name:"dashboard",component:De,meta:Br("Admin Dashboard"),beforeEnter:Yr},{path:"/login",name:"users-login",component:Re,meta:Br("Sign In")},{path:"/users/register",name:"users-register",component:at,meta:Br("Register Admin User"),props:{header:"Register Admin User",lead:"Create New Admin User",mode:"create"},beforeEnter:Yr},{path:"/users/edit/:id",name:"users-edit",component:at,meta:Br("Edit User Profile"),props:{header:"Edit User Profile",lead:"Edit Admin User Profile",mode:"edit"},beforeEnter:Yr},{path:"/users",name:"users-list",component:Qe,meta:Br("Manage Users"),props:{header:"Manage Users",lead:"Manage LSA admin users",mode:"list"},beforeEnter:Yr},{path:"/users/:id",name:"users-view",component:dt,meta:Br("Manage Recipients"),beforeEnter:Yr},{path:"/recipients",name:"recipients-list",component:dt,meta:Br("Manage Recipients"),props:{header:"Manage Recipients",lead:"Manage LSA recipient records",mode:"list"},beforeEnter:Yr},{path:"/recipients/view/:id",name:"recipients-view",component:ht,meta:Br("View Recipient"),props:{header:"View Recipient",lead:"View LSA recipient record",mode:"view"},beforeEnter:Yr},{path:"/recipients/create",name:"recipients-add",component:$r,meta:Br("Add Recipient"),props:{header:"Add Recipient",lead:"Add new LSA recipient record",mode:"create"},beforeEnter:Yr},{path:"/recipients/edit/:id",name:"recipients-edit",component:$r,meta:Br("Edit Recipient"),props:{header:"Edit Recipient",lead:"Edit LSA recipient record",mode:"edit"},beforeEnter:Yr},{path:"/recipients/delete/:id",name:"recipients-delete",component:Pr,meta:Br("Delete Recipient"),props:{header:"Delete Recipient",lead:"Delete LSA recipient record",mode:"delete"},beforeEnter:Yr},{path:"/401",name:"unauthorized",component:Xe,meta:Br("Unauthorized")},{path:"*",name:"page-not-found",component:Ie,meta:Br("Page Not Found")}],Gr=Xr,Jr=r("5f5b");r("f9e3"),r("2dd8");n["default"].use(Jr["a"]),n["default"].use(Ae["a"]),n["default"].use(i["a"]),n["default"].config.productionTip=!1;var Kr=new Ae["a"]({base:"/admin",mode:"history",routes:Gr}),Wr=new i["a"].Store(Hr);Kr.beforeEach(Ur),new n["default"]({store:Wr,el:"#app",router:Kr,render:function(e){return e(Se)}})},"85ec":function(e,t,r){},afbc:function(e,t,r){},e3cd:function(e,t,r){e.exports=r.p+"img/wiw-white-text.2ab74465.svg"},f87e:function(e,t,r){"use strict";r("afbc")}});
//# sourceMappingURL=app.74e3fa40.js.map